<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vite & Gourmand â€” Traiteur Gastronomique Bordeaux</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,900;1,400;1,600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --burgundy: #7B1C2A;
    --burgundy-dark: #5a1420;
    --burgundy-light: #9c2535;
    --gold: #C49A3C;
    --gold-light: #d4ae5a;
    --cream: #FAF6F0;
    --cream-dark: #F0E8DC;
    --charcoal: #1a1a1a;
    --text: #2d2d2d;
    --text-light: #6b6b6b;
    --white: #fff;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--text);
    overflow-x: hidden;
  }

  /* â”€â”€â”€ NAV â”€â”€â”€ */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
    background: rgba(250,246,240,0.96);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(196,154,60,0.2);
    padding: 0 2rem;
    display: flex; align-items: center; justify-content: space-between;
    height: 68px;
    transition: box-shadow .3s;
  }
  nav.scrolled { box-shadow: 0 4px 30px rgba(123,28,42,0.08); }

  .nav-brand {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem; font-weight: 700;
    color: var(--burgundy);
    letter-spacing: .03em;
    cursor: pointer;
    text-decoration: none;
  }
  .nav-brand span { color: var(--gold); }

  .nav-links { display: flex; align-items: center; gap: 2rem; list-style: none; }
  .nav-links a {
    font-size: .875rem; font-weight: 500; letter-spacing: .06em; text-transform: uppercase;
    color: var(--text); text-decoration: none;
    transition: color .2s;
  }
  .nav-links a:hover { color: var(--burgundy); }

  .nav-actions { display: flex; align-items: center; gap: 1rem; }

  .nav-action-link {
    font-size: .8rem; font-weight: 500; letter-spacing: .06em; text-transform: uppercase;
    color: var(--text); text-decoration: none;
    transition: color .2s;
    white-space: nowrap;
  }
  .nav-action-link:hover { color: var(--burgundy); }

  .btn-nav {
    padding: .5rem 1.2rem; border-radius: 2px;
    font-size: .8rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase;
    cursor: pointer; transition: all .2s; border: none;
  }
  .btn-outline {
    background: transparent;
    border: 1.5px solid var(--burgundy);
    color: var(--burgundy);
  }
  .btn-outline:hover { background: var(--burgundy); color: var(--white); }
  .btn-solid {
    background: var(--burgundy);
    color: var(--white);
  }
  .btn-solid:hover { background: var(--burgundy-dark); }

  .cart-btn {
    position: relative; background: var(--gold); border: none;
    width: 42px; height: 42px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: transform .2s, background .2s;
  }
  .cart-btn:hover { background: var(--gold-light); transform: scale(1.05); }
  .cart-btn svg { width: 18px; height: 18px; stroke: white; fill: none; }
  .cart-count {
    position: absolute; top: -4px; right: -4px;
    background: var(--burgundy); color: white;
    font-size: .65rem; font-weight: 700;
    width: 18px; height: 18px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    display: none;
  }

  /* â”€â”€â”€ HERO â”€â”€â”€ */
  #hero {
    min-height: 100vh;
    display: grid; grid-template-columns: 1fr 1fr;
    align-items: center;
    padding: 100px 5vw 60px;
    position: relative;
    overflow: hidden;
  }

  .hero-bg {
    position: absolute; inset: 0;
    background: linear-gradient(135deg, var(--cream) 0%, #f5ece0 40%, var(--cream-dark) 100%);
    z-index: 0;
  }

  .hero-ornament {
    position: absolute;
    width: 600px; height: 600px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(196,154,60,0.08) 0%, transparent 70%);
    top: -100px; right: -100px;
    z-index: 0;
  }

  .hero-content { position: relative; z-index: 1; padding-right: 3rem; }

  .hero-badge {
    display: inline-flex; align-items: center; gap: .5rem;
    background: rgba(123,28,42,0.06);
    border: 1px solid rgba(123,28,42,0.15);
    padding: .4rem 1rem; border-radius: 100px;
    font-size: .75rem; letter-spacing: .12em; text-transform: uppercase;
    color: var(--burgundy); margin-bottom: 1.5rem;
    animation: fadeUp .8s ease both;
  }
  .hero-badge::before {
    content: ''; width: 6px; height: 6px; border-radius: 50%;
    background: var(--gold); flex-shrink: 0;
  }

  .hero-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.8rem, 5vw, 4.5rem);
    line-height: 1.1; font-weight: 900;
    color: var(--charcoal);
    animation: fadeUp .8s ease .1s both;
  }
  .hero-title em {
    font-style: italic; color: var(--burgundy);
    display: block;
  }

  .hero-sub {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.2rem; font-weight: 300;
    color: var(--text-light); margin: 1.5rem 0 2.5rem;
    line-height: 1.7;
    animation: fadeUp .8s ease .2s both;
  }

  .hero-ctas { display: flex; gap: 1rem; flex-wrap: wrap; animation: fadeUp .8s ease .3s both; }

  .btn-primary {
    padding: .9rem 2.2rem;
    background: var(--burgundy); color: white;
    border: none; border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .85rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    cursor: pointer; transition: all .25s;
    box-shadow: 0 8px 30px rgba(123,28,42,0.3);
  }
  .btn-primary:hover { background: var(--burgundy-dark); transform: translateY(-2px); box-shadow: 0 12px 40px rgba(123,28,42,0.4); }

  .btn-secondary {
    padding: .9rem 2.2rem;
    background: transparent; color: var(--text);
    border: 1.5px solid rgba(45,45,45,0.25); border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .85rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    cursor: pointer; transition: all .25s;
    display: flex; align-items: center; gap: .5rem;
  }
  .btn-secondary:hover { border-color: var(--burgundy); color: var(--burgundy); }

  .hero-image {
    position: relative; z-index: 1;
    animation: fadeIn .9s ease .2s both;
  }

  .hero-img-frame {
    border-radius: 4px 120px 4px 120px;
    overflow: hidden;
    box-shadow: 0 30px 80px rgba(123,28,42,0.25), 0 0 0 8px rgba(196,154,60,0.15);
    aspect-ratio: 4/5;
    position: relative;
  }
  .hero-img-frame img {
    width: 100%; height: 100%; object-fit: cover;
    transition: transform .8s ease;
  }
  .hero-img-frame:hover img { transform: scale(1.04); }

  .hero-stats {
    position: absolute; bottom: -20px; left: -20px;
    background: white;
    border-radius: 4px;
    padding: 1.2rem 1.5rem;
    box-shadow: 0 10px 40px rgba(0,0,0,0.12);
    display: grid; grid-template-columns: 1fr 1fr; gap: .8rem 1.5rem;
  }
  .stat { text-align: center; }
  .stat-num {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem; font-weight: 700;
    color: var(--burgundy); display: block;
  }
  .stat-label { font-size: .65rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); }

  /* â”€â”€â”€ STATS BAR â”€â”€â”€ */
  .stats-bar {
    background: var(--burgundy);
    padding: 2.5rem 5vw;
    display: grid; grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }
  .stat-item { text-align: center; }
  .stat-item .num {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem; font-weight: 700;
    color: var(--gold);
  }
  .stat-item .lbl {
    font-size: .8rem; text-transform: uppercase; letter-spacing: .12em;
    color: rgba(255,255,255,0.6); margin-top: .3rem;
  }

  /* â”€â”€â”€ SECTION COMMON â”€â”€â”€ */
  section { padding: 6rem 5vw; }

  .section-label {
    font-size: .75rem; text-transform: uppercase; letter-spacing: .2em;
    color: var(--gold); font-weight: 500;
    display: flex; align-items: center; gap: .8rem;
    margin-bottom: 1rem;
  }
  .section-label::after {
    content: ''; flex: 1; max-width: 40px;
    height: 1px; background: var(--gold); opacity: .5;
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 3.5vw, 3rem);
    font-weight: 700; line-height: 1.2;
    color: var(--charcoal);
  }
  .section-title em { font-style: italic; color: var(--burgundy); }

  .section-desc {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.15rem; font-weight: 300;
    color: var(--text-light); line-height: 1.7;
    max-width: 600px;
  }

  /* â”€â”€â”€ MENUS SECTION â”€â”€â”€ */
  #menus { background: var(--white); }

  .menus-header { margin-bottom: 3rem; }

  .filters {
    background: var(--cream);
    border-radius: 4px;
    padding: 1.5rem 2rem;
    display: flex; flex-wrap: wrap; gap: 1rem 2rem;
    align-items: flex-end;
    margin-bottom: 3rem;
    border: 1px solid rgba(196,154,60,0.2);
  }

  .filter-group { display: flex; flex-direction: column; gap: .4rem; min-width: 160px; }
  .filter-group label {
    font-size: .7rem; text-transform: uppercase; letter-spacing: .12em;
    color: var(--text-light); font-weight: 500;
  }
  .filter-group select, .filter-group input {
    padding: .55rem .9rem;
    border: 1.5px solid rgba(0,0,0,0.12);
    border-radius: 2px;
    background: white;
    font-family: 'DM Sans', sans-serif;
    font-size: .875rem;
    color: var(--text);
    outline: none;
    transition: border-color .2s;
    cursor: pointer;
  }
  .filter-group select:focus, .filter-group input:focus { border-color: var(--burgundy); }

  .btn-reset {
    padding: .55rem 1.4rem;
    background: transparent;
    border: 1.5px solid var(--burgundy);
    color: var(--burgundy);
    border-radius: 2px;
    font-size: .75rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    cursor: pointer; transition: all .2s;
    white-space: nowrap;
  }
  .btn-reset:hover { background: var(--burgundy); color: white; }

  .menus-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }

  .menu-card {
    background: white;
    border: 1px solid rgba(0,0,0,0.06);
    border-radius: 4px;
    overflow: hidden;
    transition: transform .3s, box-shadow .3s;
    display: flex; flex-direction: column;
  }
  .menu-card:hover { transform: translateY(-6px); box-shadow: 0 20px 60px rgba(123,28,42,0.12); }

  .card-img {
    height: 200px;
    overflow: hidden;
    position: relative;
  }
  .card-img img { width: 100%; height: 100%; object-fit: cover; transition: transform .5s; }
  .menu-card:hover .card-img img { transform: scale(1.08); }

  .card-badge {
    position: absolute; top: 12px; left: 12px;
    background: rgba(255,255,255,0.92);
    padding: .25rem .7rem; border-radius: 100px;
    font-size: .65rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    color: var(--burgundy);
    backdrop-filter: blur(4px);
  }
  .card-badge.vegan { color: #2d7a3a; border: 1px solid rgba(45,122,58,0.3); }
  .card-badge.vegetarien { color: #5a7a2d; border: 1px solid rgba(90,122,45,0.3); }
  .card-badge.classique { color: var(--burgundy); border: 1px solid rgba(123,28,42,0.3); }

  .card-body { padding: 1.5rem; flex: 1; display: flex; flex-direction: column; }
  .card-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem; font-weight: 700;
    color: var(--charcoal); margin-bottom: .5rem;
  }
  .card-desc {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem; color: var(--text-light);
    line-height: 1.5; flex: 1; margin-bottom: 1rem;
  }
  .card-meta {
    font-size: .75rem; color: var(--text-light);
    margin-bottom: 1rem;
    display: flex; align-items: center; gap: .3rem;
  }
  .card-meta::before { content: 'ðŸ‘¥'; font-size: .8rem; }

  .card-footer { display: flex; align-items: center; justify-content: space-between; }
  .card-price {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem; font-weight: 700; color: var(--burgundy);
  }
  .card-price span { font-size: .75rem; font-family: 'DM Sans', sans-serif; font-weight: 400; color: var(--text-light); }

  .btn-add {
    padding: .6rem 1.3rem;
    background: var(--burgundy); color: white;
    border: none; border-radius: 2px;
    font-size: .75rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase;
    cursor: pointer; transition: all .2s;
    display: flex; align-items: center; gap: .4rem;
  }
  .btn-add:hover { background: var(--burgundy-dark); transform: scale(1.03); }
  .btn-add svg { width: 14px; height: 14px; }

  /* â”€â”€â”€ DETAIL MODAL â”€â”€â”€ */
  .modal-overlay {
    position: fixed; inset: 0; z-index: 2000;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    display: flex; align-items: center; justify-content: center;
    padding: 2rem;
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
  }
  .modal-overlay.open { opacity: 1; pointer-events: all; }

  .modal {
    background: white; border-radius: 4px;
    max-width: 700px; width: 100%;
    max-height: 90vh; overflow-y: auto;
    transform: scale(.96) translateY(20px);
    transition: transform .3s;
    position: relative;
  }
  .modal-overlay.open .modal { transform: scale(1) translateY(0); }

  .modal-img { height: 280px; overflow: hidden; }
  .modal-img img { width: 100%; height: 100%; object-fit: cover; }

  .modal-content { padding: 2.5rem; }
  .modal-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 1.5rem; }
  .modal-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem; font-weight: 700; color: var(--charcoal);
  }
  .modal-close {
    background: none; border: none; cursor: pointer;
    font-size: 1.5rem; color: var(--text-light);
    padding: .2rem; line-height: 1;
    transition: color .2s;
  }
  .modal-close:hover { color: var(--burgundy); }

  .modal-desc {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.15rem; color: var(--text-light);
    line-height: 1.7; margin-bottom: 2rem;
  }

  .modal-details {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 1rem; margin-bottom: 2rem;
  }
  .modal-detail-item {
    background: var(--cream);
    padding: 1rem; border-radius: 2px;
  }
  .modal-detail-label { font-size: .7rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); margin-bottom: .3rem; }
  .modal-detail-value { font-weight: 600; color: var(--charcoal); }

  .modal-order { display: flex; align-items: center; gap: 1.5rem; flex-wrap: wrap; }
  .qty-control { display: flex; align-items: center; gap: .8rem; }
  .qty-btn {
    width: 36px; height: 36px; border-radius: 50%;
    border: 1.5px solid rgba(0,0,0,0.15);
    background: white; font-size: 1.2rem; font-weight: 500;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all .2s;
  }
  .qty-btn:hover { border-color: var(--burgundy); color: var(--burgundy); }
  .qty-num { font-size: 1.1rem; font-weight: 600; min-width: 24px; text-align: center; }

  .modal-price {
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem; font-weight: 700; color: var(--burgundy);
  }

  .btn-add-cart {
    flex: 1;
    padding: .9rem 2rem;
    background: var(--burgundy); color: white;
    border: none; border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .85rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    cursor: pointer; transition: all .25s;
  }
  .btn-add-cart:hover { background: var(--burgundy-dark); }

  /* â”€â”€â”€ CART PANEL â”€â”€â”€ */
  .cart-overlay {
    position: fixed; inset: 0; z-index: 3000;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(4px);
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
  }
  .cart-overlay.open { opacity: 1; pointer-events: all; }

  .cart-panel {
    position: fixed; top: 0; right: 0; bottom: 0;
    width: min(420px, 100vw);
    background: white; z-index: 3001;
    display: flex; flex-direction: column;
    transform: translateX(100%);
    transition: transform .35s cubic-bezier(.4,0,.2,1);
    box-shadow: -10px 0 60px rgba(0,0,0,0.15);
  }
  .cart-overlay.open .cart-panel { transform: translateX(0); }

  .cart-header {
    padding: 1.5rem 2rem;
    border-bottom: 1px solid rgba(0,0,0,0.06);
    display: flex; align-items: center; justify-content: space-between;
  }
  .cart-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem; font-weight: 700; color: var(--charcoal);
  }
  .cart-close {
    background: none; border: none; cursor: pointer;
    font-size: 1.5rem; color: var(--text-light);
    transition: color .2s;
  }
  .cart-close:hover { color: var(--burgundy); }

  .cart-items { flex: 1; overflow-y: auto; padding: 1.5rem 2rem; }

  .cart-empty {
    text-align: center; padding: 4rem 2rem;
    color: var(--text-light);
  }
  .cart-empty-icon { font-size: 3rem; margin-bottom: 1rem; }
  .cart-empty p {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
  }

  .cart-item {
    display: flex; gap: 1rem; align-items: center;
    padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.05);
  }
  .cart-item-img { width: 64px; height: 64px; border-radius: 2px; overflow: hidden; flex-shrink: 0; }
  .cart-item-img img { width: 100%; height: 100%; object-fit: cover; }
  .cart-item-info { flex: 1; }
  .cart-item-name { font-weight: 600; font-size: .9rem; color: var(--charcoal); margin-bottom: .2rem; }
  .cart-item-price { font-size: .8rem; color: var(--text-light); }
  .cart-item-qty { display: flex; align-items: center; gap: .5rem; }
  .cart-item-qty button {
    width: 26px; height: 26px; border-radius: 50%;
    border: 1px solid rgba(0,0,0,0.12);
    background: none; cursor: pointer; font-size: .9rem;
    display: flex; align-items: center; justify-content: center;
    transition: all .15s;
  }
  .cart-item-qty button:hover { background: var(--burgundy); color: white; border-color: var(--burgundy); }
  .cart-item-qty span { font-size: .9rem; font-weight: 600; min-width: 20px; text-align: center; }
  .cart-item-total { font-family: 'Playfair Display', serif; font-weight: 700; color: var(--burgundy); font-size: 1rem; }

  .cart-footer {
    padding: 1.5rem 2rem;
    border-top: 1px solid rgba(0,0,0,0.06);
  }
  .cart-subtotal {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 1rem;
  }
  .cart-subtotal .label { color: var(--text-light); font-size: .875rem; }
  .cart-subtotal .amount {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem; font-weight: 700; color: var(--charcoal);
  }
  .btn-checkout {
    width: 100%; padding: 1rem;
    background: var(--burgundy); color: white;
    border: none; border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .875rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    cursor: pointer; transition: all .25s;
    margin-bottom: .75rem;
  }
  .btn-checkout:hover { background: var(--burgundy-dark); }
  .cart-note { font-size: .7rem; text-align: center; color: var(--text-light); }

  /* â”€â”€â”€ ABOUT â”€â”€â”€ */
  #about {
    background: var(--cream);
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 5rem; align-items: center;
  }

  .about-images { position: relative; height: 500px; }
  .about-img1 {
    position: absolute; top: 0; left: 0;
    width: 72%; height: 75%;
    border-radius: 4px 100px 4px 4px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.12);
  }
  .about-img1 img { width: 100%; height: 100%; object-fit: cover; }
  .about-img2 {
    position: absolute; bottom: 0; right: 0;
    width: 55%; height: 55%;
    border-radius: 100px 4px 4px 4px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(123,28,42,0.2);
    border: 4px solid white;
  }
  .about-img2 img { width: 100%; height: 100%; object-fit: cover; }

  .about-content {}
  .about-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem; font-weight: 300;
    line-height: 1.8; color: var(--text-light);
    margin: 1.5rem 0 2rem;
  }
  .about-features { display: flex; flex-direction: column; gap: 1rem; margin-top: 2rem; }
  .feature-item { display: flex; align-items: flex-start; gap: 1rem; }
  .feature-icon {
    width: 40px; height: 40px; border-radius: 50%;
    background: rgba(123,28,42,0.06);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; flex-shrink: 0;
  }
  .feature-text h4 { font-size: .9rem; font-weight: 600; margin-bottom: .2rem; }
  .feature-text p { font-size: .8rem; color: var(--text-light); line-height: 1.5; }

  /* â”€â”€â”€ REVIEWS â”€â”€â”€ */
  #reviews { background: var(--white); }
  .reviews-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-top: 3rem; }
  .review-card {
    background: var(--cream);
    padding: 2rem;
    border-radius: 4px;
    border-left: 3px solid var(--gold);
    transition: transform .2s;
  }
  .review-card:hover { transform: translateY(-3px); }
  .stars { color: var(--gold); font-size: 1rem; margin-bottom: 1rem; }
  .review-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem; font-style: italic;
    line-height: 1.6; color: var(--text);
    margin-bottom: 1.2rem;
  }
  .reviewer { display: flex; align-items: center; gap: .8rem; }
  .reviewer-avatar {
    width: 38px; height: 38px; border-radius: 50%;
    background: var(--burgundy);
    display: flex; align-items: center; justify-content: center;
    font-size: .9rem; font-weight: 700; color: white;
  }
  .reviewer-name { font-weight: 600; font-size: .875rem; }
  .reviewer-date { font-size: .75rem; color: var(--text-light); }

  /* â”€â”€â”€ CONTACT â”€â”€â”€ */
  #contact { background: var(--cream); }
  .contact-grid { display: grid; grid-template-columns: 1fr 1.4fr; gap: 5rem; margin-top: 3rem; }
  .contact-info { display: flex; flex-direction: column; gap: 2rem; }
  .contact-item { display: flex; gap: 1rem; align-items: flex-start; }
  .contact-icon {
    width: 44px; height: 44px; border-radius: 50%;
    background: var(--burgundy);
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem; flex-shrink: 0; color: white;
  }
  .contact-detail h4 { font-weight: 600; margin-bottom: .2rem; }
  .contact-detail p { font-size: .875rem; color: var(--text-light); line-height: 1.5; }

  .contact-form { display: flex; flex-direction: column; gap: 1.2rem; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.2rem; }
  .form-group { display: flex; flex-direction: column; gap: .4rem; }
  .form-group label { font-size: .75rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); font-weight: 500; }
  .form-group input, .form-group select, .form-group textarea {
    padding: .75rem 1rem;
    border: 1.5px solid rgba(0,0,0,0.1);
    border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .9rem; color: var(--text);
    background: white; outline: none;
    transition: border-color .2s;
  }
  .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: var(--burgundy); }
  .form-group textarea { min-height: 100px; resize: vertical; }

  /* â”€â”€â”€ FOOTER â”€â”€â”€ */
  footer {
    background: var(--charcoal);
    color: rgba(255,255,255,0.5);
    padding: 3rem 5vw 2rem;
  }
  .footer-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 3rem; margin-bottom: 2.5rem; }
  .footer-brand {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem; font-weight: 700;
    color: white; margin-bottom: 1rem;
  }
  .footer-brand span { color: var(--gold); }
  .footer-desc { font-size: .85rem; line-height: 1.6; max-width: 280px; }
  .footer-col h5 { font-size: .75rem; text-transform: uppercase; letter-spacing: .15em; color: white; margin-bottom: 1rem; }
  .footer-col ul { list-style: none; display: flex; flex-direction: column; gap: .5rem; }
  .footer-col ul li a { font-size: .85rem; color: rgba(255,255,255,0.5); text-decoration: none; transition: color .2s; }
  .footer-col ul li a:hover { color: var(--gold); }
  .footer-hours { font-size: .85rem; line-height: 1.8; }
  .footer-bottom {
    border-top: 1px solid rgba(255,255,255,0.06);
    padding-top: 1.5rem;
    display: flex; justify-content: space-between; align-items: center;
    font-size: .8rem;
  }
  .footer-bottom a { color: rgba(255,255,255,0.4); text-decoration: none; }
  .footer-bottom a:hover { color: var(--gold); }

  /* â”€â”€â”€ CHECKOUT MODAL â”€â”€â”€ */
  .checkout-form { padding: 2.5rem; }
  .checkout-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem; font-weight: 700; margin-bottom: .5rem;
  }
  .checkout-subtitle { color: var(--text-light); font-size: .9rem; margin-bottom: 2rem; }
  .step-indicator { display: flex; gap: 1rem; margin-bottom: 2rem; align-items: center; }
  .step { display: flex; align-items: center; gap: .4rem; font-size: .8rem; }
  .step-num {
    width: 24px; height: 24px; border-radius: 50%;
    background: var(--cream); color: var(--text-light);
    display: flex; align-items: center; justify-content: center;
    font-size: .7rem; font-weight: 700;
    border: 1.5px solid rgba(0,0,0,0.15);
  }
  .step.active .step-num { background: var(--burgundy); color: white; border-color: var(--burgundy); }
  .step-divider { flex: 1; height: 1px; background: rgba(0,0,0,0.1); }

  /* â”€â”€â”€ SUCCESS TOAST â”€â”€â”€ */
  .toast {
    position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%) translateY(100px);
    background: var(--charcoal); color: white;
    padding: 1rem 2rem; border-radius: 4px;
    font-size: .875rem; font-weight: 500;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    z-index: 5000;
    transition: transform .4s cubic-bezier(.4,0,.2,1);
    white-space: nowrap;
    display: flex; align-items: center; gap: .6rem;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }
  .toast::before { content: 'âœ“'; color: var(--gold); font-weight: 700; }

  /* â”€â”€â”€ NO RESULTS â”€â”€â”€ */
  .no-results {
    grid-column: 1/-1; text-align: center; padding: 4rem;
    color: var(--text-light);
  }
  .no-results p { font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; }

  /* â”€â”€â”€ ANIMATIONS â”€â”€â”€ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; } to { opacity: 1; }
  }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
  @media (max-width: 900px) {
    #hero { grid-template-columns: 1fr; padding-bottom: 3rem; }
    .hero-image { display: none; }
    #about { grid-template-columns: 1fr; }
    .about-images { display: none; }
    .contact-grid { grid-template-columns: 1fr; gap: 2rem; }
    .footer-grid { grid-template-columns: 1fr; }
    .modal-details { grid-template-columns: 1fr; }
    .form-row { grid-template-columns: 1fr; }
    .stats-bar { grid-template-columns: 1fr 1fr; }
    .nav-links { display: none; }
  }

  @media (max-width: 600px) {
    .filters { flex-direction: column; }
    .filter-group { min-width: auto; }
  }

  /* Smooth scroll for anchor links */
  a[href^="#"] { text-decoration: none; color: inherit; }

  /* â”€â”€â”€ EMPLOYEE PANEL â”€â”€â”€ */
  .emp-overlay {
    position: fixed; inset: 0; z-index: 4500;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(6px);
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
    display: flex; justify-content: flex-end;
  }
  .emp-overlay.open { opacity: 1; pointer-events: all; }
  .emp-panel {
    width: min(700px, 100vw);
    background: var(--cream);
    height: 100%;
    display: flex; flex-direction: column;
    transform: translateX(100%);
    transition: transform .35s cubic-bezier(.4,0,.2,1);
    box-shadow: -10px 0 60px rgba(0,0,0,0.2);
  }
  .emp-overlay.open .emp-panel { transform: translateX(0); }
  .emp-header {
    background: var(--charcoal);
    padding: 1.5rem 2rem;
    display: flex; align-items: center; justify-content: space-between;
    flex-shrink: 0;
  }
  .emp-badge {
    background: var(--gold); color: white;
    font-size: .65rem; font-weight: 700; letter-spacing: .12em; text-transform: uppercase;
    padding: .2rem .7rem; border-radius: 100px; display: inline-block; margin-bottom: .3rem;
  }
  .emp-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem; font-weight: 700; color: white;
  }
  .emp-close {
    background: rgba(255,255,255,0.1); border: none;
    width: 32px; height: 32px; border-radius: 50%;
    color: white; font-size: 1rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background .2s;
  }
  .emp-close:hover { background: rgba(255,255,255,0.2); }
  .emp-tabs {
    display: flex; background: white;
    border-bottom: 1px solid rgba(0,0,0,.07);
    overflow-x: auto; flex-shrink: 0;
  }
  .emp-tab {
    flex: 1; min-width: 100px;
    padding: 1rem .5rem;
    background: none; border: none;
    font-family: 'DM Sans', sans-serif;
    font-size: .72rem; font-weight: 600; letter-spacing: .05em; text-transform: uppercase;
    color: var(--text-light); cursor: pointer;
    border-bottom: 2px solid transparent; margin-bottom: -1px;
    transition: all .2s; white-space: nowrap;
  }
  .emp-tab.active { color: var(--burgundy); border-bottom-color: var(--burgundy); }
  .tab-badge {
    display: inline-flex; align-items: center; justify-content: center;
    width: 17px; height: 17px; border-radius: 50%;
    background: var(--burgundy); color: white;
    font-size: .58rem; font-weight: 700; margin-left: .3rem; vertical-align: middle;
  }
  .emp-body { flex: 1; padding: 1.5rem 2rem; overflow-y: auto; }
  .emp-section { display: none; }
  .emp-section.active { display: block; }
  .emp-section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem; font-weight: 700; color: var(--charcoal);
    margin-bottom: 1.2rem;
    display: flex; align-items: center; justify-content: space-between;
  }
  .emp-filters {
    background: white; border: 1px solid rgba(0,0,0,.06);
    border-radius: 4px; padding: 1rem 1.2rem;
    display: flex; gap: .8rem; flex-wrap: wrap; align-items: flex-end;
    margin-bottom: 1.2rem;
  }
  .emp-filter-group { display: flex; flex-direction: column; gap: .3rem; flex: 1; min-width: 120px; }
  .emp-filter-group label { font-size: .65rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); font-weight: 500; }
  .emp-filter-group select, .emp-filter-group input {
    padding: .45rem .8rem; border: 1.5px solid rgba(0,0,0,.1); border-radius: 2px;
    font-family: 'DM Sans', sans-serif; font-size: .8rem; color: var(--text);
    background: white; outline: none; transition: border-color .2s;
  }
  .emp-filter-group select:focus, .emp-filter-group input:focus { border-color: var(--burgundy); }
  .emp-order-card {
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06); padding: 1.2rem; margin-bottom: 1rem;
    transition: box-shadow .2s;
  }
  .emp-order-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .emp-order-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: .8rem; }
  .emp-order-ref { font-size: .7rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); }
  .emp-order-name { font-weight: 600; font-size: .95rem; color: var(--charcoal); margin-top: .1rem; }
  .emp-order-client { font-size: .78rem; color: var(--text-light); margin-top: .15rem; }
  .emp-order-meta { font-size: .78rem; color: var(--text-light); display: flex; gap: .8rem; flex-wrap: wrap; margin-bottom: .5rem; }
  .emp-order-actions {
    display: flex; gap: .6rem; align-items: center; flex-wrap: wrap;
    margin-top: .8rem; padding-top: .8rem; border-top: 1px solid rgba(0,0,0,.05);
  }
  .emp-status-select {
    padding: .4rem .7rem; border: 1.5px solid rgba(0,0,0,.12); border-radius: 2px;
    font-family: 'DM Sans', sans-serif; font-size: .75rem; color: var(--text);
    background: white; outline: none; cursor: pointer; transition: border-color .2s; flex: 1; min-width: 170px;
  }
  .emp-status-select:focus { border-color: var(--burgundy); }
  .btn-emp-update {
    padding: .4rem 1rem; background: var(--burgundy); color: white;
    border: none; border-radius: 2px;
    font-size: .72rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase;
    cursor: pointer; transition: all .2s; white-space: nowrap;
  }
  .btn-emp-update:hover { background: var(--burgundy-dark); }
  .btn-emp-cancel {
    padding: .4rem 1rem; background: none; color: #e53935;
    border: 1.5px solid rgba(229,57,53,0.3); border-radius: 2px;
    font-size: .72rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase;
    cursor: pointer; transition: all .2s; white-space: nowrap;
  }
  .btn-emp-cancel:hover { background: #e53935; color: white; border-color: #e53935; }
  /* Extended status badges */
  .status-received        { background: rgba(100,100,100,0.1); color: #555; }
  .status-accepted        { background: rgba(45,122,58,0.1); color: #2d7a3a; }
  .status-preparing       { background: rgba(255,152,0,0.12); color: #e65100; }
  .status-delivering      { background: rgba(33,150,243,0.12); color: #0d47a1; }
  .status-awaiting_return { background: rgba(196,154,60,0.15); color: #7a5c00; }
  .status-completed       { background: rgba(46,125,50,0.12); color: #1b5e20; }
  /* Cancel modal */
  .cancel-modal-content { padding: 2rem 2.5rem; }
  .cancel-modal-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem; font-weight: 700; color: var(--charcoal); margin-bottom: .3rem;
  }
  .cancel-modal-sub { font-size: .85rem; color: var(--text-light); margin-bottom: 1.5rem; line-height: 1.5; }
  .cancel-warn {
    background: rgba(229,57,53,0.06); border-left: 3px solid #e53935;
    padding: .9rem 1rem; border-radius: 0 4px 4px 0;
    font-size: .82rem; color: #b71c1c; line-height: 1.5; margin-bottom: 1.5rem;
  }
  /* Employee menu cards */
  .emp-menu-card {
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06); padding: 1rem 1.2rem; margin-bottom: .7rem;
    display: flex; align-items: center; gap: 1rem; transition: box-shadow .2s;
  }
  .emp-menu-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .emp-menu-thumb { width: 56px; height: 56px; border-radius: 4px; overflow: hidden; flex-shrink: 0; }
  .emp-menu-thumb img { width: 100%; height: 100%; object-fit: cover; }
  .emp-menu-info { flex: 1; min-width: 0; }
  .emp-menu-name { font-weight: 600; font-size: .875rem; color: var(--charcoal); margin-bottom: .2rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .emp-menu-meta { font-size: .75rem; color: var(--text-light); }
  .emp-menu-actions { display: flex; gap: .4rem; flex-shrink: 0; }
  /* Review moderation */
  .emp-review-card {
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06); padding: 1.2rem; margin-bottom: .8rem;
    transition: box-shadow .2s;
  }
  .emp-review-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .emp-review-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: .7rem; }
  .emp-review-author { font-weight: 600; font-size: .875rem; color: var(--charcoal); }
  .emp-review-date { font-size: .72rem; color: var(--text-light); margin-top: .1rem; }
  .emp-review-text { font-family: 'Cormorant Garamond', serif; font-size: 1rem; font-style: italic; color: var(--text); line-height: 1.5; margin-bottom: 1rem; }
  .emp-review-actions { display: flex; gap: .6rem; }
  .btn-approve {
    padding: .35rem .9rem; background: rgba(45,122,58,0.08); color: #2d7a3a;
    border: 1.5px solid rgba(45,122,58,0.3); border-radius: 2px;
    font-size: .72rem; font-weight: 600; letter-spacing: .06em; text-transform: uppercase;
    cursor: pointer; transition: all .2s;
  }
  .btn-approve:hover { background: #2d7a3a; color: white; border-color: #2d7a3a; }
  .btn-reject {
    padding: .35rem .9rem; background: none; color: #e53935;
    border: 1.5px solid rgba(229,57,53,0.3); border-radius: 2px;
    font-size: .72rem; font-weight: 600; letter-spacing: .06em; text-transform: uppercase;
    cursor: pointer; transition: all .2s;
  }
  .btn-reject:hover { background: #e53935; color: white; border-color: #e53935; }
  /* Hours editor */
  .hours-row {
    display: flex; align-items: center; gap: 1rem;
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06); padding: 1rem 1.2rem; margin-bottom: .7rem;
    flex-wrap: wrap;
  }
  .hours-day { font-weight: 600; font-size: .875rem; min-width: 80px; color: var(--charcoal); }
  .hours-inputs { display: flex; gap: .5rem; align-items: center; flex: 1; flex-wrap: wrap; }
  .hours-inputs input[type="time"] {
    padding: .4rem .7rem; border: 1.5px solid rgba(0,0,0,.1); border-radius: 2px;
    font-family: 'DM Sans', sans-serif; font-size: .85rem; color: var(--text);
    background: white; outline: none; transition: border-color .2s;
  }
  .hours-inputs input[type="time"]:focus { border-color: var(--burgundy); }
  .hours-inputs span { font-size: .8rem; color: var(--text-light); }
  .hours-closed-toggle { display: flex; align-items: center; gap: .4rem; font-size: .8rem; color: var(--text-light); margin-left: auto; cursor: pointer; }
  /* Menu edit form overlay */
  .emp-form-overlay {
    position: fixed; inset: 0; z-index: 5500;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(6px);
    display: flex; align-items: center; justify-content: center;
    padding: 2rem; opacity: 0; pointer-events: none; transition: opacity .3s;
  }
  .emp-form-overlay.open { opacity: 1; pointer-events: all; }
  .emp-form-modal {
    background: white; border-radius: 4px;
    max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;
    transform: scale(.96) translateY(20px); transition: transform .3s; padding: 2rem 2.5rem;
  }
  .emp-form-overlay.open .emp-form-modal { transform: scale(1) translateY(0); }
  .emp-form-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem; font-weight: 700; color: var(--charcoal);
    margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;
  }
  .emp-form-grid { display: flex; flex-direction: column; gap: 1rem; }
  .emp-form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

  /* â”€â”€â”€ ADMIN PANEL â”€â”€â”€ */
  .adm-overlay {
    position: fixed; inset: 0; z-index: 4800;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(6px);
    opacity: 0; pointer-events: none; transition: opacity .3s;
    display: flex; justify-content: flex-end;
  }
  .adm-overlay.open { opacity: 1; pointer-events: all; }
  .adm-panel {
    width: min(780px, 100vw); background: var(--cream); height: 100%;
    display: flex; flex-direction: column;
    transform: translateX(100%); transition: transform .35s cubic-bezier(.4,0,.2,1);
    box-shadow: -10px 0 60px rgba(0,0,0,0.25);
  }
  .adm-overlay.open .adm-panel { transform: translateX(0); }
  .adm-header {
    background: linear-gradient(135deg, #1a1a1a 0%, #2a1e08 100%);
    padding: 1.5rem 2rem; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;
  }
  .adm-badge {
    background: var(--gold); color: #1a1a1a;
    font-size: .65rem; font-weight: 700; letter-spacing: .12em; text-transform: uppercase;
    padding: .2rem .7rem; border-radius: 100px; display: inline-block; margin-bottom: .3rem;
  }
  .adm-title { font-family: 'Playfair Display', serif; font-size: 1.2rem; font-weight: 700; color: white; }
  .adm-subtitle { font-size: .75rem; color: rgba(255,255,255,0.45); margin-top: .15rem; }
  .adm-close {
    background: rgba(255,255,255,0.08); border: none; width: 32px; height: 32px; border-radius: 50%;
    color: white; font-size: 1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background .2s;
  }
  .adm-close:hover { background: rgba(196,154,60,0.3); }
  .adm-tabs {
    display: flex; background: white; border-bottom: 1px solid rgba(0,0,0,.07); overflow-x: auto; flex-shrink: 0;
  }
  .adm-tab {
    flex: 1; min-width: 90px; padding: 1rem .5rem; background: none; border: none;
    font-family: 'DM Sans', sans-serif; font-size: .72rem; font-weight: 600; letter-spacing: .05em; text-transform: uppercase;
    color: var(--text-light); cursor: pointer; border-bottom: 2px solid transparent; margin-bottom: -1px; transition: all .2s; white-space: nowrap;
  }
  .adm-tab.active { color: var(--gold); border-bottom-color: var(--gold); }
  .adm-body { flex: 1; padding: 1.5rem 2rem; overflow-y: auto; }
  .adm-section { display: none; }
  .adm-section.active { display: block; }
  .adm-section-title {
    font-family: 'Playfair Display', serif; font-size: 1.1rem; font-weight: 700;
    color: var(--charcoal); margin-bottom: 1.2rem;
  }
  .adm-stat-cards { display: grid; grid-template-columns: repeat(3,1fr); gap: 1rem; margin-bottom: 1.5rem; }
  .adm-stat-card {
    background: white; border-radius: 4px; border: 1px solid rgba(0,0,0,.06);
    border-left: 3px solid var(--burgundy); padding: 1.2rem; text-align: center;
  }
  .adm-stat-num { font-family: 'Playfair Display', serif; font-size: 1.7rem; font-weight: 700; color: var(--burgundy); margin-bottom: .3rem; }
  .adm-stat-lbl { font-size: .7rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); }
  .adm-emp-card {
    background: white; border-radius: 4px; border: 1px solid rgba(0,0,0,.06);
    padding: 1.1rem 1.3rem; margin-bottom: .7rem;
    display: flex; justify-content: space-between; align-items: center; gap: 1rem; transition: box-shadow .2s;
  }
  .adm-emp-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .adm-emp-info { flex: 1; }
  .adm-emp-name { font-weight: 600; font-size: .9rem; color: var(--charcoal); margin-bottom: .15rem; }
  .adm-emp-email { font-size: .8rem; color: var(--text-light); }
  .adm-emp-meta { font-size: .7rem; color: var(--text-light); margin-top: .1rem; }
  .adm-emp-right { display: flex; flex-direction: column; align-items: flex-end; gap: .4rem; flex-shrink: 0; }
  .adm-create-form {
    background: white; border-radius: 4px; border: 1px solid rgba(196,154,60,0.25); padding: 1.5rem; margin-bottom: 1.5rem;
  }
  .adm-create-form-title { font-family: 'Playfair Display', serif; font-size: 1rem; font-weight: 700; color: var(--charcoal); margin-bottom: 1rem; }
  .adm-chart-container {
    position: relative; height: 300px; background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06); padding: 1rem; margin-top: 1rem;
  }
  .adm-rev-filters {
    background: white; border: 1px solid rgba(0,0,0,.06); border-radius: 4px;
    padding: 1.2rem 1.5rem; margin-bottom: 1.2rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end;
  }
  .adm-rev-filters .filter-group { min-width: 140px; flex: 1; }
  .db-badge {
    display: inline-flex; align-items: center; gap: .4rem;
    background: rgba(196,154,60,0.08); border: 1px solid rgba(196,154,60,0.2);
    padding: .3rem .8rem; border-radius: 100px; font-size: .7rem; font-weight: 500;
    color: #7a5c00; margin-bottom: 1.2rem;
  }
  .adm-tool-card {
    background: white; border: 1px solid rgba(0,0,0,.06); border-radius: 4px;
    padding: 1.2rem; display: flex; justify-content: space-between; align-items: center; margin-bottom: .8rem; transition: box-shadow .2s;
  }
  .adm-tool-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .adm-tool-name { font-weight: 600; font-size: .9rem; margin-bottom: .2rem; }
  .adm-tool-desc { font-size: .78rem; color: var(--text-light); }
  .rev-table { width: 100%; border-collapse: collapse; margin-top: .8rem; font-size: .875rem; }
  .rev-table th { text-align: left; padding: .6rem .8rem; background: var(--cream); font-size: .72rem; text-transform: uppercase; letter-spacing: .08em; color: var(--text-light); }
  .rev-table td { padding: .6rem .8rem; border-bottom: 1px solid rgba(0,0,0,.05); vertical-align: middle; }
  .rev-table tr:last-child td { border-bottom: none; font-weight: 700; border-top: 2px solid rgba(0,0,0,.1); }

  /* â”€â”€â”€ USER ORDERS â”€â”€â”€ */
  .uo-card {
    background: white; border-radius: 6px; border: 1px solid rgba(0,0,0,.07);
    margin-bottom: 1rem; overflow: hidden; transition: box-shadow .2s;
  }
  .uo-card:hover { box-shadow: 0 4px 18px rgba(0,0,0,.09); }
  .uo-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    padding: .9rem 1.1rem .6rem; gap: .8rem;
  }
  .uo-ref { font-size: .7rem; text-transform: uppercase; letter-spacing: .08em; color: var(--text-light); }
  .uo-menu { font-family: 'Playfair Display', serif; font-size: .95rem; font-weight: 700; color: var(--charcoal); margin-top: .15rem; }
  .uo-meta {
    display: flex; flex-wrap: wrap; gap: .4rem .9rem;
    padding: 0 1.1rem .6rem; font-size: .77rem; color: var(--text-light);
  }
  .uo-total {
    padding: .5rem 1.1rem; background: var(--cream);
    display: flex; justify-content: space-between; align-items: center; gap: .6rem;
    font-size: .82rem;
  }
  .uo-total-price { font-family: 'Playfair Display', serif; font-weight: 700; color: var(--burgundy); font-size: 1rem; }
  .uo-actions { display: flex; gap: .5rem; flex-wrap: wrap; }
  .uo-btn {
    padding: .35rem .75rem; border-radius: 2px; border: 1.5px solid rgba(0,0,0,.13);
    background: white; cursor: pointer; font-size: .72rem; font-weight: 600;
    font-family: 'DM Sans', sans-serif; transition: background .15s, border-color .15s; color: var(--charcoal);
  }
  .uo-btn:hover { background: var(--cream); border-color: rgba(0,0,0,.22); }
  .uo-btn-cancel { border-color: rgba(229,57,53,.3); color: #c62828; }
  .uo-btn-cancel:hover { background: rgba(229,57,53,.06); }
  .uo-btn-review { border-color: rgba(196,154,60,.4); color: #7a5c00; }
  .uo-btn-review:hover { background: rgba(196,154,60,.07); }
  /* Timeline */
  .uo-timeline { padding: .7rem 1.1rem .9rem; }
  .uo-timeline-title { font-size: .7rem; text-transform: uppercase; letter-spacing: .09em; color: var(--text-light); margin-bottom: .7rem; }
  .uo-tl-item { display: flex; gap: .7rem; position: relative; }
  .uo-tl-item:not(:last-child)::before {
    content: ''; position: absolute; left: 6px; top: 14px; width: 1px;
    height: calc(100% - 2px); background: rgba(0,0,0,.1);
  }
  .uo-tl-dot {
    width: 13px; height: 13px; border-radius: 50%; background: var(--cream);
    border: 2px solid rgba(0,0,0,.18); flex-shrink: 0; margin-top: 3px; position: relative; z-index: 1;
  }
  .uo-tl-dot.active { background: var(--burgundy); border-color: var(--burgundy); }
  .uo-tl-body { flex: 1; padding-bottom: .7rem; }
  .uo-tl-label { font-size: .8rem; font-weight: 600; color: var(--charcoal); }
  .uo-tl-date { font-size: .72rem; color: var(--text-light); margin-top: .1rem; }
  /* Star rating */
  .star-rating { display: flex; gap: .2rem; }
  .star-rating .star {
    font-size: 1.4rem; cursor: pointer; color: #ccc;
    transition: color .1s, transform .1s;
  }
  .star-rating .star:hover,
  .star-rating .star.selected { color: var(--gold); }
  .star-rating .star:hover { transform: scale(1.2); }
  .star-display { display: flex; gap: .15rem; }
  .star-display .star { font-size: .95rem; color: var(--gold); cursor: default; }
  .star-display .star.empty { color: #ddd; }
  /* Edit / Review modals */
  .uo-modal-overlay {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,.55);
    z-index: 3500; align-items: center; justify-content: center; padding: 1rem;
  }
  .uo-modal-overlay.open { display: flex; }
  .uo-modal {
    background: white; border-radius: 8px; width: 100%; max-width: 520px;
    max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,.25);
  }
  .uo-modal-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 1.2rem 1.4rem; border-bottom: 1px solid rgba(0,0,0,.07);
  }
  .uo-modal-title { font-family: 'Playfair Display', serif; font-size: 1.05rem; font-weight: 700; color: var(--charcoal); }
  .uo-modal-close { background: none; border: none; font-size: 1.1rem; cursor: pointer; color: var(--text-light); padding: .2rem; }
  .uo-modal-body { padding: 1.4rem; }
  .uo-modal-footer { padding: .9rem 1.4rem 1.2rem; display: flex; gap: .7rem; justify-content: flex-end; border-top: 1px solid rgba(0,0,0,.06); }

  /* â”€â”€â”€ MENTIONS LÃ‰GALES â”€â”€â”€ */
  .mentions-section {
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid rgba(0,0,0,.06);
  }
  .mentions-h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.1rem; font-weight: 700;
    color: var(--burgundy);
    margin-bottom: 1rem;
  }
  .mentions-subtitle {
    font-size: .78rem; text-transform: uppercase; letter-spacing: .1em;
    color: var(--gold); font-weight: 600;
    margin-bottom: .5rem; margin-top: .8rem;
  }
  .mentions-text {
    font-size: .9rem; line-height: 1.7;
    color: var(--text); margin-bottom: .6rem;
  }
  .mentions-list {
    list-style: none; display: flex; flex-direction: column; gap: .4rem;
    margin: .5rem 0 .8rem 0;
  }
  .mentions-list li {
    font-size: .875rem; color: var(--text);
    padding-left: 1.2rem; position: relative; line-height: 1.5;
  }
  .mentions-list li::before {
    content: 'â€”'; position: absolute; left: 0;
    color: var(--gold); font-weight: 700;
  }
  .mentions-table {
    width: 100%; border-collapse: collapse; margin-top: .5rem;
    font-size: .875rem;
  }
  .mentions-table tr { border-bottom: 1px solid rgba(0,0,0,.05); }
  .mentions-table tr:last-child { border-bottom: none; }
  .mentions-table td {
    padding: .6rem .8rem; vertical-align: top;
  }
  .mentions-table td:first-child {
    font-weight: 600; color: var(--text-light);
    width: 45%; background: var(--cream); border-radius: 2px;
  }
  .mentions-table td:last-child { color: var(--charcoal); }

  /* â”€â”€â”€ DASHBOARD â”€â”€â”€ */
  .dashboard-overlay {
    position: fixed; inset: 0; z-index: 4000;
    background: rgba(0,0,0,0.55);
    backdrop-filter: blur(6px);
    opacity: 0; pointer-events: none;
    transition: opacity .3s;
    display: flex; justify-content: flex-end;
  }
  .dashboard-overlay.open { opacity: 1; pointer-events: all; }

  .dashboard-panel {
    width: min(520px, 100vw);
    background: var(--cream);
    height: 100%;
    overflow-y: auto;
    display: flex; flex-direction: column;
    transform: translateX(100%);
    transition: transform .35s cubic-bezier(.4,0,.2,1);
    box-shadow: -10px 0 60px rgba(0,0,0,0.15);
  }
  .dashboard-overlay.open .dashboard-panel { transform: translateX(0); }

  .dash-header {
    background: var(--burgundy);
    padding: 2rem 2rem 1.5rem;
    position: relative;
  }
  .dash-close {
    position: absolute; top: 1rem; right: 1rem;
    background: rgba(255,255,255,0.15); border: none;
    width: 32px; height: 32px; border-radius: 50%;
    color: white; font-size: 1rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background .2s;
  }
  .dash-close:hover { background: rgba(255,255,255,0.25); }

  .dash-avatar {
    width: 64px; height: 64px; border-radius: 50%;
    background: var(--gold);
    display: flex; align-items: center; justify-content: center;
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem; font-weight: 700; color: white;
    margin-bottom: 1rem;
    border: 3px solid rgba(255,255,255,0.3);
  }
  .dash-name {
    font-family: 'Playfair Display', serif;
    font-size: 1.3rem; font-weight: 700; color: white;
  }
  .dash-email { font-size: .8rem; color: rgba(255,255,255,0.65); margin-top: .2rem; }

  .dash-tabs {
    display: flex; background: white;
    border-bottom: 1px solid rgba(0,0,0,.07);
    overflow-x: auto;
  }
  .dash-tab {
    flex: 1; min-width: 80px;
    padding: .9rem .5rem;
    background: none; border: none;
    font-family: 'DM Sans', sans-serif;
    font-size: .75rem; font-weight: 600;
    letter-spacing: .05em; text-transform: uppercase;
    color: var(--text-light); cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    transition: all .2s;
    white-space: nowrap;
  }
  .dash-tab.active { color: var(--burgundy); border-bottom-color: var(--burgundy); }

  .dash-body { flex: 1; padding: 1.5rem 2rem; }
  .dash-section { display: none; }
  .dash-section.active { display: block; }

  .dash-section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem; font-weight: 700; color: var(--charcoal);
    margin-bottom: 1.2rem;
    display: flex; align-items: center; gap: .6rem;
  }

  /* Orders */
  .order-card {
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06);
    padding: 1.2rem; margin-bottom: 1rem;
    transition: box-shadow .2s;
  }
  .order-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .order-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: .8rem; }
  .order-id { font-size: .7rem; text-transform: uppercase; letter-spacing: .1em; color: var(--text-light); }
  .order-status {
    font-size: .65rem; font-weight: 700; text-transform: uppercase; letter-spacing: .08em;
    padding: .25rem .7rem; border-radius: 100px;
  }
  .status-confirmed { background: rgba(45,122,58,0.1); color: #2d7a3a; }
  .status-pending   { background: rgba(196,154,60,0.15); color: #7a5c00; }
  .status-delivered { background: rgba(123,28,42,0.1); color: var(--burgundy); }
  .status-cancelled { background: rgba(0,0,0,0.06); color: var(--text-light); }

  .order-menu { font-weight: 600; font-size: .9rem; color: var(--charcoal); margin-bottom: .3rem; }
  .order-meta { font-size: .8rem; color: var(--text-light); display: flex; gap: 1rem; flex-wrap: wrap; }
  .order-footer { display: flex; justify-content: space-between; align-items: center; margin-top: .8rem; padding-top: .8rem; border-top: 1px solid rgba(0,0,0,.05); }
  .order-total { font-family: 'Playfair Display', serif; font-weight: 700; color: var(--burgundy); }
  .btn-order-action {
    font-size: .72rem; font-weight: 500; letter-spacing: .06em; text-transform: uppercase;
    padding: .35rem .9rem; border-radius: 2px; cursor: pointer;
    border: 1.5px solid rgba(123,28,42,0.25); background: none; color: var(--burgundy);
    transition: all .15s;
  }
  .btn-order-action:hover { background: var(--burgundy); color: white; }

  /* Profile form */
  .profile-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
  .profile-full { grid-column: 1/-1; }
  .dash-save-btn {
    width: 100%; padding: .9rem;
    background: var(--burgundy); color: white; border: none;
    font-family: 'DM Sans', sans-serif;
    font-size: .85rem; font-weight: 500; letter-spacing: .1em; text-transform: uppercase;
    border-radius: 2px; cursor: pointer; margin-top: .5rem;
    transition: background .2s;
  }
  .dash-save-btn:hover { background: var(--burgundy-dark); }

  /* Addresses */
  .address-card {
    background: white; border-radius: 4px;
    border: 1px solid rgba(0,0,0,.06);
    padding: 1.2rem; margin-bottom: 1rem;
    display: flex; justify-content: space-between; align-items: flex-start;
    gap: 1rem;
    transition: box-shadow .2s;
  }
  .address-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
  .address-badge {
    font-size: .65rem; text-transform: uppercase; letter-spacing: .08em;
    padding: .2rem .6rem; border-radius: 100px;
    background: rgba(196,154,60,0.15); color: #7a5c00;
    font-weight: 700; margin-bottom: .4rem; display: inline-block;
  }
  .address-text { font-size: .875rem; color: var(--text); line-height: 1.5; }
  .address-actions { display: flex; flex-direction: column; gap: .4rem; flex-shrink: 0; }
  .btn-icon {
    background: none; border: 1px solid rgba(0,0,0,.1); border-radius: 2px;
    font-size: .8rem; padding: .3rem .7rem; cursor: pointer; color: var(--text-light);
    transition: all .15s; white-space: nowrap;
  }
  .btn-icon:hover { border-color: var(--burgundy); color: var(--burgundy); }
  .btn-icon.danger:hover { border-color: #e53935; color: #e53935; }
  .btn-add-address {
    width: 100%; padding: .8rem; margin-top: .5rem;
    background: none; border: 1.5px dashed rgba(123,28,42,0.25); border-radius: 4px;
    color: var(--burgundy); font-size: .85rem; font-weight: 500;
    cursor: pointer; transition: all .2s;
  }
  .btn-add-address:hover { background: rgba(123,28,42,0.04); border-style: solid; }

  /* Security */
  .security-item {
    background: white; border-radius: 4px; border: 1px solid rgba(0,0,0,.06);
    padding: 1.2rem; margin-bottom: 1rem;
  }
  .security-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: .3rem; }
  .security-item-title { font-weight: 600; font-size: .9rem; }
  .security-item-desc { font-size: .8rem; color: var(--text-light); }

  /* Preferences */
  .pref-toggle {
    display: flex; justify-content: space-between; align-items: center;
    background: white; border-radius: 4px; border: 1px solid rgba(0,0,0,.06);
    padding: 1rem 1.2rem; margin-bottom: .8rem;
  }
  .pref-toggle-info h4 { font-size: .875rem; font-weight: 600; margin-bottom: .2rem; }
  .pref-toggle-info p { font-size: .78rem; color: var(--text-light); }
  .toggle-switch {
    position: relative; width: 44px; height: 24px; flex-shrink: 0;
  }
  .toggle-switch input { opacity: 0; width: 0; height: 0; }
  .toggle-slider {
    position: absolute; inset: 0; border-radius: 100px;
    background: #ddd; cursor: pointer; transition: background .2s;
  }
  .toggle-slider::before {
    content: ''; position: absolute;
    width: 18px; height: 18px; border-radius: 50%;
    background: white; left: 3px; top: 3px;
    transition: transform .2s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
  }
  .toggle-switch input:checked + .toggle-slider { background: var(--burgundy); }
  .toggle-switch input:checked + .toggle-slider::before { transform: translateX(20px); }

  /* Empty state */
  .dash-empty {
    text-align: center; padding: 3rem 1rem; color: var(--text-light);
  }
  .dash-empty .icon { font-size: 2.5rem; margin-bottom: .8rem; }
  .dash-empty p { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; }

  /* Logout btn */
  .btn-logout {
    width: 100%; padding: .8rem;
    background: none; border: 1.5px solid rgba(123,28,42,0.2);
    color: var(--burgundy); border-radius: 2px;
    font-family: 'DM Sans', sans-serif;
    font-size: .8rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase;
    cursor: pointer; margin-top: 1rem;
    transition: all .2s;
  }
  .btn-logout:hover { background: var(--burgundy); color: white; }


    text-align: center; padding: 2rem;
  }
  .confirmed-msg .icon { font-size: 3rem; margin-bottom: 1rem; }
  .confirmed-msg h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem; color: var(--charcoal); margin-bottom: .5rem;
  }
  .confirmed-msg p { color: var(--text-light); line-height: 1.6; }
</style>
</head>
<body>

<!-- NAV -->
<nav id="navbar">
  <a class="nav-brand" href="#hero">Vite <span>&</span> Gourmand</a>
  <ul class="nav-links">
    <li><a href="#hero">Accueil</a></li>
    <li><a href="#menus">Menus</a></li>
    <li><a href="#about">Ã€ propos</a></li>
    <li><a href="#reviews">Avis</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  <div class="nav-actions">
    <button class="btn-nav btn-outline" id="navConnexion" onclick="showLogin('login')">Connexion</button>
    <button class="btn-nav btn-solid" id="navInscrire" onclick="showLogin('register')">S'inscrire</button>
    <button class="btn-nav btn-solid" id="navUser" style="display:none;gap:.4rem;align-items:center" onclick="openDashboard()">ðŸ‘¤ <span id="navUserName"></span></button>
    <button class="btn-nav btn-solid" id="navEmployee" style="display:none;gap:.4rem;align-items:center;background:var(--charcoal)" onclick="openEmpPanel()">âš™ï¸ Gestion</button>
    <button class="btn-nav btn-solid" id="navAdmin" style="display:none;gap:.4rem;align-items:center;background:var(--gold);color:var(--charcoal);font-weight:700" onclick="openAdmPanel()">ðŸ‘‘ Admin</button>
    <button class="cart-btn" onclick="toggleCart()">
      <svg viewBox="0 0 24 24" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg>
      <span class="cart-count" id="cartCount">0</span>
    </button>
  </div>
</nav>

<!-- HERO -->
<section id="hero">
  <div class="hero-bg"></div>
  <div class="hero-ornament"></div>
  <div class="hero-content">
    <div class="hero-badge">Traiteur gastronomique Â· Bordeaux</div>
    <h1 class="hero-title">Cuisine maison,<em>pour toutes vos occasions.</em></h1>
    <p class="hero-sub">Julie & JosÃ©, 25 ans de savoir-faire traiteur Ã  Bordeaux. Nous allions authenticitÃ© des recettes du terroir et crÃ©ativitÃ© pour sublimer vos Ã©vÃ©nements.</p>
    <div class="hero-ctas">
      <button class="btn-primary" onclick="document.getElementById('menus').scrollIntoView({behavior:'smooth'})">
        ðŸ½ DÃ©couvrir nos menus
      </button>
      <button class="btn-secondary" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">
        Nous contacter â†’
      </button>
    </div>
  </div>
  <div class="hero-image">
    <div class="hero-img-frame">
      <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800&q=80" alt="Cuisine gastronomique">
    </div>
    <div class="hero-stats">
      <div class="stat"><span class="stat-num">25+</span><div class="stat-label">AnnÃ©es</div></div>
      <div class="stat"><span class="stat-num">500+</span><div class="stat-label">Ã‰vÃ©nements</div></div>
      <div class="stat"><span class="stat-num">98%</span><div class="stat-label">Satisfaits</div></div>
      <div class="stat"><span class="stat-num">24h</span><div class="stat-label">DÃ©lai</div></div>
    </div>
  </div>
</section>

<!-- STATS BAR -->
<div class="stats-bar">
  <div class="stat-item"><div class="num">25+</div><div class="lbl">AnnÃ©es d'expÃ©rience</div></div>
  <div class="stat-item"><div class="num">500+</div><div class="lbl">Ã‰vÃ©nements rÃ©alisÃ©s</div></div>
  <div class="stat-item"><div class="num">98%</div><div class="lbl">Utilisateurs satisfaits</div></div>
  <div class="stat-item"><div class="num">24h</div><div class="lbl">DÃ©lai de commande</div></div>
</div>

<!-- MENUS -->
<section id="menus">
  <div class="menus-header">
    <div class="section-label">Notre carte</div>
    <h2 class="section-title">Nos <em>Menus</em></h2>
    <p class="section-desc" style="margin-top:.8rem">Des compositions pensÃ©es pour chaque occasion, de l'intime au grandiose.</p>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label>Type de menu</label>
      <select id="filterType" onchange="filterMenus()">
        <option value="">Tous les rÃ©gimes</option>
        <option value="classique">Classique</option>
        <option value="vegan">Vegan</option>
        <option value="vegetarien">VÃ©gÃ©tarien</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Nombre de personnes</label>
      <select id="filterPersons" onchange="filterMenus()">
        <option value="">Tous les nombres</option>
        <option value="2">2+</option>
        <option value="4">4+</option>
        <option value="6">6+</option>
        <option value="8">8+</option>
        <option value="10">10+</option>
        <option value="15">15+</option>
      </select>
    </div>
    <div class="filter-group">
      <label>ThÃ¨me</label>
      <select id="filterTheme" onchange="filterMenus()">
        <option value="">Tous les thÃ¨mes</option>
        <option value="NoÃ«l">NoÃ«l</option>
        <option value="PÃ¢ques">PÃ¢ques</option>
        <option value="Cocktail">Cocktail</option>
        <option value="Buffet">Buffet</option>
        <option value="Gastronomique">Gastronomique</option>
        <option value="Terroir">Terroir</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Prix min (â‚¬/pers.)</label>
      <input type="number" id="filterPriceMin" placeholder="Ex: 20" oninput="filterMenus()">
    </div>
    <div class="filter-group">
      <label>Prix max (â‚¬/pers.)</label>
      <input type="number" id="filterPriceMax" placeholder="Ex: 65" oninput="filterMenus()">
    </div>
    <button class="btn-reset" onclick="resetFilters()">âŸ³ RÃ©initialiser</button>
  </div>

  <div class="menus-grid" id="menusGrid"></div>
</section>

<!-- ABOUT -->
<section id="about">
  <div class="about-images">
    <div class="about-img1">
      <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=700&q=80" alt="Cuisine">
    </div>
    <div class="about-img2">
      <img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=500&q=80" alt="Chef">
    </div>
  </div>
  <div class="about-content">
    <div class="section-label">Notre histoire</div>
    <h2 class="section-title">Julie & JosÃ©,<em>25 ans de passion</em></h2>
    <p class="about-text">Depuis 1999, nous mettons notre passion pour la cuisine du terroir au service de vos Ã©vÃ©nements les plus prÃ©cieux. InstallÃ©s au cÅ“ur de Bordeaux, nous sÃ©lectionnons les meilleurs producteurs locaux pour vous offrir une expÃ©rience culinaire authentique et mÃ©morable.</p>
    <div class="about-features">
      <div class="feature-item">
        <div class="feature-icon">ðŸŒ¿</div>
        <div class="feature-text">
          <h4>Produits frais & locaux</h4>
          <p>SÃ©lection rigoureuse auprÃ¨s de producteurs girondins de confiance.</p>
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ðŸ‘¨â€ðŸ³</div>
        <div class="feature-text">
          <h4>Cuisine maison</h4>
          <p>Toutes nos recettes sont prÃ©parÃ©es le jour mÃªme dans notre atelier.</p>
        </div>
      </div>
      <div class="feature-item">
        <div class="feature-icon">ðŸšš</div>
        <div class="feature-text">
          <h4>Livraison & installation</h4>
          <p>Nous livrons et installons vos buffets dans toute la Gironde.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- REVIEWS -->
<section id="reviews">
  <div style="max-width:600px">
    <div class="section-label">TÃ©moignages</div>
    <h2 class="section-title">Ils nous ont <em>fait confiance</em></h2>
  </div>
  <div class="reviews-grid" id="reviewsGrid"></div>
</section>

<!-- CONTACT -->
<section id="contact">
  <div style="max-width:600px; margin-bottom:3rem">
    <div class="section-label">Nous joindre</div>
    <h2 class="section-title">Demande de <em>devis</em></h2>
    <p class="section-desc" style="margin-top:.8rem">Parlez-nous de votre projet et nous vous rÃ©pondrons dans les 24 heures.</p>
  </div>
  <div class="contact-grid">
    <div class="contact-info">
      <div class="contact-item">
        <div class="contact-icon">ðŸ“</div>
        <div class="contact-detail">
          <h4>Notre adresse</h4>
          <p>12 Rue de la Brasserie<br>33000 Bordeaux, Gironde</p>
        </div>
      </div>
      <div class="contact-item">
        <div class="contact-icon">ðŸ•</div>
        <div class="contact-detail">
          <h4>Horaires d'ouverture</h4>
          <p>Lunâ€“Ven : 09h00â€“18h00<br>Samedi : 10h00â€“16h00<br>Dimanche : FermÃ©</p>
        </div>
      </div>
      <div class="contact-item">
        <div class="contact-icon">ðŸ“ž</div>
        <div class="contact-detail">
          <h4>TÃ©lÃ©phone</h4>
          <p>+33 5 56 00 12 34</p>
        </div>
      </div>
      <div class="contact-item">
        <div class="contact-icon">âœ‰ï¸</div>
        <div class="contact-detail">
          <h4>Email</h4>
          <p><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="781b17160c191b0c380e110c1d551d0c551f170d0a1519161c561e0a">[contact@vite-et-gourmand.fr&#160;]</a></p>
        </div>
      </div>
    </div>
    <form class="contact-form" onsubmit="submitContact(event)">
      <div class="form-row">
        <div class="form-group"><label>PrÃ©nom</label><input type="text" placeholder="Julie" required></div>
        <div class="form-group"><label>Nom</label><input type="text" placeholder="Dupont" required></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Email</label><input type="email" placeholder="julie@email.fr" required></div>
        <div class="form-group"><label>TÃ©lÃ©phone</label><input type="tel" placeholder="06 00 00 00 00"></div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Type d'Ã©vÃ©nement</label>
          <select>
            <option>Mariage</option><option>Anniversaire</option>
            <option>SÃ©minaire</option><option>Cocktail</option>
            <option>Autre</option>
          </select>
        </div>
        <div class="form-group"><label>Nombre de personnes</label><input type="number" placeholder="50"></div>
      </div>
      <div class="form-group"><label>Date souhaitÃ©e</label><input type="date"></div>
      <div class="form-group"><label>Message</label><textarea placeholder="DÃ©crivez votre Ã©vÃ©nement..."></textarea></div>
      <button type="submit" class="btn-primary" style="align-self:flex-start; padding:.9rem 2.5rem">Envoyer ma demande â†’</button>
    </form>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div>
      <div class="footer-brand">Vite <span>&</span> Gourmand</div>
      <p class="footer-desc">Traiteur gastronomique Ã  Bordeaux depuis 1999. Julie & JosÃ©, une passion partagÃ©e pour la cuisine du terroir.</p>
    </div>
    <div class="footer-col">
      <h5>Navigation</h5>
      <ul>
        <li><a href="#hero">Accueil</a></li>
        <li><a href="#menus">Nos menus</a></li>
        <li><a href="#about">Ã€ propos</a></li>
        <li><a href="#reviews">Avis clients</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h5>Horaires</h5>
      <div class="footer-hours">
        Lunâ€“Ven : 09h00â€“18h00<br>
        Samedi : 10h00â€“16h00<br>
        Dimanche : FermÃ©
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Â© 2026 Vite &amp; Gourmand. Tous droits rÃ©servÃ©s.</span>
    <span>
      <a href="#" onclick="openMentions(event)">Mentions lÃ©gales</a> Â· <a href="#" onclick="openCGV(event)">CGV</a> Â· <a href="#">Politique de confidentialitÃ©</a>
    </span>
  </div>
</footer>

<!-- CGV MODAL -->
<div class="modal-overlay" id="cgvOverlay" onclick="closeCGVOutside(event)" style="align-items:flex-start;padding-top:4rem;overflow-y:auto">
  <div class="modal" style="max-width:780px">
    <div style="padding:2.5rem 3rem">
      <div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:2rem;padding-bottom:1.2rem;border-bottom:1px solid rgba(0,0,0,.08)">
        <div>
          <div style="font-size:.7rem;text-transform:uppercase;letter-spacing:.2em;color:var(--gold);margin-bottom:.4rem">Contractuel</div>
          <h2 style="font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:700;color:var(--charcoal)">Conditions GÃ©nÃ©rales de Vente</h2>
          <p style="font-size:.8rem;color:var(--text-light);margin-top:.3rem">DerniÃ¨re mise Ã  jour : 03/01/2026</p>
        </div>
        <button class="modal-close" onclick="closeCGV()">âœ•</button>
      </div>

      <div style="background:rgba(123,28,42,0.06);border-left:3px solid var(--burgundy);padding:1rem 1.2rem;border-radius:0 4px 4px 0;margin-bottom:2rem">
        <p style="font-size:.875rem;color:var(--burgundy);font-weight:500">âš ï¸ En passant commande sur notre site, vous acceptez sans rÃ©serve les prÃ©sentes Conditions GÃ©nÃ©rales de Vente.</p>
      </div>

      <!-- IdentitÃ© -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ¢ IdentitÃ© du Prestataire</h3>
        <table class="mentions-table">
          <tr><td>SociÃ©tÃ©</td><td>Vite &amp; Gourmand</td></tr>
          <tr><td>Forme juridique</td><td>SAS (SociÃ©tÃ© par Actions SimplifiÃ©e)</td></tr>
          <tr><td>Capital social</td><td>15 000 â‚¬</td></tr>
          <tr><td>SIRET</td><td>156 456 789 00012</td></tr>
          <tr><td>TVA intracommunautaire</td><td>FR 12 156456789</td></tr>
          <tr><td>Adresse</td><td>12 Rue de la Brasserie, 33000 Bordeaux, France</td></tr>
          <tr><td>Email</td><td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="31525e5f4550524571475845541c54451c565e44435c505f551f5743">[contact@vite-et-gourmand.fr&#160;]</a></td></tr>
          <tr><td>TÃ©lÃ©phone</td><td>+33 5 56 00 12 34</td></tr>
        </table>
      </div>

      <!-- Art. 1 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ“œ Article 1 â€“ Objet</h3>
        <p class="mentions-text">Les prÃ©sentes Conditions GÃ©nÃ©rales de Vente (CGV) rÃ©gissent les relations contractuelles entre Vite &amp; Gourmand, ci-aprÃ¨s dÃ©nommÃ©e "le Prestataire", et toute personne physique ou morale, ci-aprÃ¨s dÃ©nommÃ©e "l'Utilisateur", souhaitant effectuer une commande de prestation traiteur via le site internet.</p>
      </div>

      <!-- Art. 2 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ½ï¸ Article 2 â€“ Prestations proposÃ©es</h3>
        <p class="mentions-text">Vite &amp; Gourmand propose des prestations de traiteur comprenant :</p>
        <ul class="mentions-list">
          <li>La prÃ©paration de menus pour Ã©vÃ©nements (repas de fÃªtes, Ã©vÃ©nements professionnels, etc.)</li>
          <li>La livraison des plats commandÃ©s</li>
          <li>Le prÃªt de matÃ©riel (selon disponibilitÃ©)</li>
        </ul>
        <p class="mentions-text">Les menus proposÃ©s sont dÃ©crits avec prÃ©cision sur le site. Les photos et descriptions sont fournies Ã  titre indicatif.</p>
      </div>

      <!-- Art. 3 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ“ Article 3 â€“ Commandes</h3>

        <p class="mentions-subtitle">3.1. Passation de commande</p>
        <p class="mentions-text">Pour passer commande, l'utilisateur doit :</p>
        <ul class="mentions-list">
          <li>CrÃ©er un compte utilisateur sur le site</li>
          <li>SÃ©lectionner le menu souhaitÃ©</li>
          <li>Indiquer le nombre de personnes (minimum selon le menu choisi)</li>
          <li>PrÃ©ciser la date et l'heure de prestation souhaitÃ©es</li>
          <li>Renseigner l'adresse de livraison</li>
          <li>Valider la commande</li>
        </ul>

        <p class="mentions-subtitle">3.2. DÃ©lai de commande</p>
        <p class="mentions-text">Les commandes doivent Ãªtre passÃ©es au minimum <strong>7 jours ouvrÃ©s</strong> avant la date de prestation souhaitÃ©e. Certains menus peuvent nÃ©cessiter un dÃ©lai plus long (indiquÃ© dans les conditions du menu).</p>

        <p class="mentions-subtitle">3.3. Confirmation de commande</p>
        <p class="mentions-text">Une fois la commande passÃ©e, l'utilisateur reÃ§oit un email de confirmation automatique. La commande n'est dÃ©finitive qu'aprÃ¨s acceptation par Vite &amp; Gourmand (statut "acceptÃ©e").</p>

        <p class="mentions-subtitle">3.4. Modification de commande</p>
        <p class="mentions-text">L'utilisateur peut modifier sa commande tant qu'elle n'a pas Ã©tÃ© acceptÃ©e par le prestataire. Une fois acceptÃ©e, toute modification doit faire l'objet d'une demande par email Ã  <strong><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="45262a2b3124263105332c312068203168222a303728242b216b2337">[contact@vite-et-gourmand.fr&#160;]</a></strong> et sera soumise Ã  l'accord du prestataire.</p>

        <p class="mentions-subtitle">3.5. Annulation de commande</p>
        <p class="mentions-text">L'utilisateur peut annuler sa commande :</p>
        <ul class="mentions-list">
          <li><strong>Gratuitement :</strong> jusqu'Ã  48h aprÃ¨s la passation de commande (si la commande n'a pas encore Ã©tÃ© acceptÃ©e)</li>
          <li><strong>Avec frais :</strong> aprÃ¨s acceptation, sous rÃ©serve de contacter le prestataire. Des frais d'annulation de 30% du montant total peuvent s'appliquer.</li>
        </ul>
      </div>

      <!-- Art. 4 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ’¶ Article 4 â€“ Prix et Paiement</h3>

        <p class="mentions-subtitle">4.1. Prix</p>
        <p class="mentions-text">Les prix sont indiquÃ©s en euros (â‚¬) TTC (Toutes Taxes Comprises) et incluent la TVA au taux en vigueur. Le prix comprend : le prix du menu par personne Ã— nombre de personnes, les frais de livraison et la TVA.</p>

        <p class="mentions-subtitle">4.2. RÃ©duction</p>
        <p class="mentions-text">Une rÃ©duction de <strong>10%</strong> est automatiquement appliquÃ©e pour toute commande comportant 5 personnes de plus que le nombre minimum indiquÃ© dans le menu.</p>

        <p class="mentions-subtitle">4.3. ModalitÃ©s de paiement</p>
        <ul class="mentions-list">
          <li>Par carte bancaire (Visa, Mastercard)</li>
          <li>Par virement bancaire (pour les commandes professionnelles)</li>
        </ul>
        <p class="mentions-text">Un acompte de <strong>30%</strong> est demandÃ© lors de la commande. Le solde est Ã  rÃ©gler <strong>48h avant</strong> la prestation.</p>

        <p class="mentions-subtitle">4.4. PÃ©nalitÃ©s de retard</p>
        <div style="background:rgba(123,28,42,0.05);border-left:3px solid var(--burgundy);padding:1rem 1.2rem;border-radius:0 4px 4px 0;margin:.5rem 0">
          <p style="font-size:.85rem;color:var(--text);line-height:1.6">âš ï¸ ConformÃ©ment aux dispositions lÃ©gales, tout retard de paiement entraÃ®nera de plein droit et sans mise en demeure prÃ©alable :</p>
          <ul class="mentions-list" style="margin-top:.5rem">
            <li>L'application de pÃ©nalitÃ©s de retard calculÃ©es au taux directeur de la BCE majorÃ© de 10 points</li>
            <li>Le paiement d'une indemnitÃ© forfaitaire de <strong>40 â‚¬</strong> pour frais de recouvrement</li>
            <li>Si les frais de recouvrement sont supÃ©rieurs Ã  40 â‚¬, une indemnisation complÃ©mentaire pourra Ãªtre demandÃ©e</li>
          </ul>
        </div>
      </div>

      <!-- Art. 5 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸšš Article 5 â€“ Livraison</h3>

        <p class="mentions-subtitle">5.1. Zone de livraison</p>
        <p class="mentions-text">Vite &amp; Gourmand livre dans un rayon de <strong>50 km</strong> autour de Bordeaux.</p>

        <p class="mentions-subtitle">5.2. Frais de livraison</p>
        <table class="mentions-table">
          <tr><td>Ã€ Bordeaux</td><td><strong>5,00 â‚¬</strong> forfaitaire</td></tr>
          <tr><td>Hors Bordeaux</td><td><strong>5,00 â‚¬</strong> + <strong>0,59 â‚¬</strong> par kilomÃ¨tre parcouru</td></tr>
        </table>

        <p class="mentions-subtitle">5.3. Horaires de livraison</p>
        <p class="mentions-text">Les livraisons sont effectuÃ©es du <strong>lundi au dimanche</strong>, de <strong>10h Ã  22h</strong>.</p>

        <p class="mentions-subtitle">5.4. Force majeure</p>
        <p class="mentions-text">Le prestataire ne saurait Ãªtre tenu pour responsable en cas de retard rÃ©sultant d'un Ã©vÃ©nement de force majeure (conditions mÃ©tÃ©orologiques exceptionnelles, grÃ¨ve, catastrophe naturelle, etc.).</p>
      </div>

      <!-- Art. 6 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ½ï¸ Article 6 â€“ PrÃªt de matÃ©riel</h3>

        <p class="mentions-subtitle">6.1. Conditions de prÃªt</p>
        <p class="mentions-text">Sur demande et selon disponibilitÃ©, Vite &amp; Gourmand peut prÃªter du matÃ©riel (vaisselle, couverts, plateaux, etc.).</p>

        <p class="mentions-subtitle">6.2. Restitution du matÃ©riel</p>
        <p class="mentions-text">Le matÃ©riel doit Ãªtre restituÃ© dans un dÃ©lai de <strong>10 jours ouvrÃ©s</strong> suivant la livraison.</p>

        <p class="mentions-subtitle">6.3. Non-restitution</p>
        <div style="background:rgba(123,28,42,0.05);border-left:3px solid var(--burgundy);padding:1rem 1.2rem;border-radius:0 4px 4px 0;margin:.5rem 0">
          <p style="font-size:.875rem;color:var(--burgundy);font-weight:500">âš ï¸ En cas de non-restitution dans les 10 jours ouvrÃ©s, des frais de <strong>600,00 â‚¬</strong> seront automatiquement facturÃ©s pour compenser le coÃ»t du matÃ©riel non restituÃ©.</p>
        </div>
      </div>

      <!-- Art. 7 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">âš ï¸ Article 7 â€“ AllergÃ¨nes et RÃ©gimes alimentaires</h3>
        <p class="mentions-text">Les informations sur les allergÃ¨nes sont fournies Ã  titre indicatif. Il est de la responsabilitÃ© de l'utilisateur de vÃ©rifier ces informations et de nous informer de toute allergie avant de passer commande.</p>
      </div>

      <!-- Art. 10 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸš« Article 10 â€“ Droit de rÃ©tractation</h3>
        <p class="mentions-text"><strong>Base lÃ©gale :</strong> ConformÃ©ment Ã  l'article L221-28 du Code de la consommation, le droit de rÃ©tractation de 14 jours ne s'applique pas aux contrats de restauration avec une date de prestation dÃ©terminÃ©e.</p>
        <div style="background:rgba(123,28,42,0.05);border-left:3px solid var(--burgundy);padding:1rem 1.2rem;border-radius:0 4px 4px 0;margin:.5rem 0">
          <p style="font-size:.875rem;color:var(--burgundy);font-weight:500">Aucun droit de rÃ©tractation ne peut Ãªtre exercÃ© pour les commandes de prestations traiteur comportant une date de prestation dÃ©terminÃ©e.</p>
        </div>
      </div>

      <!-- Art. 11 -->
      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ”’ Article 11 â€“ Protection des donnÃ©es personnelles (RGPD)</h3>

        <p class="mentions-subtitle">11.1. Responsable du traitement</p>
        <p class="mentions-text">Vite &amp; Gourmand SAS â€” Email : <strong><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a5c6cacbd1c4c6d1e5d3ccd1c088c0d188c2cad0d7c8c4cbc18bc3d7">[contact@vite-et-gourmand.fr&#160;]</a></strong></p>

        <p class="mentions-subtitle">11.2. DonnÃ©es collectÃ©es</p>
        <ul class="mentions-list">
          <li><strong>DonnÃ©es d'identification :</strong> nom, prÃ©nom, email, tÃ©lÃ©phone</li>
          <li><strong>DonnÃ©es de livraison :</strong> adresse, instructions</li>
          <li><strong>DonnÃ©es de commande :</strong> historique, prÃ©fÃ©rences, allergies</li>
          <li><strong>DonnÃ©es de paiement :</strong> informations de facturation</li>
        </ul>

        <p class="mentions-subtitle">11.3. Vos droits</p>
        <ul class="mentions-list">
          <li>Droit d'accÃ¨s Ã  vos donnÃ©es</li>
          <li>Droit de rectification</li>
          <li>Droit Ã  l'effacement</li>
          <li>Droit Ã  la portabilitÃ©</li>
          <li>Droit d'opposition</li>
        </ul>
        <p class="mentions-text">Pour exercer vos droits : <strong><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="6d0e0203190c0e192d1b041908400819400a02181f000c0309430b1f">[contact@vite-et-gourmand.fr&#160;]</a></strong></p>
      </div>

      <!-- Art. 12 -->
      <div class="mentions-section" style="border-bottom:none;margin-bottom:0">
        <h3 class="mentions-h3">âš–ï¸ Article 12 â€“ Litiges</h3>

        <p class="mentions-subtitle">12.1. MÃ©diation</p>
        <p class="mentions-text">En cas de litige, l'utilisateur peut recourir Ã  :</p>
        <div style="background:var(--cream);padding:1rem 1.2rem;border-radius:4px;font-size:.875rem;line-height:1.7">
          <strong>CNPM â€“ MÃ‰DIATION DE LA CONSOMMATION</strong><br>
          23 rue de la Paix â€” 75002 Paris<br>
          Site : www.cnpm-mediation-consommation.eu
        </div>

        <p class="mentions-subtitle" style="margin-top:1.2rem">12.2. Droit applicable</p>
        <p class="mentions-text">Les prÃ©sentes CGV sont soumises au droit franÃ§ais. En cas de litige, les <strong>tribunaux de Bordeaux</strong> seront seuls compÃ©tents.</p>
      </div>

      <div style="margin-top:2rem;text-align:center">
        <button class="btn-primary" onclick="closeCGV()" style="padding:.8rem 2.5rem">Fermer</button>
      </div>
    </div>
  </div>
</div>

<!-- MENTIONS LÃ‰GALES MODAL -->
<div class="modal-overlay" id="mentionsOverlay" onclick="closeMentionsOutside(event)" style="align-items:flex-start;padding-top:4rem;overflow-y:auto">
  <div class="modal" style="max-width:780px">
    <div style="padding:2.5rem 3rem">
      <div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:2rem;padding-bottom:1.2rem;border-bottom:1px solid rgba(0,0,0,.08)">
        <div>
          <div style="font-size:.7rem;text-transform:uppercase;letter-spacing:.2em;color:var(--gold);margin-bottom:.4rem">Informations lÃ©gales</div>
          <h2 style="font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:700;color:var(--charcoal)">Mentions LÃ©gales</h2>
          <p style="font-size:.8rem;color:var(--text-light);margin-top:.3rem">DerniÃ¨re mise Ã  jour : 03/01/2026</p>
        </div>
        <button class="modal-close" onclick="closeMentions()">âœ•</button>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ¢ 1. PrÃ©sentation du site</h3>
        <p class="mentions-subtitle">âœ¨ Nature du site</p>
        <p class="mentions-text">Site de vente en ligne de prestations de traiteur et livraison de repas pour Ã©vÃ©nements privÃ©s et professionnels.</p>
        <p class="mentions-subtitle" style="margin-top:1.2rem">ðŸ“œ Informations lÃ©gales</p>
        <table class="mentions-table">
          <tr><td>Raison sociale</td><td>Vite &amp; Gourmand</td></tr>
          <tr><td>Forme juridique</td><td>SAS (SociÃ©tÃ© par Actions SimplifiÃ©e)</td></tr>
          <tr><td>Capital social</td><td>15 000 â‚¬</td></tr>
          <tr><td>SIRET</td><td>156 456 789 00012</td></tr>
          <tr><td>RCS</td><td>Bordeaux B 156 456 789</td></tr>
          <tr><td>Code APE</td><td>5621Z (Services des traiteurs)</td></tr>
          <tr><td>TVA intracommunautaire</td><td>FR 12 156456789</td></tr>
          <tr><td>SiÃ¨ge social</td><td>12 Rue de la Brasserie, 33000 Bordeaux, France</td></tr>
          <tr><td>TÃ©lÃ©phone</td><td>+33 5 56 00 12 34</td></tr>
          <tr><td>Email</td><td><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aac9c5c4decbc9deeadcc3decf87cfde87cdc5dfd8c7cbc4ce84ccd8">[contact@vite-et-gourmand.fr&#160;]</a></td></tr>
        </table>
        <p class="mentions-subtitle" style="margin-top:1.2rem">ðŸ‘¤ Directeur de publication</p>
        <p class="mentions-text">JosÃ© Lebon, Directeur GÃ©nÃ©ral</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ–¥ï¸ 2. HÃ©bergeur du site</h3>
        <p class="mentions-text"><strong>Nom :</strong> Netlify<br><strong>Site web :</strong> https://app.netlify.com</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">Â© 3. PropriÃ©tÃ© intellectuelle</h3>
        <p class="mentions-text">L'ensemble du contenu de ce site (textes, images, logos, graphismes, vidÃ©os) est la propriÃ©tÃ© exclusive de Vite &amp; Gourmand ou de ses partenaires. Toute reproduction, distribution, modification, adaptation, retransmission ou publication de ces diffÃ©rents Ã©lÃ©ments est strictement interdite sans l'accord Ã©crit prÃ©alable de Vite &amp; Gourmand.</p>
        <p class="mentions-text">Les marques et logos prÃ©sents sur le site sont des marques dÃ©posÃ©es. Toute reproduction totale ou partielle de ces marques sans autorisation expresse est prohibÃ©e.</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ”’ 4. Protection des donnÃ©es personnelles (RGPD)</h3>
        <p class="mentions-subtitle">4.1. Responsable du traitement</p>
        <p class="mentions-text">Le responsable du traitement des donnÃ©es personnelles est Vite &amp; Gourmand, reprÃ©sentÃ©e par JosÃ© LEBON, Directeur GÃ©nÃ©ral. <strong>Contact DPO :</strong> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="dbb8b4b5afbab8af9badb2afbef6beaff6bcb4aea9b6bab5bff5bda9">[contact@vite-et-gourmand.fr&#160;]</a></p>
        <p class="mentions-subtitle">4.2. DonnÃ©es collectÃ©es</p>
        <ul class="mentions-list">
          <li>Nom et prÃ©nom</li><li>Adresse email</li><li>NumÃ©ro de tÃ©lÃ©phone</li>
          <li>Adresse postale</li><li>Informations de commande</li><li>Avis et commentaires</li>
        </ul>
        <p class="mentions-subtitle">4.3. FinalitÃ©s du traitement</p>
        <ul class="mentions-list">
          <li>La gestion des commandes</li>
          <li>La crÃ©ation et la gestion de votre compte utilisateur</li>
          <li>L'envoi de communications relatives Ã  vos commandes</li>
          <li>L'amÃ©lioration de nos services</li>
          <li>Le respect de nos obligations lÃ©gales</li>
        </ul>
        <p class="mentions-subtitle">4.4. DurÃ©e de conservation</p>
        <ul class="mentions-list">
          <li>DonnÃ©es de compte : durÃ©e de la relation commerciale + 3 ans</li>
          <li>DonnÃ©es de commande : 10 ans (obligations comptables et fiscales)</li>
          <li>DonnÃ©es de prospection : 3 ans Ã  compter du dernier contact</li>
        </ul>
        <p class="mentions-subtitle">4.5. Vos droits</p>
        <ul class="mentions-list">
          <li><strong>Droit d'accÃ¨s :</strong> demander une copie de vos donnÃ©es</li>
          <li><strong>Droit de rectification :</strong> corriger vos donnÃ©es inexactes</li>
          <li><strong>Droit Ã  l'effacement :</strong> demander la suppression de vos donnÃ©es</li>
          <li><strong>Droit Ã  la portabilitÃ© :</strong> rÃ©cupÃ©rer vos donnÃ©es dans un format structurÃ©</li>
          <li><strong>Droit d'opposition :</strong> vous opposer au traitement</li>
          <li><strong>Droit Ã  la limitation :</strong> demander la limitation du traitement</li>
        </ul>
        <p class="mentions-text">Pour exercer ces droits : <strong><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="593a36372d383a2d192f302d3c743c2d743e362c2b3438373d773f2b">[contact@vite-et-gourmand.fr&#160;]</a></strong> ou par courrier au siÃ¨ge social. Vous pouvez Ã©galement introduire une rÃ©clamation auprÃ¨s de la CNIL (www.cnil.fr).</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸª 5. Cookies</h3>
        <p class="mentions-text">Le site utilise des cookies pour amÃ©liorer votre expÃ©rience de navigation et assurer le bon fonctionnement du site.</p>
        <p class="mentions-subtitle">Types de cookies utilisÃ©s :</p>
        <ul class="mentions-list">
          <li><strong>Cookies essentiels :</strong> nÃ©cessaires au fonctionnement du site (session, authentification)</li>
          <li><strong>Cookies de performance :</strong> permettent d'amÃ©liorer les fonctionnalitÃ©s du site</li>
        </ul>
        <p class="mentions-text">ConformÃ©ment Ã  la rÃ©glementation RGPD et aux recommandations de la CNIL, un bandeau de consentement permet Ã  l'utilisateur d'accepter ou de refuser les cookies non essentiels lors de sa premiÃ¨re visite.</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ”— 6. Liens hypertextes</h3>
        <p class="mentions-text">Le site peut contenir des liens vers d'autres sites internet. Vite &amp; Gourmand ne saurait Ãªtre tenu responsable du contenu de ces sites externes.</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸ”’ 7. SÃ©curitÃ© et protection des Ã©changes</h3>
        <p class="mentions-text">Le site utilise le protocole HTTPS (SSL/TLS) garantissant la confidentialitÃ©, l'intÃ©gritÃ© et l'authentification des donnÃ©es Ã©changÃ©es. Les donnÃ©es de paiement sont traitÃ©es par des prestataires certifiÃ©s PCI DSS et ne sont jamais stockÃ©es sur nos serveurs.</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">ðŸŽ¨ 8. CrÃ©dits et propriÃ©tÃ© intellectuelle</h3>
        <p class="mentions-text">Site conÃ§u et dÃ©veloppÃ© par l'Ã©quipe Vite &amp; Gourmand.</p>
      </div>

      <div class="mentions-section">
        <h3 class="mentions-h3">âš ï¸ 9. Limitation de responsabilitÃ©</h3>
        <p class="mentions-text">Vite &amp; Gourmand s'efforce d'assurer l'exactitude et la mise Ã  jour des informations diffusÃ©es sur ce site. Toutefois, l'utilisateur reconnaÃ®t utiliser ces informations sous sa responsabilitÃ© exclusive.</p>
      </div>

      <div class="mentions-section" style="border-bottom:none;margin-bottom:0">
        <h3 class="mentions-h3">âš–ï¸ 10. Droit applicable</h3>
        <p class="mentions-text">Les prÃ©sentes mentions lÃ©gales sont rÃ©gies par le droit franÃ§ais. En cas de litige, les tribunaux franÃ§ais seront seuls compÃ©tents.</p>
      </div>

      <div style="margin-top:2rem;text-align:center">
        <button class="btn-primary" onclick="closeMentions()" style="padding:.8rem 2.5rem">Fermer</button>
      </div>
    </div>
  </div>
</div>

<!-- MENU DETAIL MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal" id="modal">
    <div class="modal-img"><img id="modalImg" src="" alt=""></div>
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <div id="modalBadge" class="card-badge" style="margin-bottom:.5rem"></div>
          <h2 class="modal-title" id="modalTitle"></h2>
        </div>
        <button class="modal-close" onclick="closeModalBtn()">âœ•</button>
      </div>
      <p class="modal-desc" id="modalDesc"></p>
      <div class="modal-details" id="modalDetails"></div>
      <div class="modal-order">
        <div class="qty-control">
          <button class="qty-btn" onclick="changeModalQty(-1)">âˆ’</button>
          <span class="qty-num" id="modalQty">1</span>
          <button class="qty-btn" onclick="changeModalQty(1)">+</button>
        </div>
        <span class="modal-price" id="modalPriceDisplay"></span>
        <button class="btn-add-cart" onclick="addFromModal()">Ajouter au panier</button>
      </div>
    </div>
  </div>
</div>

<!-- CART PANEL -->
<div class="cart-overlay" id="cartOverlay" onclick="closeCartOutside(event)">
  <div class="cart-panel">
    <div class="cart-header">
      <h2 class="cart-title">ðŸ› Mon panier</h2>
      <button class="cart-close" onclick="toggleCart()">âœ•</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-footer" id="cartFooter" style="display:none">
      <div class="cart-subtotal">
        <span class="label">Total</span>
        <span class="amount" id="cartTotal">0,00 â‚¬</span>
      </div>
      <button class="btn-checkout" onclick="openCheckout()">Commander maintenant â†’</button>
      <p class="cart-note">Livraison offerte Ã  partir de 150â‚¬ Â· Paiement sÃ©curisÃ©</p>
    </div>
  </div>
</div>

<!-- CHECKOUT MODAL -->
<div class="modal-overlay" id="checkoutOverlay" onclick="closeCheckoutOutside(event)">
  <div class="modal" id="checkoutModal" style="max-width:580px">
    <div class="checkout-form">
      <div class="modal-header" style="margin-bottom:1rem">
        <div>
          <h2 class="checkout-title">Finaliser ma commande</h2>
          <p class="checkout-subtitle">Ã‰tape 1 sur 2 â€” Informations de livraison</p>
        </div>
        <button class="modal-close" onclick="closeCheckout()">âœ•</button>
      </div>
      <div class="step-indicator">
        <div class="step active"><div class="step-num">1</div><span style="font-size:.8rem;color:var(--burgundy);font-weight:600">Livraison</span></div>
        <div class="step-divider"></div>
        <div class="step" id="step2"><div class="step-num">2</div><span style="font-size:.8rem;color:var(--text-light)">Paiement</span></div>
      </div>
      <div id="checkoutStep1">
        <div style="display:flex;flex-direction:column;gap:1rem">
          <div class="form-row">
            <div class="form-group"><label>PrÃ©nom</label><input type="text" id="co_prenom" placeholder="Julie" required></div>
            <div class="form-group"><label>Nom</label><input type="text" id="co_nom" placeholder="Dupont" required></div>
          </div>
          <div class="form-group"><label>Email</label><input type="email" id="co_email" placeholder="julie@email.fr" required></div>
          <div class="form-group"><label>TÃ©lÃ©phone</label><input type="tel" id="co_tel" placeholder="06 00 00 00 00"></div>
          <div class="form-group"><label>Adresse de livraison</label><input type="text" id="co_addr" placeholder="12 rue des Fleurs, 33000 Bordeaux"></div>
          <div class="form-group"><label>Date de l'Ã©vÃ©nement</label><input type="date" id="co_date"></div>
          <div class="form-group"><label>Heure souhaitÃ©e</label><input type="time" id="co_heure" value="12:00"></div>
          <div class="form-group"><label>Notes (optionnel)</label><textarea placeholder="Allergies, instructions particuliÃ¨res..."></textarea></div>
          <button class="btn-primary" style="align-self:flex-start;padding:.9rem 2.5rem" onclick="goToPayment()">Continuer â†’ Paiement</button>
        </div>
      </div>
      <div id="checkoutStep2" style="display:none">
        <div style="display:flex;flex-direction:column;gap:1rem">
          <div class="form-group"><label>NumÃ©ro de carte</label><input type="text" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCard(this)"></div>
          <div class="form-row">
            <div class="form-group"><label>Expiration</label><input type="text" placeholder="MM/AA" maxlength="5" oninput="formatExpiry(this)"></div>
            <div class="form-group"><label>CVV</label><input type="text" placeholder="123" maxlength="3"></div>
          </div>
          <div class="form-group"><label>Nom sur la carte</label><input type="text" placeholder="Julie Dupont"></div>
          <div style="background:var(--cream);padding:1.2rem;border-radius:4px;margin:1rem 0">
            <div style="display:flex;justify-content:space-between;font-size:.9rem;margin-bottom:.5rem">
              <span>Sous-total</span><span id="co_subtotal" style="font-weight:600"></span>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:.9rem;margin-bottom:.5rem">
              <span>Livraison</span><span style="font-weight:600;color:#2d7a3a">Gratuite</span>
            </div>
            <div style="display:flex;justify-content:space-between;font-size:1.1rem;font-weight:700;border-top:1px solid rgba(0,0,0,.1);padding-top:.7rem">
              <span>Total</span><span style="color:var(--burgundy)" id="co_total"></span>
            </div>
          </div>
          <button class="btn-primary" style="padding:1rem;text-align:center;width:100%" onclick="confirmOrder()">âœ“ Confirmer et payer</button>
          <button onclick="backToDelivery()" style="background:none;border:none;color:var(--text-light);cursor:pointer;font-size:.85rem;text-align:center">â† Retour Ã  la livraison</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ORDER EDIT MODAL -->
<div class="uo-modal-overlay" id="uoEditOverlay" onclick="if(event.target===this)closeUoEdit()">
  <div class="uo-modal">
    <div class="uo-modal-header">
      <div class="uo-modal-title">âœï¸ Modifier la commande</div>
      <button class="uo-modal-close" onclick="closeUoEdit()">âœ•</button>
    </div>
    <div class="uo-modal-body">
      <p style="font-size:.8rem;color:var(--text-light);margin-bottom:1.2rem">Tous les champs sont modifiables, sauf le menu.</p>
      <input type="hidden" id="uoEditId">
      <div class="profile-grid">
        <div class="form-group">
          <label>Menu (non modifiable)</label>
          <input type="text" id="uoEditMenu" disabled style="background:var(--cream);color:var(--text-light)">
        </div>
        <div class="form-group">
          <label>Nombre de personnes</label>
          <input type="number" id="uoEditPersons" min="1" max="500">
        </div>
        <div class="form-group">
          <label>Date de l'Ã©vÃ©nement</label>
          <input type="date" id="uoEditEvent">
        </div>
        <div class="form-group">
          <label>Lieu de l'Ã©vÃ©nement</label>
          <input type="text" id="uoEditVenue" placeholder="Adresse de l'Ã©vÃ©nement">
        </div>
        <div class="form-group profile-full">
          <label>Allergies / Notes</label>
          <textarea id="uoEditNotes" placeholder="PrÃ©cisions allergies, optionsâ€¦" style="min-height:70px;resize:vertical"></textarea>
        </div>
      </div>
    </div>
    <div class="uo-modal-footer">
      <button class="uo-btn" onclick="closeUoEdit()">Annuler</button>
      <button class="dash-save-btn" style="margin-top:0" onclick="saveUoEdit()">âœ“ Enregistrer</button>
    </div>
  </div>
</div>

<!-- ORDER REVIEW MODAL -->
<div class="uo-modal-overlay" id="uoReviewOverlay" onclick="if(event.target===this)closeUoReview()">
  <div class="uo-modal">
    <div class="uo-modal-header">
      <div class="uo-modal-title">â­ Donner mon avis</div>
      <button class="uo-modal-close" onclick="closeUoReview()">âœ•</button>
    </div>
    <div class="uo-modal-body">
      <input type="hidden" id="uoReviewId">
      <div id="uoReviewExisting" style="display:none;background:var(--cream);border-radius:4px;padding:1rem;margin-bottom:1rem;font-size:.85rem"></div>
      <div class="form-group" style="margin-bottom:1.2rem">
        <label style="margin-bottom:.6rem;display:block">Note (1â€“5 Ã©toiles)</label>
        <div class="star-rating" id="uoStarRating">
          <span class="star" data-v="1" onclick="selectStar(1)">â˜…</span>
          <span class="star" data-v="2" onclick="selectStar(2)">â˜…</span>
          <span class="star" data-v="3" onclick="selectStar(3)">â˜…</span>
          <span class="star" data-v="4" onclick="selectStar(4)">â˜…</span>
          <span class="star" data-v="5" onclick="selectStar(5)">â˜…</span>
        </div>
      </div>
      <div class="form-group">
        <label>Commentaire</label>
        <textarea id="uoReviewComment" placeholder="Partagez votre expÃ©rienceâ€¦" style="min-height:90px;resize:vertical"></textarea>
      </div>
    </div>
    <div class="uo-modal-footer">
      <button class="uo-btn" onclick="closeUoReview()">Annuler</button>
      <button class="dash-save-btn" style="margin-top:0" onclick="saveUoReview()">âœ“ Envoyer mon avis</button>
    </div>
  </div>
</div>

<!-- DASHBOARD -->
<div class="dashboard-overlay" id="dashOverlay" onclick="closeDashOutside(event)">
  <div class="dashboard-panel">

    <!-- Header -->
    <div class="dash-header">
      <button class="dash-close" onclick="closeDashboard()">âœ•</button>
      <div class="dash-avatar" id="dashAvatar"></div>
      <div class="dash-name" id="dashName">Mon compte</div>
      <div class="dash-email" id="dashEmail"></div>
    </div>

    <!-- Tabs -->
    <div class="dash-tabs">
      <button class="dash-tab active" onclick="switchDashTab('orders', this)">ðŸ“¦ Commandes</button>
      <button class="dash-tab" onclick="switchDashTab('profile', this)">ðŸ‘¤ Profil</button>
      <button class="dash-tab" onclick="switchDashTab('addresses', this)">ðŸ“ Adresses</button>
      <button class="dash-tab" onclick="switchDashTab('security', this)">ðŸ”’ SÃ©curitÃ©</button>
      <button class="dash-tab" onclick="switchDashTab('prefs', this)">âš™ï¸ PrÃ©fÃ©rences</button>
    </div>

    <!-- Body -->
    <div class="dash-body">

      <!-- â”€ COMMANDES â”€ -->
      <div class="dash-section active" id="dash-orders">
        <div class="dash-section-title">ðŸ“¦ Mes commandes</div>
        <div id="ordersList"></div>
      </div>

      <!-- â”€ PROFIL â”€ -->
      <div class="dash-section" id="dash-profile">
        <div class="dash-section-title">ðŸ‘¤ Mon profil</div>
        <div class="profile-grid">
          <div class="form-group"><label>PrÃ©nom</label><input type="text" id="prof_prenom"></div>
          <div class="form-group"><label>Nom</label><input type="text" id="prof_nom"></div>
          <div class="form-group profile-full"><label>Email</label><input type="email" id="prof_email"></div>
          <div class="form-group"><label>TÃ©lÃ©phone</label><input type="tel" id="prof_tel" placeholder="06 00 00 00 00"></div>
          <div class="form-group"><label>Date de naissance</label><input type="date" id="prof_birth"></div>
          <div class="form-group profile-full">
            <label>RÃ©gime alimentaire</label>
            <select id="prof_diet">
              <option value="">Aucun</option>
              <option value="vegan">Vegan</option>
              <option value="vegetarien">VÃ©gÃ©tarien</option>
              <option value="sans-gluten">Sans gluten</option>
              <option value="halal">Halal</option>
              <option value="kasher">Kasher</option>
            </select>
          </div>
          <div class="form-group profile-full"><label>Allergies / Notes</label><textarea id="prof_allergies" placeholder="Indiquez vos allergies ou restrictions alimentaires..." style="min-height:80px;resize:vertical"></textarea></div>
        </div>
        <button class="dash-save-btn" onclick="saveProfile()">âœ“ Enregistrer les modifications</button>
      </div>

      <!-- â”€ ADRESSES â”€ -->
      <div class="dash-section" id="dash-addresses">
        <div class="dash-section-title">ðŸ“ Mes adresses</div>
        <div id="addressesList"></div>
        <button class="btn-add-address" onclick="showAddAddressForm()">+ Ajouter une adresse</button>
        <div id="addAddressForm" style="display:none;margin-top:1rem;background:white;padding:1.2rem;border-radius:4px;border:1px solid rgba(0,0,0,.06)">
          <div class="profile-grid">
            <div class="form-group profile-full">
              <label>IntitulÃ© (ex: Domicile, Bureau)</label>
              <input type="text" id="addr_label" placeholder="Domicile">
            </div>
            <div class="form-group profile-full"><label>Adresse</label><input type="text" id="addr_street" placeholder="12 rue des Fleurs"></div>
            <div class="form-group"><label>Code postal</label><input type="text" id="addr_zip" placeholder="33000" maxlength="5"></div>
            <div class="form-group"><label>Ville</label><input type="text" id="addr_city" placeholder="Bordeaux"></div>
            <div class="form-group profile-full"><label>ComplÃ©ment</label><input type="text" id="addr_extra" placeholder="BÃ¢timent, Ã©tage, digicode..."></div>
          </div>
          <div style="display:flex;gap:.8rem;margin-top:.8rem">
            <button class="dash-save-btn" style="flex:1;margin-top:0" onclick="saveAddress()">âœ“ Enregistrer</button>
            <button onclick="document.getElementById('addAddressForm').style.display='none'" style="flex:1;padding:.9rem;background:none;border:1.5px solid rgba(0,0,0,.12);border-radius:2px;cursor:pointer;font-size:.8rem;font-weight:500">Annuler</button>
          </div>
        </div>
      </div>

      <!-- â”€ SÃ‰CURITÃ‰ â”€ -->
      <div class="dash-section" id="dash-security">
        <div class="dash-section-title">ðŸ”’ SÃ©curitÃ© du compte</div>

        <div class="security-item">
          <div class="security-item-header">
            <span class="security-item-title">Changer le mot de passe</span>
          </div>
          <div class="security-item-desc" style="margin-bottom:1rem">DerniÃ¨re modification : jamais</div>
          <div style="display:flex;flex-direction:column;gap:.8rem">
            <div class="form-group"><label>Mot de passe actuel</label><input type="password" id="sec_current" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
            <div class="form-group">
              <label>Nouveau mot de passe</label>
              <input type="password" id="sec_new" placeholder="10 caractÃ¨res minimum" oninput="updateSecPasswordUI()">
              <div style="margin-top:.4rem">
                <div style="height:3px;background:#e0e0e0;border-radius:2px;overflow:hidden">
                  <div id="secPwdBar" style="height:100%;width:0%;transition:width .3s,background .3s;border-radius:2px"></div>
                </div>
              </div>
              <div style="display:flex;flex-direction:column;gap:.2rem;margin-top:.4rem">
                <div id="srule_len"     style="font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:.35rem"><span class="rule-icon">â—‹</span> 10 caractÃ¨res minimum</div>
                <div id="srule_upper"   style="font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:.35rem"><span class="rule-icon">â—‹</span> Une majuscule</div>
                <div id="srule_lower"   style="font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:.35rem"><span class="rule-icon">â—‹</span> Une minuscule</div>
                <div id="srule_digit"   style="font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:.35rem"><span class="rule-icon">â—‹</span> Un chiffre</div>
                <div id="srule_special" style="font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:.35rem"><span class="rule-icon">â—‹</span> Un caractÃ¨re spÃ©cial</div>
              </div>
            </div>
            <div class="form-group"><label>Confirmer le nouveau mot de passe</label><input type="password" id="sec_confirm" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
            <button class="dash-save-btn" onclick="changePassword()">âœ“ Mettre Ã  jour le mot de passe</button>
          </div>
        </div>

        <div class="security-item">
          <div class="security-item-header">
            <span class="security-item-title">Supprimer mon compte</span>
          </div>
          <p class="security-item-desc" style="margin-bottom:1rem">Cette action est irrÃ©versible. Toutes vos donnÃ©es et commandes seront supprimÃ©es dÃ©finitivement.</p>
          <button onclick="confirmDeleteAccount()" style="padding:.7rem 1.4rem;background:none;border:1.5px solid #e53935;color:#e53935;border-radius:2px;font-size:.8rem;font-weight:600;letter-spacing:.06em;text-transform:uppercase;cursor:pointer;transition:all .2s" onmouseover="this.style.background='#e53935';this.style.color='white'" onmouseout="this.style.background='none';this.style.color='#e53935'">
            Supprimer mon compte
          </button>
        </div>
      </div>

      <!-- â”€ PRÃ‰FÃ‰RENCES â”€ -->
      <div class="dash-section" id="dash-prefs">
        <div class="dash-section-title">âš™ï¸ PrÃ©fÃ©rences</div>

        <div class="pref-toggle">
          <div class="pref-toggle-info">
            <h4>Emails de confirmation</h4>
            <p>Recevoir un email Ã  chaque commande</p>
          </div>
          <label class="toggle-switch"><input type="checkbox" id="pref_email_confirm" checked><span class="toggle-slider"></span></label>
        </div>
        <div class="pref-toggle">
          <div class="pref-toggle-info">
            <h4>Offres et promotions</h4>
            <p>Recevoir nos offres exclusives par email</p>
          </div>
          <label class="toggle-switch"><input type="checkbox" id="pref_marketing"><span class="toggle-slider"></span></label>
        </div>
        <div class="pref-toggle">
          <div class="pref-toggle-info">
            <h4>SMS de livraison</h4>
            <p>ÃŠtre notifiÃ© par SMS lors de la livraison</p>
          </div>
          <label class="toggle-switch"><input type="checkbox" id="pref_sms" checked><span class="toggle-slider"></span></label>
        </div>
        <div class="pref-toggle">
          <div class="pref-toggle-info">
            <h4>Rappel de commande</h4>
            <p>Rappel 48h avant votre Ã©vÃ©nement</p>
          </div>
          <label class="toggle-switch"><input type="checkbox" id="pref_reminder" checked><span class="toggle-slider"></span></label>
        </div>
        <div class="pref-toggle">
          <div class="pref-toggle-info">
            <h4>Newsletter mensuelle</h4>
            <p>Nos menus du mois et actualitÃ©s</p>
          </div>
          <label class="toggle-switch"><input type="checkbox" id="pref_newsletter"><span class="toggle-slider"></span></label>
        </div>
        <button class="dash-save-btn" onclick="savePrefs()">âœ“ Enregistrer les prÃ©fÃ©rences</button>
      </div>

      <button class="btn-logout" onclick="handleLogout()">â¬¡ Se dÃ©connecter</button>
    </div>
  </div>
</div>

<!-- LOGIN / REGISTER MODAL -->
<div class="modal-overlay" id="loginOverlay" onclick="closeLoginOutside(event)">
  <div class="modal" style="max-width:440px">
    <div style="padding:2.5rem">
      <div class="modal-header" style="margin-bottom:1.5rem">
        <div>
          <div id="authModalBadge" style="font-size:.7rem;text-transform:uppercase;letter-spacing:.2em;color:var(--gold);margin-bottom:.4rem">Votre espace</div>
          <h2 class="checkout-title" id="authModalTitle">Connexion</h2>
        </div>
        <button class="modal-close" onclick="closeLogin()">âœ•</button>
      </div>

      <!-- Tabs -->
      <div style="display:flex;border-bottom:2px solid rgba(0,0,0,.07);margin-bottom:1.8rem">
        <button id="tabLogin" onclick="switchAuthTab('login')" style="flex:1;padding:.7rem;background:none;border:none;font-family:'DM Sans',sans-serif;font-size:.85rem;font-weight:600;letter-spacing:.06em;text-transform:uppercase;cursor:pointer;border-bottom:2px solid var(--burgundy);margin-bottom:-2px;color:var(--burgundy);transition:all .2s">Connexion</button>
        <button id="tabRegister" onclick="switchAuthTab('register')" style="flex:1;padding:.7rem;background:none;border:none;font-family:'DM Sans',sans-serif;font-size:.85rem;font-weight:600;letter-spacing:.06em;text-transform:uppercase;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-2px;color:var(--text-light);transition:all .2s">S'inscrire</button>
      </div>

      <!-- Login Form -->
      <div id="formLogin" style="display:flex;flex-direction:column;gap:1rem">
        <div class="form-group"><label>Email</label><input type="email" id="login_email" placeholder="votre@email.fr"></div>
        <div class="form-group"><label>Mot de passe</label><input type="password" id="login_password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
        <button class="btn-primary" style="padding:.9rem;margin-top:.3rem" onclick="handleLogin()">Se connecter â†’</button>
        <p style="text-align:center;font-size:.75rem;color:var(--text-light)"><a href="#" style="color:var(--burgundy);text-decoration:none" onclick="showForgotPassword(event)">Mot de passe oubliÃ© ?</a></p>
      </div>

      <!-- Forgot Password â€” Step 1 : saisie email -->
      <div id="formForgot1" style="display:none;flex-direction:column;gap:1.2rem">
        <div style="text-align:center;margin-bottom:.5rem">
          <div style="font-size:2.5rem;margin-bottom:.8rem">ðŸ“§</div>
          <p style="font-size:.9rem;color:var(--text-light);line-height:1.6">Saisissez votre adresse email. Nous vous enverrons un code de vÃ©rification Ã  6 chiffres.</p>
        </div>
        <div class="form-group"><label>Adresse email</label><input type="email" id="forgot_email" placeholder="votre@email.fr"></div>
        <button class="btn-primary" style="padding:.9rem" onclick="sendResetCode()">Envoyer le code â†’</button>
        <p style="text-align:center;font-size:.75rem;color:var(--text-light)"><a href="#" style="color:var(--burgundy);text-decoration:none" onclick="switchAuthTab('login')">â† Retour Ã  la connexion</a></p>
      </div>

      <!-- Forgot Password â€” Step 2 : code de vÃ©rification -->
      <div id="formForgot2" style="display:none;flex-direction:column;gap:1.2rem">
        <div style="text-align:center;margin-bottom:.5rem">
          <div style="font-size:2.5rem;margin-bottom:.8rem">ðŸ”‘</div>
          <p style="font-size:.9rem;color:var(--text-light);line-height:1.6">Un code Ã  6 chiffres a Ã©tÃ© envoyÃ© Ã  <strong id="forgot_email_display"></strong>. Saisissez-le ci-dessous.</p>
        </div>
        <div class="form-group">
          <label>Code de vÃ©rification</label>
          <input type="text" id="forgot_code" placeholder="123456" maxlength="6"
            style="text-align:center;font-size:1.5rem;font-weight:700;letter-spacing:.4em"
            oninput="this.value=this.value.replace(/\D/g,'')">
        </div>
        <div id="forgot_code_hint" style="display:none;background:rgba(196,154,60,0.1);border:1px solid rgba(196,154,60,0.3);border-radius:4px;padding:.8rem 1rem;font-size:.8rem;color:#7a5c00;text-align:center"></div>
        <button class="btn-primary" style="padding:.9rem" onclick="verifyResetCode()">VÃ©rifier le code â†’</button>
        <p style="text-align:center;font-size:.75rem;color:var(--text-light)">
          Pas reÃ§u le code ? <a href="#" style="color:var(--burgundy);text-decoration:none" onclick="resendCode(event)">Renvoyer</a>
          &nbsp;Â·&nbsp; <a href="#" style="color:var(--burgundy);text-decoration:none" onclick="showForgotStep(1)">Changer d'email</a>
        </p>
      </div>

      <!-- Forgot Password â€” Step 3 : nouveau mot de passe -->
      <div id="formForgot3" style="display:none;flex-direction:column;gap:1.2rem">
        <div style="text-align:center;margin-bottom:.5rem">
          <div style="font-size:2.5rem;margin-bottom:.8rem">ðŸ”’</div>
          <p style="font-size:.9rem;color:var(--text-light);line-height:1.6">Choisissez un nouveau mot de passe sÃ©curisÃ© pour votre compte.</p>
        </div>
        <div class="form-group">
          <label>Nouveau mot de passe</label>
          <input type="password" id="new_password" placeholder="10 caractÃ¨res minimum" oninput="updateNewPasswordUI()">
          <div style="margin-top:.5rem">
            <div style="height:4px;background:#e0e0e0;border-radius:2px;overflow:hidden">
              <div id="newPwdStrengthBar" style="height:100%;width:0%;transition:width .3s,background .3s;border-radius:2px"></div>
            </div>
            <div style="display:flex;justify-content:flex-end;margin-top:.2rem">
              <span id="newPwdStrengthLabel" style="font-size:.7rem;font-weight:600;transition:color .3s"></span>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:.25rem;margin-top:.5rem">
            <div id="nrule_len"     style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> 10 caractÃ¨res minimum</div>
            <div id="nrule_upper"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Une lettre majuscule (Aâ€“Z)</div>
            <div id="nrule_lower"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Une lettre minuscule (aâ€“z)</div>
            <div id="nrule_digit"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Un chiffre (0â€“9)</div>
            <div id="nrule_special" style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Un caractÃ¨re spÃ©cial (!@#$%...)</div>
          </div>
        </div>
        <div class="form-group"><label>Confirmer le nouveau mot de passe</label><input type="password" id="new_password2" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
        <button class="btn-primary" style="padding:.9rem" onclick="resetPassword()">RÃ©initialiser le mot de passe â†’</button>
      </div>

      <!-- Register Form -->
      <div id="formRegister" style="display:none;flex-direction:column;gap:1rem">
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem">
          <div class="form-group"><label>PrÃ©nom</label><input type="text" id="reg_prenom" placeholder="Julie"></div>
          <div class="form-group"><label>Nom</label><input type="text" id="reg_nom" placeholder="Dupont"></div>
        </div>
        <div class="form-group"><label>Email</label><input type="email" id="reg_email" placeholder="votre@email.fr"></div>
        <div class="form-group"><label>TÃ©lÃ©phone</label><input type="tel" id="reg_tel" placeholder="06 00 00 00 00"></div>
        <div class="form-group">
          <label>Mot de passe</label>
          <input type="password" id="reg_password" placeholder="10 caractÃ¨res minimum" oninput="updatePasswordUI()">
          <div style="margin-top:.5rem">
            <div style="height:4px;background:#e0e0e0;border-radius:2px;overflow:hidden">
              <div id="pwdStrengthBar" style="height:100%;width:0%;transition:width .3s,background .3s;border-radius:2px"></div>
            </div>
            <div style="display:flex;justify-content:flex-end;margin-top:.2rem">
              <span id="pwdStrengthLabel" style="font-size:.7rem;font-weight:600;transition:color .3s"></span>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:.25rem;margin-top:.5rem">
            <div id="rule_len"     style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> 10 caractÃ¨res minimum</div>
            <div id="rule_upper"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Une lettre majuscule (Aâ€“Z)</div>
            <div id="rule_lower"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Une lettre minuscule (aâ€“z)</div>
            <div id="rule_digit"   style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Un chiffre (0â€“9)</div>
            <div id="rule_special" style="font-size:.75rem;color:var(--text-light);display:flex;align-items:center;gap:.4rem;transition:color .2s"><span class="rule-icon">â—‹</span> Un caractÃ¨re spÃ©cial (!@#$%...)</div>
          </div>
        </div>
        <div class="form-group"><label>Confirmer le mot de passe</label><input type="password" id="reg_password2" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"></div>
        <button class="btn-primary" style="padding:.9rem;margin-top:.3rem" onclick="handleRegister()">CrÃ©er mon compte â†’</button>
        <p style="text-align:center;font-size:.75rem;color:var(--text-light)">En vous inscrivant, vous acceptez nos <a href="#" onclick="closeCGV();openCGV(event)" style="color:var(--burgundy);text-decoration:none">CGV</a>.</p>
      </div>
    </div>
  </div>
</div>

<!-- AUTH REQUIRED MODAL -->
<div class="modal-overlay" id="authRequiredOverlay" onclick="closeAuthRequired(event)">
  <div class="modal" style="max-width:420px">
    <div style="padding:3rem 2.5rem;text-align:center">
      <div style="font-size:3rem;margin-bottom:1rem">ðŸ”’</div>
      <h2 style="font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:var(--charcoal);margin-bottom:.7rem">Connexion requise</h2>
      <p style="color:var(--text-light);font-size:.9rem;line-height:1.6;margin-bottom:2rem">Vous devez Ãªtre connectÃ© pour ajouter des articles Ã  votre panier ou passer commande.</p>
      <div style="display:flex;gap:1rem;justify-content:center;flex-wrap:wrap">
        <button class="btn-primary" style="padding:.8rem 1.8rem" onclick="closeAuthRequired();showLogin('login')">Se connecter</button>
        <button class="btn-secondary" style="padding:.8rem 1.8rem" onclick="closeAuthRequired();showLogin('register')">S'inscrire</button>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="adm-overlay" id="admOverlay" onclick="closeAdmOutside(event)">
  <div class="adm-panel" onclick="event.stopPropagation()">
    <div class="adm-header">
      <div>
        <div class="adm-badge">Administrateur</div>
        <div class="adm-title">JosÃ© Lebon</div>
        <div class="adm-subtitle">Vite &amp; Gourmand Â· Bordeaux</div>
      </div>
      <button class="adm-close" onclick="closeAdmPanel()">âœ•</button>
    </div>
    <div class="adm-tabs">
      <button class="adm-tab active" onclick="switchAdmTab('employees',this)">ðŸ‘¥ EmployÃ©s</button>
      <button class="adm-tab" onclick="switchAdmTab('stats',this)">ðŸ“Š Statistiques</button>
      <button class="adm-tab" onclick="switchAdmTab('revenue',this)">ðŸ’¶ Chiffre d'affaires</button>
      <button class="adm-tab" onclick="switchAdmTab('tools',this)">âš™ï¸ Gestion</button>
    </div>
    <div class="adm-body">

      <!-- â”€ EMPLOYÃ‰S â”€ -->
      <div class="adm-section active" id="adm-employees">
        <div class="adm-section-title">ðŸ‘¥ Gestion des comptes employÃ©s</div>

        <div class="adm-create-form">
          <div class="adm-create-form-title">CrÃ©er un compte employÃ©</div>
          <div style="display:flex;flex-direction:column;gap:.9rem">
            <div class="emp-form-row">
              <div class="form-group"><label>Nom complet <span style="color:#e53935">*</span></label><input type="text" id="newEmpName" placeholder="PrÃ©nom Nom"></div>
              <div class="form-group"><label>Email (identifiant) <span style="color:#e53935">*</span></label><input type="email" id="newEmpEmail" placeholder="employe@vg.fr"></div>
            </div>
            <div class="form-group">
              <label>Mot de passe temporaire <span style="color:#e53935">*</span></label>
              <input type="password" id="newEmpPassword" placeholder="Ã€ communiquer en main propre Ã  l'employÃ©">
            </div>
            <div style="background:rgba(196,154,60,0.08);border-left:3px solid var(--gold);padding:.85rem 1rem;border-radius:0 4px 4px 0;font-size:.8rem;color:#7a5c00;line-height:1.6">
              â„¹ï¸ L'employÃ© recevra un email lui notifiant la crÃ©ation de son compte. <strong>Le mot de passe ne sera pas communiquÃ© dans l'email</strong> â€” il devra se rapprocher de l'administrateur pour l'obtenir.
            </div>
            <button class="btn-emp-update" style="align-self:flex-start;padding:.7rem 1.8rem" onclick="createEmployeeAccount()">âœ“ CrÃ©er le compte</button>
          </div>
        </div>

        <div style="font-family:'Playfair Display',serif;font-size:.95rem;font-weight:700;color:var(--charcoal);margin-bottom:.8rem">Comptes existants</div>
        <div id="admEmployeesList"></div>
      </div>

      <!-- â”€ STATISTIQUES â”€ -->
      <div class="adm-section" id="adm-stats">
        <div class="adm-section-title">ðŸ“Š Statistiques des commandes</div>
        <div class="db-badge">ðŸ—„ Source : Base non-relationnelle (NoSQL)</div>
        <div class="adm-stat-cards" id="admStatCards"></div>
        <div class="adm-chart-container">
          <canvas id="ordersChart"></canvas>
        </div>
      </div>

      <!-- â”€ CHIFFRE D'AFFAIRES â”€ -->
      <div class="adm-section" id="adm-revenue">
        <div class="adm-section-title">ðŸ’¶ Chiffre d'affaires par menu</div>
        <div class="db-badge">ðŸ—„ Source : Base non-relationnelle (NoSQL)</div>
        <div class="adm-rev-filters">
          <div class="filter-group">
            <label>Menu</label>
            <select id="revFilterMenu" onchange="calcRevenue()">
              <option value="">Tous les menus</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Date Ã©vÃ©nement â€” dÃ©but</label>
            <input type="date" id="revDateStart" onchange="calcRevenue()">
          </div>
          <div class="filter-group">
            <label>Date Ã©vÃ©nement â€” fin</label>
            <input type="date" id="revDateEnd" onchange="calcRevenue()">
          </div>
          <button class="btn-reset" onclick="resetRevFilters()">âŸ³ RÃ©initialiser</button>
        </div>
        <div id="revTable"></div>
        <div class="adm-chart-container" style="height:280px;margin-top:1.5rem">
          <canvas id="revenueChart"></canvas>
        </div>
      </div>

      <!-- â”€ OUTILS GESTION (EMPLOYEE SPACE) â”€ -->
      <div class="adm-section" id="adm-tools">
        <div class="adm-section-title">âš™ï¸ Outils de gestion employÃ©</div>
        <p style="font-size:.875rem;color:var(--text-light);line-height:1.6;margin-bottom:1.5rem">En tant qu'administrateur, vous avez accÃ¨s Ã  l'intÃ©gralitÃ© des outils de l'espace employÃ©.</p>
        <div class="adm-tool-card">
          <div><div class="adm-tool-name">ðŸ“‹ Gestion des commandes</div><div class="adm-tool-desc">Mettre Ã  jour les statuts, filtrer, annuler avec motif</div></div>
          <button class="btn-emp-update" onclick="openEmpSection('orders')">AccÃ©der â†’</button>
        </div>
        <div class="adm-tool-card">
          <div><div class="adm-tool-name">ðŸ½ Gestion des menus</div><div class="adm-tool-desc">CrÃ©er, modifier, supprimer des menus</div></div>
          <button class="btn-emp-update" onclick="openEmpSection('menus')">AccÃ©der â†’</button>
        </div>
        <div class="adm-tool-card">
          <div><div class="adm-tool-name">â­ ModÃ©ration des avis</div><div class="adm-tool-desc">Approuver ou refuser les avis clients</div></div>
          <button class="btn-emp-update" onclick="openEmpSection('reviews')">AccÃ©der â†’</button>
        </div>
        <div class="adm-tool-card">
          <div><div class="adm-tool-name">ðŸ• Gestion des horaires</div><div class="adm-tool-desc">Modifier les plages horaires d'ouverture</div></div>
          <button class="btn-emp-update" onclick="openEmpSection('hours')">AccÃ©der â†’</button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- EMPLOYEE PANEL -->
<div class="emp-overlay" id="empOverlay" onclick="closeEmpOutside(event)">
  <div class="emp-panel" onclick="event.stopPropagation()">
    <div class="emp-header">
      <div>
        <div class="emp-badge">EmployÃ©</div>
        <div class="emp-title">Espace de gestion</div>
      </div>
      <button class="emp-close" onclick="closeEmpPanel()">âœ•</button>
    </div>
    <div class="emp-tabs">
      <button class="emp-tab active" onclick="switchEmpTab('orders',this)">ðŸ“‹ Commandes <span class="tab-badge" id="empOrdersBadge" style="display:none"></span></button>
      <button class="emp-tab" onclick="switchEmpTab('menus',this)">ðŸ½ Menus</button>
      <button class="emp-tab" onclick="switchEmpTab('reviews',this)">â­ Avis <span class="tab-badge" id="empReviewsBadge" style="display:none"></span></button>
      <button class="emp-tab" onclick="switchEmpTab('hours',this)">ðŸ• Horaires</button>
    </div>
    <div class="emp-body">

      <!-- â”€ COMMANDES â”€ -->
      <div class="emp-section active" id="emp-orders">
        <div class="emp-section-title"><span>ðŸ“‹ Gestion des commandes</span></div>
        <div class="emp-filters">
          <div class="emp-filter-group">
            <label>Statut</label>
            <select id="empFilterStatus" onchange="renderEmpOrders()">
              <option value="">Tous les statuts</option>
              <option value="received">ReÃ§ue</option>
              <option value="accepted">AcceptÃ©e</option>
              <option value="preparing">En prÃ©paration</option>
              <option value="delivering">En cours de livraison</option>
              <option value="delivered">LivrÃ©e</option>
              <option value="awaiting_return">Attente retour matÃ©riel</option>
              <option value="completed">TerminÃ©e</option>
              <option value="cancelled">AnnulÃ©e</option>
            </select>
          </div>
          <div class="emp-filter-group">
            <label>Client</label>
            <input type="text" id="empFilterClient" placeholder="Nom ou email..." oninput="renderEmpOrders()">
          </div>
          <div class="emp-filter-group">
            <label>Menu</label>
            <input type="text" id="empFilterMenu" placeholder="Nom du menu..." oninput="renderEmpOrders()">
          </div>
        </div>
        <div id="empOrdersList"></div>
      </div>

      <!-- â”€ MENUS â”€ -->
      <div class="emp-section" id="emp-menus">
        <div class="emp-section-title">
          <span>ðŸ½ Gestion des menus</span>
          <button class="btn-emp-update" onclick="openMenuForm(null)">+ Nouveau menu</button>
        </div>
        <div id="empMenusList"></div>
      </div>

      <!-- â”€ AVIS â”€ -->
      <div class="emp-section" id="emp-reviews">
        <div class="emp-section-title"><span>â­ ModÃ©ration des avis</span></div>
        <div style="display:flex;gap:.6rem;margin-bottom:1.2rem;flex-wrap:wrap">
          <button class="btn-emp-update" id="rbtn_pending" style="background:var(--cream);color:var(--burgundy);border:1.5px solid rgba(123,28,42,0.25)" onclick="renderEmpReviews('pending')">En attente</button>
          <button class="btn-emp-update" id="rbtn_approved" style="background:var(--cream);color:#2d7a3a;border:1.5px solid rgba(45,122,58,0.25)" onclick="renderEmpReviews('approved')">ApprouvÃ©s</button>
          <button class="btn-emp-update" id="rbtn_rejected" style="background:var(--cream);color:#e53935;border:1.5px solid rgba(229,57,53,0.25)" onclick="renderEmpReviews('rejected')">RefusÃ©s</button>
        </div>
        <div id="empReviewsList"></div>
      </div>

      <!-- â”€ HORAIRES â”€ -->
      <div class="emp-section" id="emp-hours">
        <div class="emp-section-title"><span>ðŸ• Gestion des horaires</span></div>
        <div id="empHoursList"></div>
        <button class="dash-save-btn" style="margin-top:1rem" onclick="saveHours()">âœ“ Enregistrer les horaires</button>
      </div>

    </div>
  </div>
</div>

<!-- CANCEL ORDER MODAL -->
<div class="modal-overlay" id="cancelOrderOverlay" onclick="closeCancelModalOutside(event)">
  <div class="modal" style="max-width:500px">
    <div class="cancel-modal-content">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.2rem">
        <div>
          <h2 class="cancel-modal-title">Annuler la commande</h2>
          <p class="cancel-modal-sub" id="cancelOrderRef">RÃ©f. â€”</p>
        </div>
        <button class="modal-close" onclick="closeCancelModal()">âœ•</button>
      </div>
      <div class="cancel-warn">
        âš ï¸ Avant d'annuler une commande, vous devez avoir contactÃ© le client par appel GSM ou par email. Renseignez obligatoirement le mode de contact, la date et le motif d'annulation.
      </div>
      <div style="display:flex;flex-direction:column;gap:1rem">
        <div class="form-group">
          <label>Mode de contact <span style="color:#e53935">*</span></label>
          <select id="cancelContactMethod">
            <option value="">â€” SÃ©lectionner â€”</option>
            <option value="gsm">ðŸ“ž Appel GSM</option>
            <option value="email">âœ‰ï¸ Email</option>
          </select>
        </div>
        <div class="form-group">
          <label>Date du contact <span style="color:#e53935">*</span></label>
          <input type="date" id="cancelContactDate">
        </div>
        <div class="form-group">
          <label>Motif d'annulation <span style="color:#e53935">*</span></label>
          <textarea id="cancelReason" placeholder="DÃ©crivez prÃ©cisÃ©ment le motif d'annulation..." style="min-height:90px;resize:vertical"></textarea>
        </div>
        <div style="display:flex;gap:.8rem">
          <button class="btn-emp-cancel" style="flex:1;padding:.8rem" onclick="submitCancelOrder()">Confirmer l'annulation</button>
          <button onclick="closeCancelModal()" style="flex:1;padding:.8rem;background:none;border:1.5px solid rgba(0,0,0,.12);border-radius:2px;cursor:pointer;font-size:.8rem;font-weight:500">Retour</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MENU EDIT FORM -->
<div class="emp-form-overlay" id="menuFormOverlay">
  <div class="emp-form-modal">
    <div class="emp-form-title">
      <span id="menuFormTitle">Nouveau menu</span>
      <button class="modal-close" onclick="closeMenuForm()">âœ•</button>
    </div>
    <div class="emp-form-grid">
      <div class="emp-form-row">
        <div class="form-group"><label>Nom du menu <span style="color:#e53935">*</span></label><input type="text" id="mf_name" placeholder="Menu Buffet Festif"></div>
        <div class="form-group">
          <label>Type <span style="color:#e53935">*</span></label>
          <select id="mf_type">
            <option value="classique">Classique</option>
            <option value="vegan">Vegan</option>
            <option value="vegetarien">VÃ©gÃ©tarien</option>
          </select>
        </div>
      </div>
      <div class="emp-form-row">
        <div class="form-group"><label>ThÃ¨me</label><input type="text" id="mf_theme" placeholder="Buffet, NoÃ«l, Cocktail..."></div>
        <div class="form-group"><label>Prix (â‚¬/pers.) <span style="color:#e53935">*</span></label><input type="number" id="mf_price" placeholder="38" min="1" step="0.01"></div>
      </div>
      <div class="form-group"><label>Min. personnes <span style="color:#e53935">*</span></label><input type="number" id="mf_minPersons" placeholder="2" min="1"></div>
      <div class="form-group"><label>Description courte <span style="color:#e53935">*</span></label><input type="text" id="mf_desc" placeholder="Description affichÃ©e sur la carte"></div>
      <div class="form-group"><label>Description complÃ¨te</label><textarea id="mf_fullDesc" placeholder="Description dÃ©taillÃ©e du menu..." style="min-height:80px;resize:vertical"></textarea></div>
      <div class="form-group"><label>Composition (une ligne par plat)</label><textarea id="mf_composition" placeholder="EntrÃ©e&#10;Plat principal&#10;Dessert..." style="min-height:80px;resize:vertical"></textarea></div>
      <div class="form-group"><label>AllergÃ¨nes</label><input type="text" id="mf_allergens" placeholder="Gluten, Lait, Å’ufs"></div>
      <div class="form-group"><label>URL de l'image</label><input type="url" id="mf_img" placeholder="https://..."></div>
      <div style="display:flex;gap:.8rem;margin-top:.5rem">
        <button class="btn-emp-update" style="flex:1;padding:.9rem" onclick="saveMenuForm()">âœ“ Enregistrer</button>
        <button onclick="closeMenuForm()" style="flex:1;padding:.9rem;background:none;border:1.5px solid rgba(0,0,0,.12);border-radius:2px;cursor:pointer;font-size:.8rem;font-weight:500">Annuler</button>
      </div>
    </div>
  </div>
</div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
// â”€â”€â”€ DATA â”€â”€â”€
const menus = [
  {
    id: 1, name: "Menu Buffet Festif", type: "classique", theme: "Buffet",
    desc: "Grande variÃ©tÃ© d'entrÃ©es, de plats et de desserts pour satisfaire tous vos convives.",
    fullDesc: "Un buffet copieux et festif avec une sÃ©lection de tartines garnies, charcuteries fines, salades composÃ©es, viandes rÃ´ties, lÃ©gumes grillÃ©s et une belle variÃ©tÃ© de desserts maison. IdÃ©al pour les grandes tablÃ©es conviviales.",
    price: 38, minPersons: 15,
    img: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=700&q=80",
    composition: ["Plateau de charcuteries et fromages", "Salades composÃ©es (3 variÃ©tÃ©s)", "Viandes froides et rÃ´ties", "LÃ©gumes grillÃ©s marinÃ©s", "Assortiment de desserts maison"],
    allergens: "Gluten, Lait, Å’ufs"
  },
  {
    id: 2, name: "Menu RÃ©ception Chic", type: "classique", theme: "RÃ©ception",
    desc: "Foie gras, magret de canard et desserts assortis pour une rÃ©ception Ã©lÃ©gante.",
    fullDesc: "Un menu raffinÃ© pensÃ© pour vos rÃ©ceptions les plus Ã©lÃ©gantes. Du foie gras de canard des Landes en entrÃ©e, un magret de canard aux cerises en plat principal, et une sÃ©lection de mignardises pour finir sur une note sucrÃ©e.",
    price: 50, minPersons: 8,
    img: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=700&q=80",
    composition: ["Foie gras de canard des Landes", "VeloutÃ© de champignons truffÃ©", "Magret de canard aux cerises", "Gratin dauphinois", "Mignardises et cafÃ©"],
    allergens: "Lait, Å’ufs, CÃ©rÃ©ales"
  },
  {
    id: 3, name: "Menu Cocktail Prestige", type: "classique", theme: "Cocktail",
    desc: "Assortiment variÃ© de canapÃ©s et bouchÃ©es pour votre Ã©vÃ©nement professionnel.",
    fullDesc: "Un cocktail dinatoire d'exception avec un assortiment de 12 piÃ¨ces variÃ©es par personne : blinis au saumon, verrines de foie gras, tartines gastronomiques, brochettes de crevettes et bouchÃ©es sucrÃ©es.",
    price: 42, minPersons: 10,
    img: "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=700&q=80",
    composition: ["12 piÃ¨ces cocktail/personne", "Blinis au saumon fumÃ©", "Verrines apÃ©ritives (3 variÃ©tÃ©s)", "Brochettes de crevettes citronnÃ©es", "Mini desserts (4 variÃ©tÃ©s)"],
    allergens: "Gluten, Poisson, CrustacÃ©s, Lait"
  },
  {
    id: 4, name: "Menu Vegan Gourmand", type: "vegan", theme: "Vegan",
    desc: "Tartare de tomates, curry de lÃ©gumes et pavlova aux fruits de saison.",
    fullDesc: "Un menu 100% vÃ©gÃ©talien qui prouve que la cuisine vegan peut Ãªtre gastronomique. Des produits frais et de saison, des associations de saveurs originales pour une expÃ©rience culinaire raffinÃ©e.",
    price: 34, minPersons: 4,
    img: "https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=700&q=80",
    composition: ["Tartare de tomates heirloom et basilic", "VeloutÃ© de courge au lait de coco", "Curry de lÃ©gumes du marchÃ©", "Riz basmati aux herbes fraÃ®ches", "Pavlova aux fruits de saison"],
    allergens: "Sans produits animaux"
  },
  {
    id: 5, name: "Menu Vegan Nature", type: "vegan", theme: "Vegan",
    desc: "Houmous aux lÃ©gumes, curry de lÃ©gumes et mousse au chocolat vÃ©gÃ©tale.",
    fullDesc: "Un menu vegan accessible et savoureux, avec des recettes Ã©purÃ©es qui subliment les lÃ©gumes. IdÃ©al pour vos dÃ©jeuners en semaine ou vos petits comitÃ©s.",
    price: 30, minPersons: 2,
    img: "https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=700&q=80",
    composition: ["Houmous maison et cruditÃ©s", "Soupe de lÃ©gumes du jour", "Curry de pois chiches et Ã©pinards", "Boulgour aux herbes", "Mousse au chocolat vÃ©gÃ©tale"],
    allergens: "SÃ©same, Gluten"
  },
  {
    id: 6, name: "Menu VÃ©gÃ©tarien RaffinÃ©", type: "vegetarien", theme: "VÃ©gÃ©tarien",
    desc: "VeloutÃ© de lÃ©gumes, lasagnes vÃ©gÃ©tales et pavlova aux fruits.",
    fullDesc: "La cuisine vÃ©gÃ©tarienne dans toute sa splendeur. Des recettes Ã©laborÃ©es avec les meilleurs lÃ©gumes de saison, des sauces onctueuses et des desserts lÃ©gers et fruitÃ©s.",
    price: 36, minPersons: 2,
    img: "https://images.unsplash.com/photo-1498579150354-977475b7ea0b?w=700&q=80",
    composition: ["VeloutÃ© de lÃ©gumes printaniers", "Cake de lÃ©gumes aux herbes", "Lasagnes vÃ©gÃ©tales ricotta-Ã©pinards", "Salade verte en accompagnement", "Pavlova aux fruits rouges"],
    allergens: "Gluten, Lait, Å’ufs"
  },
  {
    id: 8, name: "Menu DÃ©couverte", type: "classique", theme: "DÃ©couverte",
    desc: "Å’ufs mimosa, sole meuniÃ¨re et tarte tatin pour une dÃ©couverte gourmande.",
    fullDesc: "Notre menu d'initiation Ã  la gastronomie franÃ§aise. Des classiques revisitÃ©s avec soin, idÃ©al pour dÃ©couvrir notre savoir-faire ou pour vos dÃ©jeuners d'affaires.",
    price: 35, minPersons: 2,
    img: "https://images.unsplash.com/photo-1567620832903-9fc6debc209f?w=700&q=80",
    composition: ["Å’ufs mimosa Ã  la truffe", "Bisque de homard", "Sole meuniÃ¨re et ses lÃ©gumes", "Pommes de terre grenailles", "Tarte tatin et crÃ¨me fraÃ®che"],
    allergens: "Gluten, Poisson, Lait, Å’ufs, Mollusques"
  },
  {
    id: 9, name: "Menu Gastronomique", type: "classique", theme: "Gastronomique",
    desc: "Foie gras, magret de canard et bÃ»che de NoÃ«l pour une expÃ©rience inoubliable.",
    fullDesc: "Notre menu signature, pensÃ© pour les occasions exceptionnelles. Une succession de plats raffinÃ©s qui cÃ©lÃ¨bre le meilleur de la gastronomie bordelaise.",
    price: 45, minPersons: 2,
    img: "https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=700&q=80",
    composition: ["Amuse-bouches variÃ©s", "Foie gras mi-cuit et sa brioche", "Soupe de truffes VGE", "Magret de canard au jus de cÃ¨pes", "Plateau de fromages affinÃ©s", "BÃ»che de NoÃ«l artisanale"],
    allergens: "Gluten, Lait, Å’ufs, Sulfites"
  },
  {
    id: 10, name: "Menu Terroir", type: "classique", theme: "Terroir",
    desc: "Terrine maison, confit de canard girondin et crÃ¨me brÃ»lÃ©e Ã  la vanille.",
    fullDesc: "Un hommage sincÃ¨re aux saveurs du Sud-Ouest. Nos recettes familiales revisitÃ©es avec les produits du terroir bordelais pour vous transporter dans les saveurs de la Gascogne.",
    price: 38, minPersons: 2,
    img: "https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=700&q=80",
    composition: ["Terrine de canard maison et cornichons", "Soupe Ã  l'oignon gratinÃ©e", "Confit de canard girondin", "Sarladaises aux cÃ¨pes", "CrÃ¨me brÃ»lÃ©e Ã  la vanille Bourbon"],
    allergens: "Gluten, Lait, Å’ufs, Sulfites"
  },
  {
    id: 11, name: "Menu PÃ¢ques RaffinÃ©", type: "classique", theme: "PÃ¢ques",
    desc: "Carpaccio de bÅ“uf, sole meuniÃ¨re et tiramisu pour fÃªter PÃ¢ques.",
    fullDesc: "Un menu de PÃ¢ques Ã©lÃ©gant et printanier, mettant Ã  l'honneur les produits de saison. Une composition lÃ©gÃ¨re et savoureuse pour dÃ©jeuner en famille.",
    price: 48, minPersons: 2,
    img: "https://images.unsplash.com/photo-1476224203421-9ac39bcb3327?w=700&q=80",
    composition: ["Carpaccio de bÅ“uf et roquette", "VeloutÃ© d'asperges blanches", "Sole meuniÃ¨re et ses lÃ©gumes de printemps", "Pommes de terre nouvelles au beurre", "Tiramisu aux fraises"],
    allergens: "Gluten, Poisson, Lait, Å’ufs"
  },
  {
    id: 12, name: "Menu PÃ¢ques Gourmand", type: "classique", theme: "PÃ¢ques",
    desc: "Saumon fumÃ©, gigot d'agneau pascal et tarte au citron meringuÃ©e.",
    fullDesc: "Le grand menu de PÃ¢ques pour les familles gourmandes. Un gigot d'agneau cuit Ã  la perfection, des accompagnements gÃ©nÃ©reux et une tarte au citron qui ravira les papilles.",
    price: 52, minPersons: 4,
    img: "https://images.unsplash.com/photo-1555126634-323283e090fa?w=700&q=80",
    composition: ["Saumon fumÃ© de l'Atlantique", "FeuilletÃ© d'asperges vertes", "Gigot d'agneau Ã  l'ail et romarin", "Gratin de pommes de terre", "LÃ©gumes printaniers", "Tarte au citron meringuÃ©e"],
    allergens: "Gluten, Poisson, Lait, Å’ufs"
  },
  {
    id: 13, name: "Menu NoÃ«l Tradition", type: "classique", theme: "NoÃ«l",
    desc: "Saumon fumÃ©, magret de canard et profiteroles pour NoÃ«l.",
    fullDesc: "Retrouvez la magie de NoÃ«l avec notre menu traditionnel : les incontournables de la table de fÃªte rÃ©interprÃ©tÃ©s avec l'excellence de notre cuisine maison.",
    price: 55, minPersons: 4,
    img: "https://images.unsplash.com/photo-1576402187878-974f70c890a5?w=700&q=80",
    composition: ["Saumon fumÃ© Ã©cossais", "VeloutÃ© de chÃ¢taignes", "Magret de canard au miel et Ã©pices", "Gratin dauphinois", "Haricots verts sautÃ©s", "Profiteroles au chocolat chaud"],
    allergens: "Gluten, Poisson, Lait, Å’ufs, Sulfites"
  },
  {
    id: 14, name: "Menu NoÃ«l Prestige", type: "classique", theme: "NoÃ«l",
    desc: "Foie gras, chapon farci aux truffes et bÃ»che de NoÃ«l artisanale.",
    fullDesc: "Notre menu de rÃ©veillon par excellence. Un festin gastronomique qui cÃ©lÃ¨bre les saveurs de fin d'annÃ©e avec les plus beaux produits de la saison. Inoubliable.",
    price: 65, minPersons: 6,
    img: "https://images.unsplash.com/photo-1608270586620-248524c67de9?w=700&q=80",
    composition: ["Foie gras entier mi-cuit et brioche", "VeloutÃ© de homard", "Chapon de Bresse farci aux truffes", "Gratin de pommes de terre sarladaises", "Plateau de fromages affinÃ©s", "BÃ»che de NoÃ«l artisanale au pralinÃ©"],
    allergens: "Gluten, CrustacÃ©s, Lait, Å’ufs, Sulfites"
  }
];

const reviews = [
  { name: "Anne-Sophie M.", date: "13/02/2026", stars: 5, text: "Une expÃ©rience culinaire incroyable ! Le menu Gastronomique pour notre mariage a enchantÃ© tous nos invitÃ©s. Julie et JosÃ© sont des professionnels d'exception." },
  { name: "Pierre D.", date: "28/01/2026", stars: 5, text: "Commande pour notre sÃ©minaire d'entreprise de 40 personnes. Service impeccable, livraison Ã  l'heure et des plats d'une qualitÃ© remarquable. Je recommande !" },
  { name: "Camille R.", date: "15/01/2026", stars: 5, text: "Le menu NoÃ«l Prestige Ã©tait tout simplement divin. Mon chapon farci aux truffes a fait l'unanimitÃ© Ã  table. On commandera Ã  nouveau sans hÃ©siter." },
  { name: "FranÃ§ois L.", date: "03/01/2026", stars: 4, text: "TrÃ¨s bonne prestation pour notre repas du rÃ©veillon. Produits frais, prÃ©sentation soignÃ©e. Un lÃ©ger retard sur la livraison mais rien de rÃ©dhibitoire." },
  { name: "Isabelle T.", date: "22/12/2025", stars: 5, text: "Le menu Vegan Gourmand Ã©tait une rÃ©vÃ©lation ! Jamais pensÃ© qu'un repas 100% vÃ©gÃ©talien pouvait Ãªtre aussi raffinÃ©. Toute la famille a adorÃ©." },
  { name: "Marc B.", date: "10/12/2025", stars: 5, text: "Vite & Gourmand accompagne tous nos Ã©vÃ©nements depuis 3 ans maintenant. FiabilitÃ©, qualitÃ© et passion â€” trois valeurs qui dÃ©finissent parfaitement Julie et JosÃ©." }
];

// â”€â”€â”€ STATE â”€â”€â”€
let cart = [];
let activeMenu = null;
let modalQty = 1;

// â”€â”€â”€ RENDER MENUS â”€â”€â”€
function renderMenus(data) {
  const grid = document.getElementById('menusGrid');
  if (data.length === 0) {
    grid.innerHTML = '<div class="no-results"><p>Aucun menu ne correspond Ã  vos critÃ¨res. Essayez d\'Ã©largir votre recherche.</p></div>';
    return;
  }
  grid.innerHTML = data.map(m => `
    <div class="menu-card">
      <div class="card-img">
        <img src="${m.img}" alt="${m.name}" loading="lazy">
        <div class="card-badge ${m.type}">${m.type === 'vegan' ? 'Vegan' : m.type === 'vegetarien' ? 'VÃ©gÃ©tarien' : 'Classique'}</div>
      </div>
      <div class="card-body">
        <h3 class="card-name">${m.name}</h3>
        <p class="card-desc">${m.desc}</p>
        <p class="card-meta">Minimum ${m.minPersons} personne${m.minPersons > 1 ? 's' : ''}</p>
        <div class="card-footer">
          <div class="card-price">${m.price.toFixed(2).replace('.', ',')} â‚¬<span>/pers.</span></div>
          <div style="display:flex;gap:.5rem">
            <button class="btn-add" style="background:var(--cream);color:var(--burgundy);border:1.5px solid rgba(123,28,42,0.2)" onclick="openModal(${m.id})">
              DÃ©tails
            </button>
            <button class="btn-add" onclick="quickAdd(${m.id})">
              <svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none"><path d="M12 5v14M5 12h14"/></svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  `).join('');
}

// â”€â”€â”€ FILTERS â”€â”€â”€
function filterMenus() {
  const type = document.getElementById('filterType').value;
  const persons = parseInt(document.getElementById('filterPersons').value) || 0;
  const theme = document.getElementById('filterTheme').value;
  const priceMin = parseFloat(document.getElementById('filterPriceMin').value) || 0;
  const priceMax = parseFloat(document.getElementById('filterPriceMax').value) || Infinity;

  const filtered = menus.filter(m => {
    if (type && m.type !== type) return false;
    if (persons && m.minPersons > persons) return false;
    if (theme && !m.name.includes(theme) && !m.theme.includes(theme)) return false;
    if (m.price < priceMin || m.price > priceMax) return false;
    return true;
  });
  renderMenus(filtered);
}

function resetFilters() {
  document.getElementById('filterType').value = '';
  document.getElementById('filterPersons').value = '';
  document.getElementById('filterTheme').value = '';
  document.getElementById('filterPriceMin').value = '';
  document.getElementById('filterPriceMax').value = '';
  renderMenus(menus);
}

// â”€â”€â”€ MODAL â”€â”€â”€
function openModal(id) {
  const m = menus.find(x => x.id === id);
  activeMenu = m;
  modalQty = 1;
  document.getElementById('modalImg').src = m.img;
  document.getElementById('modalTitle').textContent = m.name;
  document.getElementById('modalBadge').textContent = m.type === 'vegan' ? 'Vegan' : m.type === 'vegetarien' ? 'VÃ©gÃ©tarien' : 'Classique';
  document.getElementById('modalBadge').className = 'card-badge ' + m.type;
  document.getElementById('modalDesc').textContent = m.fullDesc;
  document.getElementById('modalQty').textContent = '1';
  updateModalPrice();
  document.getElementById('modalDetails').innerHTML = `
    <div class="modal-detail-item"><div class="modal-detail-label">Prix</div><div class="modal-detail-value">${m.price.toFixed(2).replace('.', ',')} â‚¬/pers.</div></div>
    <div class="modal-detail-item"><div class="modal-detail-label">Min. personnes</div><div class="modal-detail-value">${m.minPersons} personnes</div></div>
    <div class="modal-detail-item"><div class="modal-detail-label">Composition</div><div class="modal-detail-value" style="font-size:.85rem;font-weight:400;color:var(--text-light)">${m.composition.join(' â€¢ ')}</div></div>
    <div class="modal-detail-item"><div class="modal-detail-label">AllergÃ¨nes</div><div class="modal-detail-value" style="font-size:.85rem;font-weight:400;color:var(--text-light)">${m.allergens}</div></div>
  `;
  document.getElementById('modalOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function updateModalPrice() {
  if (!activeMenu) return;
  document.getElementById('modalPriceDisplay').textContent = (activeMenu.price * modalQty).toFixed(2).replace('.', ',') + ' â‚¬';
}

function changeModalQty(delta) {
  modalQty = Math.max(1, modalQty + delta);
  document.getElementById('modalQty').textContent = modalQty;
  updateModalPrice();
}

function closeModal(e) {
  if (e.target === document.getElementById('modalOverlay')) closeModalBtn();
}
function closeModalBtn() {
  document.getElementById('modalOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

function addFromModal() {
  if (!activeMenu) return;
  requireAuth(() => {
    addToCart(activeMenu, modalQty);
    closeModalBtn();
    showToast(`${activeMenu.name} ajoutÃ© au panier !`);
  });
}

function quickAdd(id) {
  const m = menus.find(x => x.id === id);
  requireAuth(() => {
    addToCart(m, 1);
    showToast(`${m.name} ajoutÃ© au panier !`);
  });
}

// â”€â”€â”€ CART â”€â”€â”€
function addToCart(menu, qty) {
  const existing = cart.find(i => i.id === menu.id);
  if (existing) {
    existing.qty += qty;
  } else {
    cart.push({ ...menu, qty });
  }
  updateCart();
}

function updateCart() {
  const total = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
  const count = cart.reduce((sum, i) => sum + i.qty, 0);
  
  const countEl = document.getElementById('cartCount');
  countEl.textContent = count;
  countEl.style.display = count > 0 ? 'flex' : 'none';
  
  const itemsEl = document.getElementById('cartItems');
  const footerEl = document.getElementById('cartFooter');
  
  if (cart.length === 0) {
    itemsEl.innerHTML = `<div class="cart-empty"><div class="cart-empty-icon">ðŸ›</div><p>Votre panier est vide.<br>DÃ©couvrez nos menus pour commencer.</p></div>`;
    footerEl.style.display = 'none';
  } else {
    itemsEl.innerHTML = cart.map(i => `
      <div class="cart-item">
        <div class="cart-item-img"><img src="${i.img}" alt="${i.name}"></div>
        <div class="cart-item-info">
          <div class="cart-item-name">${i.name}</div>
          <div class="cart-item-price">${i.price.toFixed(2).replace('.', ',')} â‚¬/pers.</div>
        </div>
        <div class="cart-item-qty">
          <button onclick="changeCartQty(${i.id}, -1)">âˆ’</button>
          <span>${i.qty}</span>
          <button onclick="changeCartQty(${i.id}, 1)">+</button>
        </div>
        <div class="cart-item-total">${(i.price * i.qty).toFixed(2).replace('.', ',')} â‚¬</div>
      </div>
    `).join('');
    document.getElementById('cartTotal').textContent = total.toFixed(2).replace('.', ',') + ' â‚¬';
    footerEl.style.display = 'block';
  }
}

function changeCartQty(id, delta) {
  const idx = cart.findIndex(i => i.id === id);
  if (idx === -1) return;
  cart[idx].qty += delta;
  if (cart[idx].qty <= 0) cart.splice(idx, 1);
  updateCart();
}

function toggleCart() {
  document.getElementById('cartOverlay').classList.toggle('open');
  document.body.style.overflow = document.getElementById('cartOverlay').classList.contains('open') ? 'hidden' : '';
}

function closeCartOutside(e) {
  if (e.target === document.getElementById('cartOverlay')) toggleCart();
}

// â”€â”€â”€ CHECKOUT â”€â”€â”€
function openCheckout() {
  requireAuth(() => {
    toggleCart();
    const total = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
    document.getElementById('co_subtotal').textContent = total.toFixed(2).replace('.', ',') + ' â‚¬';
    document.getElementById('co_total').textContent = total.toFixed(2).replace('.', ',') + ' â‚¬';
    document.getElementById('checkoutStep1').style.display = 'block';
    document.getElementById('checkoutStep2').style.display = 'none';
    document.getElementById('step2').classList.remove('active');
    // Pre-fill checkout with user data
    if (currentUser) {
      const el = document.getElementById('co_prenom');
      const el2 = document.getElementById('co_email');
      if (el) el.value = currentUser.prenom || '';
      if (el2) el2.value = currentUser.email || '';
    }
    document.getElementById('checkoutOverlay').classList.add('open');
    document.body.style.overflow = 'hidden';
  });
}

function goToPayment() {
  document.getElementById('checkoutStep1').style.display = 'none';
  document.getElementById('checkoutStep2').style.display = 'block';
  document.getElementById('step2').classList.add('active');
}

function backToDelivery() {
  document.getElementById('checkoutStep1').style.display = 'block';
  document.getElementById('checkoutStep2').style.display = 'none';
  document.getElementById('step2').classList.remove('active');
}

function confirmOrder() {
  document.getElementById('checkoutModal').innerHTML = `
    <div class="confirmed-msg" style="padding:4rem 2rem">
      <div class="icon">ðŸŽ‰</div>
      <h3>Commande confirmÃ©e !</h3>
      <p style="margin-top:.8rem">Merci pour votre commande. Vous recevrez une confirmation par email dans quelques minutes.<br><br>Notre Ã©quipe vous contactera pour finaliser les dÃ©tails de votre Ã©vÃ©nement.</p>
      <button class="btn-primary" style="margin-top:2rem" onclick="closeCheckout();cart=[];updateCart();">Retour Ã  l'accueil</button>
    </div>
  `;
}

function closeCheckout() {
  document.getElementById('checkoutOverlay').classList.remove('open');
  document.body.style.overflow = '';
}

function closeCheckoutOutside(e) {
  if (e.target === document.getElementById('checkoutOverlay')) closeCheckout();
}

// â”€â”€â”€ CARD FORMATTING â”€â”€â”€
function formatCard(input) {
  let v = input.value.replace(/\s/g, '').replace(/\D/g, '');
  let chunks = v.match(/.{1,4}/g);
  input.value = chunks ? chunks.join(' ') : v;
}
function formatExpiry(input) {
  let v = input.value.replace(/\D/g, '');
  if (v.length > 2) v = v.substring(0,2) + '/' + v.substring(2);
  input.value = v;
}

// â”€â”€â”€ AUTH STATE â”€â”€â”€
let isLoggedIn = false;
let currentUser = null;

function updateNavAuth() {
  const btnLogin = document.getElementById('navConnexion');
  const btnRegister = document.getElementById('navInscrire');
  const btnUser = document.getElementById('navUser');
  if (isLoggedIn && currentUser) {
    btnLogin.style.display = 'none';
    btnRegister.style.display = 'none';
    btnUser.style.display = 'flex';
    document.getElementById('navUserName').textContent = currentUser.prenom;
  } else {
    btnLogin.style.display = '';
    btnRegister.style.display = '';
    btnUser.style.display = 'none';
  }
}

function handleLogin() {
  const email = document.getElementById('login_email').value.trim();
  const password = document.getElementById('login_password').value;
  if (!email || !password) { showToast('Veuillez remplir tous les champs.'); return; }
  // Simulate login â€” in production this would call an API
  isLoggedIn = true;
  currentUser = { prenom: email.split('@')[0], email };
  closeLogin();
  updateNavAuth();
  showToast('Bienvenue ' + currentUser.prenom + ' !');
  // If a deferred action exists, execute it
  if (pendingAction) { pendingAction(); pendingAction = null; }
}

// â”€â”€â”€ PASSWORD VALIDATION â”€â”€â”€
function validatePassword(pwd) {
  if (pwd.length < 10)            return 'Le mot de passe doit contenir au moins 10 caractÃ¨res.';
  if (!/[A-Z]/.test(pwd))         return 'Le mot de passe doit contenir au moins une majuscule.';
  if (!/[a-z]/.test(pwd))         return 'Le mot de passe doit contenir au moins une minuscule.';
  if (!/[0-9]/.test(pwd))         return 'Le mot de passe doit contenir au moins un chiffre.';
  if (!/[^A-Za-z0-9]/.test(pwd))  return 'Le mot de passe doit contenir au moins un caractÃ¨re spÃ©cial (!@#$%...).';
  return null;
}

function checkPasswordStrength(pwd) {
  let score = 0;
  if (pwd.length >= 10)           score++;
  if (/[A-Z]/.test(pwd))          score++;
  if (/[a-z]/.test(pwd))          score++;
  if (/[0-9]/.test(pwd))          score++;
  if (/[^A-Za-z0-9]/.test(pwd))   score++;
  return score; // 0â€“5
}

function updatePasswordUI() {
  const pwd = document.getElementById('reg_password').value;
  const score = checkPasswordStrength(pwd);
  const bar = document.getElementById('pwdStrengthBar');
  const label = document.getElementById('pwdStrengthLabel');
  const rules = {
    rule_len:     pwd.length >= 10,
    rule_upper:   /[A-Z]/.test(pwd),
    rule_lower:   /[a-z]/.test(pwd),
    rule_digit:   /[0-9]/.test(pwd),
    rule_special: /[^A-Za-z0-9]/.test(pwd),
  };
  // Update rule checklist
  Object.entries(rules).forEach(([id, ok]) => {
    const el = document.getElementById(id);
    if (el) {
      el.style.color = ok ? '#2d7a3a' : 'var(--text-light)';
      el.querySelector('.rule-icon').textContent = ok ? 'âœ“' : 'â—‹';
    }
  });
  // Strength bar
  const colors = ['#e0e0e0','#e53935','#ff9800','#fdd835','#66bb6a','#2e7d32'];
  const labels = ['','TrÃ¨s faible','Faible','Moyen','Fort','TrÃ¨s fort'];
  if (bar) { bar.style.width = (score * 20) + '%'; bar.style.background = colors[score]; }
  if (label) { label.textContent = pwd.length ? labels[score] : ''; label.style.color = colors[score]; }
}

function handleRegister() {
  const prenom = document.getElementById('reg_prenom').value.trim();
  const nom = document.getElementById('reg_nom').value.trim();
  const email = document.getElementById('reg_email').value.trim();
  const password = document.getElementById('reg_password').value;
  const password2 = document.getElementById('reg_password2').value;
  if (!prenom || !nom || !email || !password) { showToast('Veuillez remplir tous les champs.'); return; }
  if (password !== password2) { showToast('Les mots de passe ne correspondent pas.'); return; }
  const pwdError = validatePassword(password);
  if (pwdError) { showToast(pwdError); return; }
  // Simulate registration
  isLoggedIn = true;
  currentUser = { prenom, nom, email };
  closeLogin();
  updateNavAuth();
  showToast('Compte crÃ©Ã© ! Bienvenue ' + prenom + ' ðŸŽ‰');
  if (pendingAction) { pendingAction(); pendingAction = null; }
}

function handleLogout() {
  isLoggedIn = false;
  currentUser = null;
  cart = [];
  updateCart();
  updateNavAuth();
  showToast('Vous Ãªtes dÃ©connectÃ©(e).');
}

// Pending action to execute after login
let pendingAction = null;

function requireAuth(action) {
  if (isLoggedIn) {
    action();
  } else {
    pendingAction = action;
    document.getElementById('authRequiredOverlay').classList.add('open');
    document.body.style.overflow = 'hidden';
  }
}

function closeAuthRequired(e) {
  if (!e || e.target === document.getElementById('authRequiredOverlay')) {
    document.getElementById('authRequiredOverlay').classList.remove('open');
    document.body.style.overflow = '';
  }
}

// â”€â”€â”€ DASHBOARD â”€â”€â”€
// Sample order history
const sampleOrders = [
  {
    id: 'VG-2026-001', menu: 'Menu Gastronomique', persons: 8, date: '14/02/2026',
    event: '14/02/2026', status: 'completed', total: 360,
    venue: '12 rue des Fleurs, Bordeaux', notes: '',
    history: [
      { status: 'received',  date: '14/02/2026 09:12' },
      { status: 'accepted',  date: '14/02/2026 10:05' },
      { status: 'preparing', date: '14/02/2026 14:30' },
      { status: 'delivering',date: '14/02/2026 18:00' },
      { status: 'delivered', date: '14/02/2026 19:15' },
      { status: 'completed', date: '14/02/2026 19:20' }
    ],
    review: null
  },
  {
    id: 'VG-2026-002', menu: 'Menu NoÃ«l Prestige', persons: 12, date: '28/01/2026',
    event: '31/12/2025', status: 'completed', total: 780,
    venue: '5 avenue des ChÃ¢taigniers, Pessac', notes: 'Sans noix pour 2 convives',
    history: [
      { status: 'received',  date: '28/01/2026 11:00' },
      { status: 'accepted',  date: '28/01/2026 11:45' },
      { status: 'preparing', date: '28/01/2026 15:00' },
      { status: 'delivering',date: '31/12/2025 17:00' },
      { status: 'delivered', date: '31/12/2025 19:30' },
      { status: 'awaiting_return', date: '31/12/2025 19:31' },
      { status: 'completed', date: '08/01/2026 10:00' }
    ],
    review: { rating: 5, comment: 'Excellent ! Tout Ã©tait parfait.', validated: true }
  },
  {
    id: 'VG-2026-003', menu: 'Menu Buffet Festif', persons: 25, date: '05/02/2026',
    event: '22/02/2026', status: 'accepted', total: 950,
    venue: '18 cours Victor Hugo, Bordeaux', notes: '',
    history: [
      { status: 'received', date: '05/02/2026 08:55' },
      { status: 'accepted', date: '05/02/2026 10:10' }
    ],
    review: null
  },
  {
    id: 'VG-2026-004', menu: 'Menu Cocktail Prestige', persons: 30, date: '10/02/2026',
    event: '01/03/2026', status: 'received', total: 1260,
    venue: '47 cours de l\'Intendance, Bordeaux', notes: 'PrÃ©voir option vegan x5',
    history: [
      { status: 'received', date: '10/02/2026 14:22' }
    ],
    review: null
  },
];

let userAddresses = [
  { id: 1, label: 'Domicile', street: '15 allÃ©e des Roses', zip: '33000', city: 'Bordeaux', extra: 'BÃ¢t. B, code 4521' },
  { id: 2, label: 'Bureau', street: '47 cours de l\'Intendance', zip: '33000', city: 'Bordeaux', extra: '' },
];

// â”€â”€â”€ USER ORDER STATUS MAP â”€â”€â”€
const uoStatusMap = {
  received:       { label: 'ReÃ§ue',                 cls: 'status-received' },
  accepted:       { label: 'AcceptÃ©e',               cls: 'status-accepted' },
  preparing:      { label: 'En prÃ©paration',         cls: 'status-preparing' },
  delivering:     { label: 'En cours de livraison',  cls: 'status-delivering' },
  delivered:      { label: 'LivrÃ©e',                 cls: 'status-delivered' },
  awaiting_return:{ label: 'Retour matÃ©riel',        cls: 'status-awaiting_return' },
  completed:      { label: 'TerminÃ©e',               cls: 'status-completed' },
  cancelled:      { label: 'AnnulÃ©e',                cls: 'status-cancelled' },
};

function openDashboard() {
  if (!isLoggedIn || !currentUser) { showLogin('login'); return; }
  const overlay = document.getElementById('dashOverlay');
  document.getElementById('dashAvatar').textContent = (currentUser.prenom || '?')[0].toUpperCase();
  document.getElementById('dashName').textContent = (currentUser.prenom || '') + ' ' + (currentUser.nom || '');
  document.getElementById('dashEmail').textContent = currentUser.email || '';
  document.getElementById('prof_prenom').value = currentUser.prenom || '';
  document.getElementById('prof_nom').value = currentUser.nom || '';
  document.getElementById('prof_email').value = currentUser.email || '';
  document.getElementById('prof_tel').value = currentUser.tel || '';
  document.getElementById('prof_birth').value = currentUser.birth || '';
  document.getElementById('prof_diet').value = currentUser.diet || '';
  document.getElementById('prof_allergies').value = currentUser.allergies || '';
  renderOrders();
  renderAddresses();
  switchDashTab('orders', document.querySelector('.dash-tab'));
  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeDashboard() {
  document.getElementById('dashOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeDashOutside(e) {
  if (e.target === document.getElementById('dashOverlay')) closeDashboard();
}

function switchDashTab(name, btn) {
  document.querySelectorAll('.dash-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.dash-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('dash-' + name).classList.add('active');
  if (btn) btn.classList.add('active');
}

// â”€â”€â”€ RENDER ORDERS â”€â”€â”€
function renderOrders() {
  const list = document.getElementById('ordersList');
  if (!sampleOrders.length) {
    list.innerHTML = '<div class="dash-empty"><div class="icon">ðŸ“¦</div><p>Aucune commande pour le moment.</p></div>';
    return;
  }
  list.innerHTML = sampleOrders.map(o => {
    const s = uoStatusMap[o.status] || uoStatusMap.received;
    const canEdit   = o.status === 'received';
    const canCancel = o.status === 'received';
    const isAccepted = !['received','cancelled'].includes(o.status);
    const isDone = o.status === 'completed';
    const canReview = isDone;

    // Timeline (only shown if order is accepted or beyond)
    let timelineHtml = '';
    if (isAccepted && o.history && o.history.length) {
      const steps = o.history.map((h, i) => {
        const sm = uoStatusMap[h.status] || {};
        const isLast = i === o.history.length - 1;
        return `<div class="uo-tl-item">
          <div class="uo-tl-dot${isLast ? ' active' : ''}"></div>
          <div class="uo-tl-body">
            <div class="uo-tl-label">${sm.label || h.status}</div>
            <div class="uo-tl-date">${h.date}</div>
          </div>
        </div>`;
      }).join('');
      timelineHtml = `<div class="uo-timeline">
        <div class="uo-timeline-title">Suivi de commande</div>
        ${steps}
      </div>`;
    }

    // Review display
    let reviewHtml = '';
    if (o.review) {
      const stars = [1,2,3,4,5].map(i => `<span class="star${i > o.review.rating ? ' empty' : ''}">â˜…</span>`).join('');
      const badge = o.review.validated
        ? '<span style="font-size:.7rem;padding:.15rem .5rem;border-radius:100px;background:rgba(45,122,58,.1);color:#2d7a3a;margin-left:.5rem">PubliÃ©</span>'
        : '<span style="font-size:.7rem;padding:.15rem .5rem;border-radius:100px;background:rgba(0,0,0,.06);color:var(--text-light);margin-left:.5rem">En attente de validation</span>';
      reviewHtml = `<div style="padding:.6rem 1.1rem .9rem;border-top:1px solid rgba(0,0,0,.05)">
        <div style="font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text-light);margin-bottom:.4rem">Mon avis${badge}</div>
        <div class="star-display">${stars}</div>
        <div style="font-size:.8rem;color:var(--text-light);margin-top:.35rem;font-style:italic">"${o.review.comment}"</div>
      </div>`;
    }

    return `<div class="uo-card">
      <div class="uo-header">
        <div>
          <div class="uo-ref">RÃ©f. ${o.id}</div>
          <div class="uo-menu">${o.menu}</div>
        </div>
        <span class="order-status ${s.cls}">${s.label}</span>
      </div>
      <div class="uo-meta">
        <span>ðŸ‘¥ ${o.persons} pers.</span>
        <span>ðŸ“… Ã‰vÃ©nement : ${o.event}</span>
        <span>ðŸ—“ CommandÃ© le ${o.date}</span>
        ${o.venue ? `<span>ðŸ“ ${o.venue}</span>` : ''}
        ${o.notes ? `<span>ðŸ“ ${o.notes}</span>` : ''}
      </div>
      <div class="uo-total">
        <span class="uo-total-price">${o.total.toLocaleString('fr-FR', {minimumFractionDigits:2})} â‚¬</span>
        <div class="uo-actions">
          ${canEdit   ? `<button class="uo-btn" onclick="openUoEdit('${o.id}')">âœï¸ Modifier</button>` : ''}
          ${canCancel ? `<button class="uo-btn uo-btn-cancel" onclick="cancelUoOrder('${o.id}')">âœ• Annuler</button>` : ''}
          ${canReview && !o.review ? `<button class="uo-btn uo-btn-review" onclick="openUoReview('${o.id}')">â­ Donner mon avis</button>` : ''}
          ${canReview && o.review  ? `<button class="uo-btn uo-btn-review" onclick="openUoReview('${o.id}')">âœï¸ Mon avis</button>` : ''}
          <button class="uo-btn" onclick="showToast('Facture ${o.id} tÃ©lÃ©chargÃ©e !')">ðŸ“„ Facture</button>
        </div>
      </div>
      ${timelineHtml}
      ${reviewHtml}
    </div>`;
  }).join('');
}

// â”€â”€â”€ CANCEL ORDER â”€â”€â”€
function cancelUoOrder(id) {
  const o = sampleOrders.find(x => x.id === id);
  if (!o || o.status !== 'received') { showToast('Cette commande ne peut plus Ãªtre annulÃ©e.'); return; }
  if (!confirm('Voulez-vous vraiment annuler la commande ' + id + ' ?')) return;
  o.status = 'cancelled';
  o.history.push({ status: 'cancelled', date: new Date().toLocaleDateString('fr-FR') + ' ' + new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}) });
  renderOrders();
  showToast('Commande ' + id + ' annulÃ©e.');
}

// â”€â”€â”€ EDIT ORDER â”€â”€â”€
function openUoEdit(id) {
  const o = sampleOrders.find(x => x.id === id);
  if (!o) return;
  document.getElementById('uoEditId').value      = id;
  document.getElementById('uoEditMenu').value    = o.menu;
  document.getElementById('uoEditPersons').value = o.persons;
  // Convert DD/MM/YYYY â†’ YYYY-MM-DD for date input
  const p = o.event.split('/');
  document.getElementById('uoEditEvent').value = p.length===3 ? `${p[2]}-${p[1]}-${p[0]}` : '';
  document.getElementById('uoEditVenue').value  = o.venue || '';
  document.getElementById('uoEditNotes').value  = o.notes || '';
  document.getElementById('uoEditOverlay').classList.add('open');
}
function closeUoEdit() {
  document.getElementById('uoEditOverlay').classList.remove('open');
}
function saveUoEdit() {
  const id = document.getElementById('uoEditId').value;
  const o  = sampleOrders.find(x => x.id === id);
  if (!o || o.status !== 'received') { showToast('Modification impossible.'); closeUoEdit(); return; }
  const persons = parseInt(document.getElementById('uoEditPersons').value, 10);
  const eventVal = document.getElementById('uoEditEvent').value;
  if (!persons || persons < 1) { showToast('Nombre de personnes invalide.'); return; }
  // Convert YYYY-MM-DD â†’ DD/MM/YYYY
  let eventStr = o.event;
  if (eventVal) {
    const [y,m,d] = eventVal.split('-');
    eventStr = `${d}/${m}/${y}`;
  }
  o.persons = persons;
  o.event   = eventStr;
  o.venue   = document.getElementById('uoEditVenue').value.trim();
  o.notes   = document.getElementById('uoEditNotes').value.trim();
  closeUoEdit();
  renderOrders();
  showToast('Commande ' + id + ' mise Ã  jour.');
}

// â”€â”€â”€ REVIEW â”€â”€â”€
let _uoReviewRating = 0;

function openUoReview(id) {
  const o = sampleOrders.find(x => x.id === id);
  if (!o) return;
  document.getElementById('uoReviewId').value = id;
  _uoReviewRating = o.review ? o.review.rating : 0;
  document.getElementById('uoReviewComment').value = o.review ? o.review.comment : '';
  const existing = document.getElementById('uoReviewExisting');
  if (o.review) {
    existing.style.display = 'block';
    existing.innerHTML = '<strong>Vous avez dÃ©jÃ  soumis un avis.</strong> Vous pouvez le modifier ci-dessous.';
  } else {
    existing.style.display = 'none';
  }
  renderStars(_uoReviewRating);
  document.getElementById('uoReviewOverlay').classList.add('open');
}
function closeUoReview() {
  document.getElementById('uoReviewOverlay').classList.remove('open');
}
function selectStar(v) {
  _uoReviewRating = v;
  renderStars(v);
}
function renderStars(v) {
  document.querySelectorAll('#uoStarRating .star').forEach(s => {
    s.classList.toggle('selected', parseInt(s.dataset.v, 10) <= v);
  });
}
function saveUoReview() {
  const id = document.getElementById('uoReviewId').value;
  const o  = sampleOrders.find(x => x.id === id);
  if (!o) return;
  if (!_uoReviewRating) { showToast('Veuillez sÃ©lectionner une note.'); return; }
  const comment = document.getElementById('uoReviewComment').value.trim();
  if (!comment) { showToast('Veuillez Ã©crire un commentaire.'); return; }
  o.review = { rating: _uoReviewRating, comment, validated: false };
  closeUoReview();
  renderOrders();
  showToast('Merci pour votre avis ! Il sera publiÃ© aprÃ¨s validation.');
}

// Profile
function saveProfile() {
  currentUser.prenom   = document.getElementById('prof_prenom').value.trim();
  currentUser.nom      = document.getElementById('prof_nom').value.trim();
  currentUser.email    = document.getElementById('prof_email').value.trim();
  currentUser.tel      = document.getElementById('prof_tel').value.trim();
  currentUser.birth    = document.getElementById('prof_birth').value;
  currentUser.diet     = document.getElementById('prof_diet').value;
  currentUser.allergies = document.getElementById('prof_allergies').value.trim();
  document.getElementById('dashName').textContent = currentUser.prenom + ' ' + currentUser.nom;
  document.getElementById('dashEmail').textContent = currentUser.email;
  document.getElementById('dashAvatar').textContent = (currentUser.prenom || '?')[0].toUpperCase();
  document.getElementById('navUserName').textContent = currentUser.prenom;
  showToast('Profil mis Ã  jour avec succÃ¨s !');
}

// Addresses
function renderAddresses() {
  const list = document.getElementById('addressesList');
  if (userAddresses.length === 0) {
    list.innerHTML = '<div class="dash-empty"><div class="icon">ðŸ“</div><p>Aucune adresse enregistrÃ©e.</p></div>';
    return;
  }
  list.innerHTML = userAddresses.map((a, i) => `
    <div class="address-card">
      <div>
        <span class="address-badge">${a.label}</span>
        <div class="address-text">
          ${a.street}<br>
          ${a.zip} ${a.city}
          ${a.extra ? '<br><span style="color:var(--text-light);font-size:.8rem">' + a.extra + '</span>' : ''}
        </div>
      </div>
      <div class="address-actions">
        <button class="btn-icon" onclick="editAddress(${a.id})">âœï¸ Modifier</button>
        <button class="btn-icon danger" onclick="deleteAddress(${a.id})">ðŸ—‘ Supprimer</button>
      </div>
    </div>`).join('');
}

function showAddAddressForm() {
  document.getElementById('addr_label').value = '';
  document.getElementById('addr_street').value = '';
  document.getElementById('addr_zip').value = '';
  document.getElementById('addr_city').value = '';
  document.getElementById('addr_extra').value = '';
  document.getElementById('addAddressForm').style.display = 'block';
}

function saveAddress() {
  const label  = document.getElementById('addr_label').value.trim() || 'Adresse';
  const street = document.getElementById('addr_street').value.trim();
  const zip    = document.getElementById('addr_zip').value.trim();
  const city   = document.getElementById('addr_city').value.trim();
  const extra  = document.getElementById('addr_extra').value.trim();
  if (!street || !zip || !city) { showToast('Veuillez remplir les champs obligatoires.'); return; }
  const newId = Date.now();
  userAddresses.push({ id: newId, label, street, zip, city, extra });
  document.getElementById('addAddressForm').style.display = 'none';
  renderAddresses();
  showToast('Adresse ajoutÃ©e !');
}

function editAddress(id) {
  const a = userAddresses.find(x => x.id === id);
  if (!a) return;
  document.getElementById('addr_label').value  = a.label;
  document.getElementById('addr_street').value = a.street;
  document.getElementById('addr_zip').value    = a.zip;
  document.getElementById('addr_city').value   = a.city;
  document.getElementById('addr_extra').value  = a.extra;
  document.getElementById('addAddressForm').style.display = 'block';
  // Remove old and re-save
  userAddresses = userAddresses.filter(x => x.id !== id);
  renderAddresses();
}

function deleteAddress(id) {
  userAddresses = userAddresses.filter(x => x.id !== id);
  renderAddresses();
  showToast('Adresse supprimÃ©e.');
}

// Security
function updateSecPasswordUI() {
  const pwd = document.getElementById('sec_new').value;
  const score = checkPasswordStrength(pwd);
  const bar = document.getElementById('secPwdBar');
  const rules = { srule_len: pwd.length >= 10, srule_upper: /[A-Z]/.test(pwd), srule_lower: /[a-z]/.test(pwd), srule_digit: /[0-9]/.test(pwd), srule_special: /[^A-Za-z0-9]/.test(pwd) };
  Object.entries(rules).forEach(([id, ok]) => {
    const el = document.getElementById(id);
    if (el) { el.style.color = ok ? '#2d7a3a' : 'var(--text-light)'; el.querySelector('.rule-icon').textContent = ok ? 'âœ“' : 'â—‹'; }
  });
  const colors = ['#e0e0e0','#e53935','#ff9800','#fdd835','#66bb6a','#2e7d32'];
  if (bar) { bar.style.width = (score * 20) + '%'; bar.style.background = colors[score]; }
}

function changePassword() {
  const current = document.getElementById('sec_current').value;
  const newPwd  = document.getElementById('sec_new').value;
  const confirm = document.getElementById('sec_confirm').value;
  if (!current) { showToast('Veuillez saisir votre mot de passe actuel.'); return; }
  const err = validatePassword(newPwd);
  if (err) { showToast(err); return; }
  if (newPwd !== confirm) { showToast('Les mots de passe ne correspondent pas.'); return; }
  document.getElementById('sec_current').value = '';
  document.getElementById('sec_new').value = '';
  document.getElementById('sec_confirm').value = '';
  updateSecPasswordUI();
  showToast('Mot de passe mis Ã  jour avec succÃ¨s !');
}

function confirmDeleteAccount() {
  if (confirm('ÃŠtes-vous sÃ»r(e) de vouloir supprimer votre compte ? Cette action est irrÃ©versible.')) {
    closeDashboard();
    handleLogout();
    showToast('Compte supprimÃ©. Ã€ bientÃ´t !');
  }
}

// Prefs
function savePrefs() {
  showToast('PrÃ©fÃ©rences enregistrÃ©es !');
}

// Override logout to close dashboard too
function handleLogout() {
  isLoggedIn = false;
  currentUser = null;
  cart = [];
  updateCart();
  updateNavAuth();
  closeDashboard();
  showToast('Vous Ãªtes dÃ©connectÃ©(e).');
}


let _resetCode = null;
let _resetEmail = null;

function showForgotPassword(e) {
  if (e) e.preventDefault();
  // Hide tabs
  document.getElementById('tabLogin').closest('div').style.display = 'none';
  document.getElementById('authModalTitle').textContent = 'Mot de passe oubliÃ©';
  document.getElementById('formLogin').style.display = 'none';
  document.getElementById('formRegister').style.display = 'none';
  showForgotStep(1);
}

function showForgotStep(step) {
  ['formForgot1','formForgot2','formForgot3'].forEach((id, i) => {
    const el = document.getElementById(id);
    el.style.display = (i + 1 === step) ? 'flex' : 'none';
  });
}

function sendResetCode() {
  const email = document.getElementById('forgot_email').value.trim();
  if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    showToast('Veuillez saisir une adresse email valide.'); return;
  }
  _resetEmail = email;
  // GÃ©nÃ¨re un code simulÃ© Ã  6 chiffres
  _resetCode = String(Math.floor(100000 + Math.random() * 900000));
  document.getElementById('forgot_email_display').textContent = email;
  // Affiche le code dans l'indice (en prod, il serait envoyÃ© par email)
  const hint = document.getElementById('forgot_code_hint');
  hint.textContent = 'ðŸ’¡ Code de dÃ©monstration : ' + _resetCode;
  hint.style.display = 'block';
  showForgotStep(2);
  showToast('Code envoyÃ© Ã  ' + email + ' !');
}

function resendCode(e) {
  e.preventDefault();
  _resetCode = String(Math.floor(100000 + Math.random() * 900000));
  const hint = document.getElementById('forgot_code_hint');
  hint.textContent = 'ðŸ’¡ Nouveau code de dÃ©monstration : ' + _resetCode;
  hint.style.display = 'block';
  document.getElementById('forgot_code').value = '';
  showToast('Nouveau code envoyÃ© !');
}

function verifyResetCode() {
  const entered = document.getElementById('forgot_code').value.trim();
  if (!entered || entered.length !== 6) {
    showToast('Veuillez saisir le code Ã  6 chiffres.'); return;
  }
  if (entered !== _resetCode) {
    showToast('Code incorrect. Veuillez rÃ©essayer.'); return;
  }
  document.getElementById('authModalTitle').textContent = 'Nouveau mot de passe';
  showForgotStep(3);
}

function updateNewPasswordUI() {
  const pwd = document.getElementById('new_password').value;
  const score = checkPasswordStrength(pwd);
  const bar = document.getElementById('newPwdStrengthBar');
  const label = document.getElementById('newPwdStrengthLabel');
  const rules = {
    nrule_len:     pwd.length >= 10,
    nrule_upper:   /[A-Z]/.test(pwd),
    nrule_lower:   /[a-z]/.test(pwd),
    nrule_digit:   /[0-9]/.test(pwd),
    nrule_special: /[^A-Za-z0-9]/.test(pwd),
  };
  Object.entries(rules).forEach(([id, ok]) => {
    const el = document.getElementById(id);
    if (el) { el.style.color = ok ? '#2d7a3a' : 'var(--text-light)'; el.querySelector('.rule-icon').textContent = ok ? 'âœ“' : 'â—‹'; }
  });
  const colors = ['#e0e0e0','#e53935','#ff9800','#fdd835','#66bb6a','#2e7d32'];
  const labels = ['','TrÃ¨s faible','Faible','Moyen','Fort','TrÃ¨s fort'];
  if (bar) { bar.style.width = (score * 20) + '%'; bar.style.background = colors[score]; }
  if (label) { label.textContent = pwd.length ? labels[score] : ''; label.style.color = colors[score]; }
}

function resetPassword() {
  const pwd = document.getElementById('new_password').value;
  const pwd2 = document.getElementById('new_password2').value;
  if (!pwd) { showToast('Veuillez saisir un nouveau mot de passe.'); return; }
  const err = validatePassword(pwd);
  if (err) { showToast(err); return; }
  if (pwd !== pwd2) { showToast('Les mots de passe ne correspondent pas.'); return; }
  // RÃ©initialisation rÃ©ussie
  closeLogin();
  showToast('Mot de passe rÃ©initialisÃ© avec succÃ¨s ! Vous pouvez vous connecter.');
  // RÃ©affiche les onglets pour la prochaine ouverture
  _resetCode = null; _resetEmail = null;
}

// Restore tabs when closing modal
const _origCloseLogin = closeLogin;
function closeLogin() {
  _origCloseLogin();
  const tabsDiv = document.getElementById('tabLogin');
  if (tabsDiv) tabsDiv.closest('div').style.display = 'flex';
  document.getElementById('authModalTitle').textContent = 'Connexion';
}

function switchAuthTab(tab) {
  const isLogin = tab === 'login';
  // Restore tabs visibility
  document.getElementById('tabLogin').closest('div').style.display = 'flex';
  document.getElementById('formForgot1').style.display = 'none';
  document.getElementById('formForgot2').style.display = 'none';
  document.getElementById('formForgot3').style.display = 'none';
  document.getElementById('formLogin').style.display = isLogin ? 'flex' : 'none';
  document.getElementById('formRegister').style.display = isLogin ? 'none' : 'flex';
  document.getElementById('tabLogin').style.borderBottomColor = isLogin ? 'var(--burgundy)' : 'transparent';
  document.getElementById('tabLogin').style.color = isLogin ? 'var(--burgundy)' : 'var(--text-light)';
  document.getElementById('tabRegister').style.borderBottomColor = isLogin ? 'transparent' : 'var(--burgundy)';
  document.getElementById('tabRegister').style.color = isLogin ? 'var(--text-light)' : 'var(--burgundy)';
  document.getElementById('authModalTitle').textContent = isLogin ? 'Connexion' : 'CrÃ©er un compte';
}

// â”€â”€â”€ LOGIN MODAL â”€â”€â”€
function showLogin(tab = 'login') {
  switchAuthTab(tab);
  document.getElementById('loginOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeLogin() {
  document.getElementById('loginOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeLoginOutside(e) {
  if (e.target === document.getElementById('loginOverlay')) closeLogin();
}

// â”€â”€â”€ CONTACT â”€â”€â”€
function submitContact(e) {
  e.preventDefault();
  showToast('Votre message a Ã©tÃ© envoyÃ© !');
  e.target.reset();
}

// â”€â”€â”€ TOAST â”€â”€â”€
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = 'âœ“  ' + msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}

// â”€â”€â”€ REVIEWS â”€â”€â”€
function renderReviews() {
  document.getElementById('reviewsGrid').innerHTML = reviews.map(r => `
    <div class="review-card">
      <div class="stars">${'â˜…'.repeat(r.stars)}${'â˜†'.repeat(5 - r.stars)}</div>
      <p class="review-text">"${r.text}"</p>
      <div class="reviewer">
        <div class="reviewer-avatar">${r.name[0]}</div>
        <div>
          <div class="reviewer-name">${r.name}</div>
          <div class="reviewer-date">${r.date}</div>
        </div>
      </div>
    </div>
  `).join('');
}

// â”€â”€â”€ CGV â”€â”€â”€
function openCGV(e) {
  e.preventDefault();
  document.getElementById('cgvOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeCGV() {
  document.getElementById('cgvOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeCGVOutside(e) {
  if (e.target === document.getElementById('cgvOverlay')) closeCGV();
}

// â”€â”€â”€ MENTIONS LÃ‰GALES â”€â”€â”€
function openMentions(e) {
  e.preventDefault();
  document.getElementById('mentionsOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeMentions() {
  document.getElementById('mentionsOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeMentionsOutside(e) {
  if (e.target === document.getElementById('mentionsOverlay')) closeMentions();
}

// â”€â”€â”€ NAV SCROLL â”€â”€â”€
window.addEventListener('scroll', () => {
  document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 40);
});

// â”€â”€â”€ ADMIN â”€â”€â”€
let isAdmin = false;

// Simulated NoSQL database (Firebase/Firestore-like structure)
const noSqlDb = {
  name: 'vg-nosql-db',
  collections: {}
};

let employeeAccounts = (function() {
  try { const s = localStorage.getItem('vg_employees'); return s ? JSON.parse(s) : null; } catch(e) { return null; }
})() || [
  { id: 'emp_001', email: 'employe@vg.fr', displayName: 'EmployÃ© VG', active: true, createdAt: '01/01/2026' }
];
noSqlDb.collections.employees = employeeAccounts;

function saveEmployeesToDb() {
  try { localStorage.setItem('vg_employees', JSON.stringify(employeeAccounts)); } catch(e) {}
  noSqlDb.collections.employees = employeeAccounts;
}

// Override handleLogin â€” final version: admin + employee + user
function handleLogin() {
  const email    = document.getElementById('login_email').value.trim();
  const password = document.getElementById('login_password').value;
  if (!email || !password) { showToast('Veuillez remplir tous les champs.'); return; }

  if (email === 'jose@vg.fr' || email === 'admin@vg.fr') {
    isAdmin = true; isEmployee = false; isLoggedIn = true;
    currentUser = { prenom: 'JosÃ©', nom: 'Lebon', email, role: 'admin' };
  } else {
    const accMatch = employeeAccounts.find(e => e.email.toLowerCase() === email.toLowerCase());
    const isEmpByEmail = email.toLowerCase().startsWith('employe') || !!accMatch;
    if (isEmpByEmail) {
      if (accMatch && !accMatch.active) { showToast('Ce compte employÃ© est dÃ©sactivÃ©. Contactez l\'administrateur.'); return; }
      isAdmin = false; isEmployee = true; isLoggedIn = true;
      const dname = accMatch ? accMatch.displayName : 'EmployÃ©';
      currentUser = { prenom: dname.split(' ')[0], nom: dname.split(' ').slice(1).join(' '), email, role: 'employee' };
    } else {
      isAdmin = false; isEmployee = false; isLoggedIn = true;
      currentUser = { prenom: email.split('@')[0], email, role: 'user' };
    }
  }
  closeLogin();
  updateNavAuth();
  showToast('Bienvenue ' + currentUser.prenom + ' !');
  if (pendingAction) { pendingAction(); pendingAction = null; }
}

// Override handleLogout â€” resets all flags
function handleLogout() {
  isLoggedIn = false; isEmployee = false; isAdmin = false;
  currentUser = null;
  cart = [];
  renderCart();
  updateNavAuth();
  closeDashboard();
  showToast('Ã€ bientÃ´t !');
}

// Override updateNavAuth â€” final version: admin + employee + user
function updateNavAuth() {
  const btnLogin = document.getElementById('navConnexion');
  const btnReg   = document.getElementById('navInscrire');
  const btnUser  = document.getElementById('navUser');
  const btnEmp   = document.getElementById('navEmployee');
  const btnAdm   = document.getElementById('navAdmin');
  if (isLoggedIn && currentUser) {
    btnLogin.style.display = 'none';
    btnReg.style.display   = 'none';
    if (isAdmin) {
      btnUser.style.display = 'none';
      if (btnEmp) btnEmp.style.display = 'none';
      if (btnAdm) btnAdm.style.display = 'flex';
    } else if (isEmployee) {
      btnUser.style.display = 'none';
      if (btnEmp) btnEmp.style.display = 'flex';
      if (btnAdm) btnAdm.style.display = 'none';
    } else {
      btnUser.style.display = 'flex';
      document.getElementById('navUserName').textContent = currentUser.prenom;
      if (btnEmp) btnEmp.style.display = 'none';
      if (btnAdm) btnAdm.style.display = 'none';
    }
  } else {
    btnLogin.style.display = '';
    btnReg.style.display   = '';
    btnUser.style.display  = 'none';
    if (btnEmp) btnEmp.style.display = 'none';
    if (btnAdm) btnAdm.style.display = 'none';
    isAdmin = false; isEmployee = false;
  }
}

// â”€â”€â”€ ADMIN PANEL â”€â”€â”€
function openAdmPanel() {
  renderAdmEmployees();
  document.getElementById('admOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeAdmPanel() {
  document.getElementById('admOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeAdmOutside(e) {
  if (e.target === document.getElementById('admOverlay')) closeAdmPanel();
}
function switchAdmTab(name, btn) {
  document.querySelectorAll('.adm-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.adm-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('adm-' + name).classList.add('active');
  if (btn) btn.classList.add('active');
  if (name === 'stats')   { renderAdmStats(); }
  if (name === 'revenue') { renderAdmRevenue(); }
}

// Helper to open employee panel on a specific tab from admin
function openEmpSection(section) {
  closeAdmPanel();
  setTimeout(() => {
    openEmpPanel();
    const tabs = document.querySelectorAll('.emp-tab');
    const idx = ['orders','menus','reviews','hours'].indexOf(section);
    switchEmpTab(section, idx >= 0 ? tabs[idx] : null);
  }, 380);
}

// â”€â”€â”€ EMPLOYEE ACCOUNTS â”€â”€â”€
function renderAdmEmployees() {
  const list = document.getElementById('admEmployeesList');
  if (!employeeAccounts.length) {
    list.innerHTML = '<div class="dash-empty"><div class="icon">ðŸ‘¥</div><p>Aucun compte employÃ©.</p></div>';
    return;
  }
  list.innerHTML = employeeAccounts.map(e => `
    <div class="adm-emp-card">
      <div class="adm-emp-info">
        <div class="adm-emp-name">${e.displayName}</div>
        <div class="adm-emp-email">${e.email}</div>
        <div class="adm-emp-meta">CrÃ©Ã© le ${e.createdAt}</div>
      </div>
      <div class="adm-emp-right">
        <span class="order-status ${e.active ? 'status-accepted' : 'status-cancelled'}">${e.active ? 'Actif' : 'DÃ©sactivÃ©'}</span>
        <button class="${e.active ? 'btn-emp-cancel' : 'btn-emp-update'}" style="padding:.3rem .85rem;font-size:.7rem" onclick="toggleEmployeeAccount('${e.id}')">
          ${e.active ? 'ðŸ”’ DÃ©sactiver' : 'ðŸ”“ RÃ©activer'}
        </button>
      </div>
    </div>`).join('');
}

function createEmployeeAccount() {
  const email    = document.getElementById('newEmpEmail').value.trim();
  const name     = document.getElementById('newEmpName').value.trim();
  const password = document.getElementById('newEmpPassword').value;
  if (!email || !name || !password) { showToast('Veuillez remplir tous les champs.'); return; }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { showToast('Adresse email invalide.'); return; }
  if (employeeAccounts.some(e => e.email.toLowerCase() === email.toLowerCase())) {
    showToast('Un compte avec cet email existe dÃ©jÃ .'); return;
  }
  employeeAccounts.push({
    id: 'emp_' + Date.now(), email, displayName: name,
    active: true, createdAt: new Date().toLocaleDateString('fr-FR')
  });
  saveEmployeesToDb();
  document.getElementById('newEmpEmail').value    = '';
  document.getElementById('newEmpName').value     = '';
  document.getElementById('newEmpPassword').value = '';
  renderAdmEmployees();
  showToast('âœ‰ï¸ Compte crÃ©Ã© Â· Notification envoyÃ©e Ã  ' + email + ' (mot de passe non communiquÃ©).');
}

function toggleEmployeeAccount(id) {
  const emp = employeeAccounts.find(e => e.id === id);
  if (!emp) return;
  emp.active = !emp.active;
  saveEmployeesToDb();
  renderAdmEmployees();
  showToast('Compte ' + emp.email + (emp.active ? ' rÃ©activÃ©.' : ' dÃ©sactivÃ©.'));
}

// â”€â”€â”€ STATISTICS â”€â”€â”€
let ordersChartInst   = null;
let revenueChartInst  = null;

function getOrdersGrouped(src) {
  src = src || allOrders;
  const g = {};
  src.forEach(o => {
    if (!g[o.menu]) g[o.menu] = { count: 0, revenue: 0 };
    g[o.menu].count++;
    g[o.menu].revenue += o.total;
  });
  return g;
}

function renderAdmStats() {
  const g = getOrdersGrouped();
  const labels   = Object.keys(g);
  const counts   = labels.map(l => g[l].count);
  const revenues = labels.map(l => g[l].revenue);
  const totalOrders  = allOrders.length;
  const totalRevenue = allOrders.reduce((s, o) => s + o.total, 0);

  document.getElementById('admStatCards').innerHTML = `
    <div class="adm-stat-card">
      <div class="adm-stat-num">${totalOrders}</div>
      <div class="adm-stat-lbl">Commandes totales</div>
    </div>
    <div class="adm-stat-card" style="border-left-color:var(--gold)">
      <div class="adm-stat-num" style="color:var(--gold)">${totalRevenue.toLocaleString('fr-FR',{minimumFractionDigits:2})} â‚¬</div>
      <div class="adm-stat-lbl">Chiffre d'affaires total</div>
    </div>
    <div class="adm-stat-card" style="border-left-color:#2d7a3a">
      <div class="adm-stat-num" style="color:#2d7a3a">${menus.length}</div>
      <div class="adm-stat-lbl">Menus actifs</div>
    </div>`;

  const ctx = document.getElementById('ordersChart').getContext('2d');
  if (ordersChartInst) { ordersChartInst.destroy(); ordersChartInst = null; }
  ordersChartInst = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels.map(l => l.length > 22 ? l.slice(0,20) + 'â€¦' : l),
      datasets: [
        { label: 'Nb commandes', data: counts, backgroundColor: 'rgba(123,28,42,0.75)', borderColor: 'rgba(123,28,42,1)', borderWidth: 1, borderRadius: 4, yAxisID: 'y' },
        { label: 'CA (â‚¬)',       data: revenues, backgroundColor: 'rgba(196,154,60,0.6)', borderColor: 'rgba(196,154,60,1)', borderWidth: 1, borderRadius: 4, yAxisID: 'y1' }
      ]
    },
    options: {
      responsive: true, maintainAspectRatio: false,
      plugins: {
        legend: { position: 'top', labels: { font: { family: 'DM Sans', size: 11 } } },
        title:  { display: true, text: 'Commandes & CA par menu', font: { family: 'Playfair Display', size: 13, weight: '700' } }
      },
      scales: {
        y:  { type: 'linear', position: 'left',  title: { display: true, text: 'Nb commandes' }, ticks: { stepSize: 1 }, beginAtZero: true },
        y1: { type: 'linear', position: 'right', title: { display: true, text: 'CA (â‚¬)' }, grid: { drawOnChartArea: false }, beginAtZero: true }
      }
    }
  });
}

// â”€â”€â”€ REVENUE (CA) â”€â”€â”€
function parseEventDate(str) {
  if (!str) return null;
  const p = str.split('/');
  return p.length === 3 ? new Date(+p[2], +p[1]-1, +p[0]) : null;
}

function renderAdmRevenue() {
  const sel = document.getElementById('revFilterMenu');
  if (sel) {
    const cur = sel.value;
    sel.innerHTML = '<option value="">Tous les menus</option>' +
      [...new Set(allOrders.map(o => o.menu))].map(m => `<option value="${m}"${m===cur?' selected':''}>${m}</option>`).join('');
  }
  calcRevenue();
}

function calcRevenue() {
  const menuF  = document.getElementById('revFilterMenu')?.value  || '';
  const dateS  = document.getElementById('revDateStart')?.value   || '';
  const dateE  = document.getElementById('revDateEnd')?.value     || '';
  const startD = dateS ? new Date(dateS) : null;
  const endD   = dateE ? new Date(dateE) : null;

  const filtered = allOrders.filter(o => {
    if (menuF && o.menu !== menuF) return false;
    const d = parseEventDate(o.event);
    if (startD && d && d < startD) return false;
    if (endD   && d && d > endD  ) return false;
    return true;
  });

  const g = getOrdersGrouped(filtered);
  const labels  = Object.keys(g);
  const totalCA = filtered.reduce((s, o) => s + o.total, 0);

  document.getElementById('revTable').innerHTML = labels.length ? `
    <table class="rev-table">
      <thead><tr><th>Menu</th><th>Commandes</th><th>CA (â‚¬)</th><th>% du total</th></tr></thead>
      <tbody>
        ${labels.map(l => `
          <tr>
            <td>${l}</td>
            <td>${g[l].count}</td>
            <td style="font-family:'Playfair Display',serif;font-weight:700;color:var(--burgundy)">${g[l].revenue.toLocaleString('fr-FR',{minimumFractionDigits:2})} â‚¬</td>
            <td>${totalCA > 0 ? ((g[l].revenue/totalCA)*100).toFixed(1) + ' %' : 'â€”'}</td>
          </tr>`).join('')}
        <tr>
          <td>TOTAL</td>
          <td>${filtered.length}</td>
          <td style="font-family:'Playfair Display',serif;color:var(--burgundy)">${totalCA.toLocaleString('fr-FR',{minimumFractionDigits:2})} â‚¬</td>
          <td>100 %</td>
        </tr>
      </tbody>
    </table>` : '<div class="dash-empty" style="padding:2rem 1rem"><div class="icon">ðŸ’¶</div><p>Aucune commande pour ces critÃ¨res.</p></div>';

  const ctx2 = document.getElementById('revenueChart').getContext('2d');
  if (revenueChartInst) { revenueChartInst.destroy(); revenueChartInst = null; }
  if (labels.length) {
    const palette = ['#7B1C2A','#C49A3C','#2d7a3a','#0d47a1','#e65100','#4a148c','#00695c','#558b2f'];
    revenueChartInst = new Chart(ctx2, {
      type: 'doughnut',
      data: {
        labels: labels.map(l => l.length > 22 ? l.slice(0,20)+'â€¦' : l),
        datasets: [{ data: labels.map(l => g[l].revenue), backgroundColor: labels.map((_,i) => palette[i % palette.length]), borderWidth: 2, borderColor: '#fff' }]
      },
      options: {
        responsive: true, maintainAspectRatio: false,
        plugins: {
          legend: { position: 'right', labels: { font: { family: 'DM Sans', size: 11 }, boxWidth: 12, padding: 10 } },
          title:  { display: true, text: 'RÃ©partition du CA par menu', font: { family: 'Playfair Display', size: 13, weight: '700' } },
          tooltip: { callbacks: { label: c => ' ' + c.label + ' : ' + c.parsed.toLocaleString('fr-FR',{minimumFractionDigits:2}) + ' â‚¬' } }
        }
      }
    });
  }
}

function resetRevFilters() {
  const s = document.getElementById('revDateStart');
  const e = document.getElementById('revDateEnd');
  const m = document.getElementById('revFilterMenu');
  if (s) s.value = '';
  if (e) e.value = '';
  if (m) m.value = '';
  calcRevenue();
}
let _cancelOrderId = null;
let _editingMenuId = null;

const empStatusMap = {
  received:        { label: 'ReÃ§ue',                   cls: 'status-received' },
  accepted:        { label: 'AcceptÃ©e',                 cls: 'status-accepted' },
  preparing:       { label: 'En prÃ©paration',           cls: 'status-preparing' },
  delivering:      { label: 'En cours de livraison',    cls: 'status-delivering' },
  delivered:       { label: 'LivrÃ©e',                   cls: 'status-delivered' },
  awaiting_return: { label: 'Attente retour matÃ©riel',  cls: 'status-awaiting_return' },
  completed:       { label: 'TerminÃ©e',                 cls: 'status-completed' },
  cancelled:       { label: 'AnnulÃ©e',                  cls: 'status-cancelled' },
};

const nextStatuses = {
  received:        ['accepted'],
  accepted:        ['preparing'],
  preparing:       ['delivering'],
  delivering:      ['delivered'],
  delivered:       ['awaiting_return', 'completed'],
  awaiting_return: ['completed'],
  completed:       [],
  cancelled:       [],
};

const allOrders = [
  { id: 'VG-2026-001', menu: 'Menu Gastronomique',     client: 'Anne-Sophie Martin', email: 'as.martin@email.fr',  tel: '06 12 34 56 78', persons: 8,  date: '14/02/2026', event: '14/02/2026', status: 'completed',  total: 360,  material: false, cancelInfo: null },
  { id: 'VG-2026-002', menu: 'Menu NoÃ«l Prestige',      client: 'Pierre Dupont',      email: 'pierre.d@email.fr',   tel: '06 98 76 54 32', persons: 12, date: '28/01/2026', event: '31/12/2025', status: 'completed',  total: 780,  material: true,  cancelInfo: null },
  { id: 'VG-2026-003', menu: 'Menu Buffet Festif',      client: 'Camille Renaud',     email: 'c.renaud@email.fr',   tel: '07 11 22 33 44', persons: 25, date: '05/02/2026', event: '22/02/2026', status: 'accepted',   total: 950,  material: false, cancelInfo: null },
  { id: 'VG-2026-004', menu: 'Menu Cocktail Prestige',  client: 'FranÃ§ois Laurent',   email: 'f.laurent@corp.fr',   tel: '06 55 66 77 88', persons: 30, date: '10/02/2026', event: '01/03/2026', status: 'received',   total: 1260, material: true,  cancelInfo: null },
  { id: 'VG-2026-005', menu: 'Menu Terroir',            client: 'Isabelle Thomas',    email: 'isa.t@email.fr',      tel: '07 33 44 55 66', persons: 6,  date: '15/02/2026', event: '05/03/2026', status: 'preparing',  total: 228,  material: false, cancelInfo: null },
  { id: 'VG-2026-006', menu: 'Menu Vegan Gourmand',     client: 'Marc Bernard',       email: 'marc.b@email.fr',     tel: '06 77 88 99 00', persons: 10, date: '17/02/2026', event: '08/03/2026', status: 'received',   total: 340,  material: false, cancelInfo: null },
  { id: 'VG-2026-007', menu: 'Menu PÃ¢ques Gourmand',    client: 'Sophie Blanc',       email: 'sophie.b@email.fr',   tel: '06 44 55 66 77', persons: 15, date: '18/02/2026', event: '20/04/2026', status: 'delivering', total: 780,  material: true,  cancelInfo: null },
];

let pendingReviews = [
  { id: 'r_p1', name: 'Sophie B.',   date: '18/02/2026', stars: 5, text: 'Prestation absolument parfaite pour notre anniversaire de mariage ! Les plats Ã©taient dÃ©licieux et le service impeccable.', status: 'pending' },
  { id: 'r_p2', name: 'Thomas V.',   date: '17/02/2026', stars: 4, text: 'TrÃ¨s bonne qualitÃ© gÃ©nÃ©rale. Le menu Terroir Ã©tait vraiment savoureux. Livraison lÃ©gÃ¨rement en retard mais rien de grave.', status: 'pending' },
  { id: 'r_p3', name: 'Lucie M.',    date: '16/02/2026', stars: 3, text: 'Correct sans plus. Les quantitÃ©s Ã©taient insuffisantes pour le nombre de personnes commandÃ©es.', status: 'pending' },
  ...reviews.map((r, i) => ({ id: 'r_pub_' + i, ...r, status: 'approved' })),
];

let hoursData = [
  { day: 'Lundi',    open: '09:00', close: '18:00', closed: false },
  { day: 'Mardi',    open: '09:00', close: '18:00', closed: false },
  { day: 'Mercredi', open: '09:00', close: '18:00', closed: false },
  { day: 'Jeudi',    open: '09:00', close: '18:00', closed: false },
  { day: 'Vendredi', open: '09:00', close: '18:00', closed: false },
  { day: 'Samedi',   open: '10:00', close: '16:00', closed: false },
  { day: 'Dimanche', open: '',      close: '',       closed: true  },
];

// Override handleLogin to detect employee credentials
function handleLogin() {
  const email = document.getElementById('login_email').value.trim();
  const password = document.getElementById('login_password').value;
  if (!email || !password) { showToast('Veuillez remplir tous les champs.'); return; }
  isEmployee = (email === 'employe@vg.fr' || email.toLowerCase().startsWith('employe'));
  isLoggedIn = true;
  currentUser = isEmployee
    ? { prenom: 'EmployÃ©', nom: 'VG', email, role: 'employee' }
    : { prenom: email.split('@')[0], email };
  closeLogin();
  updateNavAuth();
  showToast('Bienvenue ' + currentUser.prenom + ' !');
  if (pendingAction) { pendingAction(); pendingAction = null; }
}

// Override updateNavAuth to handle employee button
function updateNavAuth() {
  const btnLogin    = document.getElementById('navConnexion');
  const btnRegister = document.getElementById('navInscrire');
  const btnUser     = document.getElementById('navUser');
  const btnEmp      = document.getElementById('navEmployee');
  if (isLoggedIn && currentUser) {
    btnLogin.style.display    = 'none';
    btnRegister.style.display = 'none';
    if (isEmployee) {
      btnUser.style.display = 'none';
      if (btnEmp) btnEmp.style.display = 'flex';
    } else {
      btnUser.style.display = 'flex';
      document.getElementById('navUserName').textContent = currentUser.prenom;
      if (btnEmp) btnEmp.style.display = 'none';
    }
  } else {
    btnLogin.style.display    = '';
    btnRegister.style.display = '';
    btnUser.style.display     = 'none';
    if (btnEmp) btnEmp.style.display = 'none';
    isEmployee = false;
  }
}

// â”€â”€â”€ EMPLOYEE PANEL â”€â”€â”€
function openEmpPanel() {
  renderEmpOrders();
  renderEmpMenus();
  renderEmpReviews('pending');
  renderEmpHours();
  updateEmpBadges();
  document.getElementById('empOverlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeEmpPanel() {
  document.getElementById('empOverlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeEmpOutside(e) {
  if (e.target === document.getElementById('empOverlay')) closeEmpPanel();
}
function switchEmpTab(name, btn) {
  document.querySelectorAll('.emp-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.emp-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('emp-' + name).classList.add('active');
  if (btn) btn.classList.add('active');
}
function updateEmpBadges() {
  const pendingCount = pendingReviews.filter(r => r.status === 'pending').length;
  const rb = document.getElementById('empReviewsBadge');
  if (rb) { rb.textContent = pendingCount; rb.style.display = pendingCount > 0 ? 'inline-flex' : 'none'; }
  const newOrders = allOrders.filter(o => o.status === 'received').length;
  const ob = document.getElementById('empOrdersBadge');
  if (ob) { ob.textContent = newOrders; ob.style.display = newOrders > 0 ? 'inline-flex' : 'none'; }
}

// â”€â”€â”€ EMP: ORDERS â”€â”€â”€
function renderEmpOrders() {
  const statusF = document.getElementById('empFilterStatus').value;
  const clientF = document.getElementById('empFilterClient').value.toLowerCase();
  const menuF   = document.getElementById('empFilterMenu').value.toLowerCase();
  const filtered = allOrders.filter(o => {
    if (statusF && o.status !== statusF) return false;
    if (clientF && !o.client.toLowerCase().includes(clientF) && !o.email.toLowerCase().includes(clientF)) return false;
    if (menuF   && !o.menu.toLowerCase().includes(menuF)) return false;
    return true;
  });
  const list = document.getElementById('empOrdersList');
  if (!filtered.length) {
    list.innerHTML = '<div class="dash-empty"><div class="icon">ðŸ“‹</div><p>Aucune commande ne correspond aux critÃ¨res.</p></div>';
    return;
  }
  list.innerHTML = filtered.map(o => {
    const s = empStatusMap[o.status] || empStatusMap.received;
    const avail = (nextStatuses[o.status] || []);
    const canCancel = !['completed','cancelled'].includes(o.status);
    const statusOpts = avail.map(st => `<option value="${st}">${empStatusMap[st]?.label || st}</option>`).join('');
    const cancelInfoHtml = o.cancelInfo ? `
      <div style="background:rgba(229,57,53,0.05);border-left:3px solid #e53935;padding:.6rem 1rem;border-radius:0 4px 4px 0;margin-top:.6rem;font-size:.78rem;color:#b71c1c;line-height:1.5">
        <strong>AnnulÃ©e</strong> Â· Contact : ${o.cancelInfo.method === 'gsm' ? 'ðŸ“ž Appel GSM' : 'âœ‰ï¸ Email'} le ${o.cancelInfo.date}<br>Motif : ${o.cancelInfo.reason}
      </div>` : '';
    const actionsHtml = !['completed','cancelled'].includes(o.status) ? `
      <div class="emp-order-actions">
        ${statusOpts ? `<select class="emp-status-select" id="empSel_${o.id}"><option value="">â€” Changer le statut â€”</option>${statusOpts}</select><button class="btn-emp-update" onclick="applyOrderStatus('${o.id}')">Valider</button>` : ''}
        ${canCancel ? `<button class="btn-emp-cancel" onclick="openCancelModal('${o.id}')">Annuler la commande</button>` : ''}
      </div>` : '';
    return `
      <div class="emp-order-card">
        <div class="emp-order-top">
          <div>
            <div class="emp-order-ref">RÃ©f. ${o.id}</div>
            <div class="emp-order-name">${o.menu}</div>
            <div class="emp-order-client">ðŸ‘¤ ${o.client} Â· <a href="mailto:${o.email}" style="color:var(--burgundy);text-decoration:none">${o.email}</a> Â· ${o.tel}</div>
          </div>
          <span class="order-status ${s.cls}">${s.label}</span>
        </div>
        <div class="emp-order-meta">
          <span>ðŸ‘¥ ${o.persons} personnes</span>
          <span>ðŸ“… Ã‰vÃ©nement : ${o.event}</span>
          <span>ðŸ—“ CommandÃ© le ${o.date}</span>
          <span style="font-family:'Playfair Display',serif;font-weight:700;color:var(--burgundy)">${o.total.toFixed(2).replace('.',',')} â‚¬</span>
          ${o.material ? '<span style="background:rgba(196,154,60,0.12);color:#7a5c00;padding:.1rem .5rem;border-radius:100px;font-size:.72rem">ðŸ§º MatÃ©riel prÃªtÃ©</span>' : ''}
        </div>
        ${cancelInfoHtml}
        ${actionsHtml}
      </div>`;
  }).join('');
}

function applyOrderStatus(orderId) {
  const sel = document.getElementById('empSel_' + orderId);
  if (!sel || !sel.value) { showToast('Veuillez sÃ©lectionner un statut.'); return; }
  const order = allOrders.find(o => o.id === orderId);
  if (!order) return;
  order.status = sel.value;
  if (order.status === 'delivered' && !order.material) order.status = 'completed';
  if (order.status === 'awaiting_return') {
    showToast('ðŸ“§ Notification envoyÃ©e Ã  ' + order.client + ' : restitution du matÃ©riel sous 10 jours ouvrÃ©s (600 â‚¬ sinon).');
  }
  renderEmpOrders();
  updateEmpBadges();
  showToast('Commande ' + orderId + ' â†’ "' + empStatusMap[order.status]?.label + '"');
}

function openCancelModal(orderId) {
  _cancelOrderId = orderId;
  const o = allOrders.find(x => x.id === orderId);
  document.getElementById('cancelOrderRef').textContent = 'RÃ©f. ' + orderId + (o ? ' â€” ' + o.menu : '');
  document.getElementById('cancelContactMethod').value = '';
  document.getElementById('cancelContactDate').value   = '';
  document.getElementById('cancelReason').value        = '';
  document.getElementById('cancelOrderOverlay').classList.add('open');
}
function closeCancelModal() {
  document.getElementById('cancelOrderOverlay').classList.remove('open');
}
function closeCancelModalOutside(e) {
  if (e.target === document.getElementById('cancelOrderOverlay')) closeCancelModal();
}
function submitCancelOrder() {
  const method = document.getElementById('cancelContactMethod').value;
  const date   = document.getElementById('cancelContactDate').value;
  const reason = document.getElementById('cancelReason').value.trim();
  if (!method) { showToast('Veuillez sÃ©lectionner le mode de contact.'); return; }
  if (!date)   { showToast('Veuillez indiquer la date du contact.'); return; }
  if (!reason) { showToast('Veuillez indiquer le motif d\'annulation.'); return; }
  const order = allOrders.find(o => o.id === _cancelOrderId);
  if (!order) return;
  order.status     = 'cancelled';
  order.cancelInfo = { method, date, reason };
  closeCancelModal();
  renderEmpOrders();
  updateEmpBadges();
  showToast('Commande ' + _cancelOrderId + ' annulÃ©e avec motif enregistrÃ©.');
  _cancelOrderId = null;
}

// â”€â”€â”€ EMP: MENUS â”€â”€â”€
function renderEmpMenus() {
  document.getElementById('empMenusList').innerHTML = menus.map(m => `
    <div class="emp-menu-card">
      <div class="emp-menu-thumb"><img src="${m.img}" alt="${m.name}" loading="lazy"></div>
      <div class="emp-menu-info">
        <div class="emp-menu-name">${m.name}</div>
        <div class="emp-menu-meta">
          <span class="card-badge ${m.type}" style="position:static;display:inline-block;margin-right:.3rem">${m.type === 'vegan' ? 'Vegan' : m.type === 'vegetarien' ? 'VÃ©gÃ©tarien' : 'Classique'}</span>
          ${m.price.toFixed(2).replace('.',',')} â‚¬/pers. Â· min. ${m.minPersons} pers.
        </div>
      </div>
      <div class="emp-menu-actions">
        <button class="btn-icon" onclick="openMenuForm(${m.id})">âœï¸ Modifier</button>
        <button class="btn-icon danger" onclick="deleteMenuEmp(${m.id})">ðŸ—‘ Supprimer</button>
      </div>
    </div>`).join('');
}

function openMenuForm(id) {
  _editingMenuId = id;
  if (id === null) {
    document.getElementById('menuFormTitle').textContent = 'Nouveau menu';
    ['mf_name','mf_theme','mf_price','mf_minPersons','mf_desc','mf_fullDesc','mf_composition','mf_allergens','mf_img'].forEach(f => document.getElementById(f).value = '');
    document.getElementById('mf_type').value = 'classique';
  } else {
    const m = menus.find(x => x.id === id);
    if (!m) return;
    document.getElementById('menuFormTitle').textContent = 'Modifier â€” ' + m.name;
    document.getElementById('mf_name').value        = m.name;
    document.getElementById('mf_type').value        = m.type;
    document.getElementById('mf_theme').value       = m.theme || '';
    document.getElementById('mf_price').value       = m.price;
    document.getElementById('mf_minPersons').value  = m.minPersons;
    document.getElementById('mf_desc').value        = m.desc;
    document.getElementById('mf_fullDesc').value    = m.fullDesc || '';
    document.getElementById('mf_composition').value = (m.composition || []).join('\n');
    document.getElementById('mf_allergens').value   = m.allergens || '';
    document.getElementById('mf_img').value         = m.img || '';
  }
  document.getElementById('menuFormOverlay').classList.add('open');
}
function closeMenuForm() {
  document.getElementById('menuFormOverlay').classList.remove('open');
}
function saveMenuForm() {
  const name       = document.getElementById('mf_name').value.trim();
  const type       = document.getElementById('mf_type').value;
  const theme      = document.getElementById('mf_theme').value.trim();
  const price      = parseFloat(document.getElementById('mf_price').value);
  const minPersons = parseInt(document.getElementById('mf_minPersons').value);
  const desc       = document.getElementById('mf_desc').value.trim();
  const fullDesc   = document.getElementById('mf_fullDesc').value.trim();
  const compRaw    = document.getElementById('mf_composition').value.trim();
  const allergens  = document.getElementById('mf_allergens').value.trim();
  const img        = document.getElementById('mf_img').value.trim();
  if (!name || !price || !minPersons || !desc) { showToast('Veuillez remplir les champs obligatoires.'); return; }
  const composition = compRaw ? compRaw.split('\n').map(s => s.trim()).filter(Boolean) : [];
  const fallbackImg = 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=700&q=80';
  if (_editingMenuId === null) {
    menus.push({ id: Math.max(...menus.map(m => m.id)) + 1, name, type, theme, desc, fullDesc, price, minPersons, img: img || fallbackImg, composition, allergens });
    showToast('Menu "' + name + '" ajoutÃ© !');
  } else {
    const idx = menus.findIndex(m => m.id === _editingMenuId);
    if (idx !== -1) Object.assign(menus[idx], { name, type, theme, desc, fullDesc, price, minPersons, img: img || menus[idx].img, composition, allergens });
    showToast('Menu "' + name + '" mis Ã  jour !');
  }
  closeMenuForm();
  renderEmpMenus();
  renderMenus(menus);
}
function deleteMenuEmp(id) {
  const m = menus.find(x => x.id === id);
  if (!m) return;
  if (!confirm('Supprimer "' + m.name + '" ? Cette action est irrÃ©versible.')) return;
  menus.splice(menus.findIndex(x => x.id === id), 1);
  renderEmpMenus();
  renderMenus(menus);
  showToast('Menu supprimÃ©.');
}

// â”€â”€â”€ EMP: REVIEWS â”€â”€â”€
let _reviewFilter = 'pending';
function renderEmpReviews(filter) {
  _reviewFilter = filter || _reviewFilter;
  const filtered = pendingReviews.filter(r => r.status === _reviewFilter);
  const list = document.getElementById('empReviewsList');
  if (!filtered.length) {
    const msgs = { pending: 'Aucun avis en attente de modÃ©ration.', approved: 'Aucun avis approuvÃ©.', rejected: 'Aucun avis refusÃ©.' };
    list.innerHTML = `<div class="dash-empty"><div class="icon">â­</div><p>${msgs[_reviewFilter] || 'Aucun avis.'}</p></div>`;
    updateEmpBadges(); return;
  }
  list.innerHTML = filtered.map(r => {
    const statusCls = r.status === 'approved' ? 'status-accepted' : r.status === 'rejected' ? 'status-cancelled' : 'status-pending';
    const statusLbl = r.status === 'approved' ? 'ApprouvÃ©' : r.status === 'rejected' ? 'RefusÃ©' : 'En attente';
    return `
      <div class="emp-review-card">
        <div class="emp-review-header">
          <div>
            <div class="emp-review-author">${r.name} <span style="color:var(--gold)">${'â˜…'.repeat(r.stars)}${'â˜†'.repeat(5-r.stars)}</span></div>
            <div class="emp-review-date">${r.date}</div>
          </div>
          <span class="order-status ${statusCls}" style="font-size:.65rem">${statusLbl}</span>
        </div>
        <p class="emp-review-text">"${r.text}"</p>
        <div class="emp-review-actions">
          ${r.status !== 'approved' ? `<button class="btn-approve" onclick="approveReview('${r.id}')">âœ“ Approuver</button>` : ''}
          ${r.status !== 'rejected' ? `<button class="btn-reject"  onclick="rejectReview('${r.id}')">âœ• Refuser</button>` : ''}
        </div>
      </div>`;
  }).join('');
  updateEmpBadges();
}
function approveReview(id) {
  const r = pendingReviews.find(x => x.id === id);
  if (!r) return;
  r.status = 'approved';
  if (!reviews.some(rv => rv.name === r.name && rv.text === r.text)) {
    reviews.push({ name: r.name, date: r.date, stars: r.stars, text: r.text });
    renderReviews();
  }
  renderEmpReviews();
  showToast('Avis de ' + r.name + ' approuvÃ© et publiÃ©.');
}
function rejectReview(id) {
  const r = pendingReviews.find(x => x.id === id);
  if (!r) return;
  r.status = 'rejected';
  const idx = reviews.findIndex(rv => rv.name === r.name && rv.text === r.text);
  if (idx !== -1) { reviews.splice(idx, 1); renderReviews(); }
  renderEmpReviews();
  showToast('Avis de ' + r.name + ' refusÃ©.');
}

// â”€â”€â”€ EMP: HOURS â”€â”€â”€
function renderEmpHours() {
  document.getElementById('empHoursList').innerHTML = hoursData.map((h, i) => `
    <div class="hours-row">
      <div class="hours-day">${h.day}</div>
      <div class="hours-inputs">
        <input type="time" id="h_open_${i}"  value="${h.open}"  ${h.closed ? 'disabled' : ''} style="${h.closed ? 'opacity:.4' : ''}">
        <span>â€“</span>
        <input type="time" id="h_close_${i}" value="${h.close}" ${h.closed ? 'disabled' : ''} style="${h.closed ? 'opacity:.4' : ''}">
      </div>
      <label class="hours-closed-toggle">
        <input type="checkbox" id="h_closed_${i}" ${h.closed ? 'checked' : ''} onchange="toggleDayClosed(${i})"> FermÃ©
      </label>
    </div>`).join('');
}
function toggleDayClosed(i) {
  const closed = document.getElementById('h_closed_' + i).checked;
  hoursData[i].closed = closed;
  const op = document.getElementById('h_open_' + i);
  const cl = document.getElementById('h_close_' + i);
  op.disabled = cl.disabled = closed;
  op.style.opacity = cl.style.opacity = closed ? '.4' : '1';
}
function saveHours() {
  hoursData.forEach((h, i) => {
    h.open   = document.getElementById('h_open_'   + i).value;
    h.close  = document.getElementById('h_close_'  + i).value;
    h.closed = document.getElementById('h_closed_' + i).checked;
  });
  showToast('Horaires mis Ã  jour avec succÃ¨s !');
}

// â”€â”€â”€ INIT â”€â”€â”€
renderMenus(menus);
renderReviews();
updateCart();
updateNavAuth();
</script>
</body>
</html>
